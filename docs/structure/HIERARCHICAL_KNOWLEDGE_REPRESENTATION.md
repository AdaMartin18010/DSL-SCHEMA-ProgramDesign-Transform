# å±‚æ¬¡åŒ–çŸ¥è¯†è¡¨ç¤ºæ¡†æž¶

## ðŸ“‘ ç›®å½•

- [å±‚æ¬¡åŒ–çŸ¥è¯†è¡¨ç¤ºæ¡†æž¶](#å±‚æ¬¡åŒ–çŸ¥è¯†è¡¨ç¤ºæ¡†æž¶)
  - [ðŸ“‘ ç›®å½•](#-ç›®å½•)
  - [1. æ¦‚è¿°](#1-æ¦‚è¿°)
  - [2. æ¡†æž¶å®šä¹‰](#2-æ¡†æž¶å®šä¹‰)
    - [2.1 å½¢å¼åŒ–å®šä¹‰](#21-å½¢å¼åŒ–å®šä¹‰)
    - [2.2 çŸ¥è¯†å±‚æ¬¡](#22-çŸ¥è¯†å±‚æ¬¡)
  - [3. çŸ¥è¯†é‡‘å­—å¡”ç»“æž„](#3-çŸ¥è¯†é‡‘å­—å¡”ç»“æž„)
    - [3.1 ä¸‰å±‚çŸ¥è¯†é‡‘å­—å¡”](#31-ä¸‰å±‚çŸ¥è¯†é‡‘å­—å¡”)
    - [3.2 æŠ½è±¡å…³ç³»](#32-æŠ½è±¡å…³ç³»)
  - [4. çŸ¥è¯†æŠ½è±¡ç®—æ³•](#4-çŸ¥è¯†æŠ½è±¡ç®—æ³•)
    - [4.1 å®žä¾‹æŠ½è±¡ç®—æ³•](#41-å®žä¾‹æŠ½è±¡ç®—æ³•)
    - [4.2 æ¨¡å¼æŠ½è±¡ç®—æ³•](#42-æ¨¡å¼æŠ½è±¡ç®—æ³•)
  - [5. å±‚æ¬¡åŒ–æŽ¨ç†](#5-å±‚æ¬¡åŒ–æŽ¨ç†)
    - [5.1 è‡ªåº•å‘ä¸ŠæŽ¨ç†](#51-è‡ªåº•å‘ä¸ŠæŽ¨ç†)
    - [5.2 è‡ªé¡¶å‘ä¸‹æŽ¨ç†](#52-è‡ªé¡¶å‘ä¸‹æŽ¨ç†)
    - [5.3 è·¨å±‚æŽ¨ç†](#53-è·¨å±‚æŽ¨ç†)
  - [6. æ•°æ®ç»“æž„è®¾è®¡](#6-æ•°æ®ç»“æž„è®¾è®¡)
    - [6.1 å±‚æ¬¡åŒ–å®žä½“æ•°æ®ç»“æž„](#61-å±‚æ¬¡åŒ–å®žä½“æ•°æ®ç»“æž„)
    - [6.2 æŠ½è±¡å…³ç³»æ•°æ®ç»“æž„](#62-æŠ½è±¡å…³ç³»æ•°æ®ç»“æž„)
  - [7. å®žçŽ°æ–¹æ¡ˆ](#7-å®žçŽ°æ–¹æ¡ˆ)
    - [7.1 PostgreSQLå­˜å‚¨](#71-postgresqlå­˜å‚¨)
    - [7.2 æŠ½è±¡ç®—æ³•å®žçŽ°](#72-æŠ½è±¡ç®—æ³•å®žçŽ°)
  - [8. åº”ç”¨åœºæ™¯](#8-åº”ç”¨åœºæ™¯)
    - [8.1 Schemaæ¨¡å¼æå–](#81-schemaæ¨¡å¼æå–)
    - [8.2 è½¬æ¢è§„åˆ™æŠ½è±¡](#82-è½¬æ¢è§„åˆ™æŠ½è±¡)
    - [8.3 æ¦‚å¿µå±‚æ¬¡æŸ¥è¯¢](#83-æ¦‚å¿µå±‚æ¬¡æŸ¥è¯¢)

---

## 1. æ¦‚è¿°

**å±‚æ¬¡åŒ–çŸ¥è¯†è¡¨ç¤ºï¼ˆHierarchical Knowledge Representationï¼‰**é‡‡ç”¨**çŸ¥è¯†é‡‘å­—å¡”**ç»“æž„ï¼Œå°†ä½Žå±‚æ¬¡çŸ¥è¯†æŠ½è±¡ä¸ºé«˜å±‚æ¬¡æ¦‚å¿µï¼Œå¢žå¼ºæŽ¨ç†çš„æ³›åŒ–èƒ½åŠ›å’Œé²æ£’æ€§ã€‚

**æ ¸å¿ƒåˆ›æ–°**ï¼š

- çŸ¥è¯†é‡‘å­—å¡”ç»“æž„ï¼ˆ3å±‚ä»¥ä¸Šï¼‰
- ä½Žå±‚æ¬¡åˆ°é«˜å±‚æ¬¡çŸ¥è¯†æŠ½è±¡
- å±‚æ¬¡åŒ–æŽ¨ç†
- å±‚æ¬¡åŒ–æŸ¥è¯¢

**æƒå¨æ¥æº**ï¼šçŸ¥è¯†é‡‘å­—å¡”ç†è®ºã€å±‚æ¬¡åŒ–çŸ¥è¯†è¡¨ç¤ºç ”ç©¶

---

## 2. æ¡†æž¶å®šä¹‰

### 2.1 å½¢å¼åŒ–å®šä¹‰

**å®šä¹‰1ï¼ˆå±‚æ¬¡åŒ–çŸ¥è¯†è¡¨ç¤ºï¼‰**ï¼š

```text
Hierarchical_KR = (Lâ‚, Lâ‚‚, ..., Lâ‚™, A)
```

å…¶ä¸­ï¼š

- `Lâ‚, Lâ‚‚, ..., Lâ‚™`ï¼šä¸åŒå±‚æ¬¡çš„çŸ¥è¯†å±‚
- `A`ï¼šæŠ½è±¡å‡½æ•°ï¼ˆAbstraction Functionsï¼‰

### 2.2 çŸ¥è¯†å±‚æ¬¡

**çŸ¥è¯†å±‚æ¬¡å®šä¹‰**ï¼š

1. **Lâ‚å±‚ï¼ˆåº•å±‚ï¼‰**ï¼šå…·ä½“å®žä¾‹å’Œäº‹å®ž
   - Schemaå…·ä½“å®šä¹‰
   - è½¬æ¢è§„åˆ™å®žä¾‹
   - å®žé™…æ¡ˆä¾‹

2. **Lâ‚‚å±‚ï¼ˆä¸­å±‚ï¼‰**ï¼šæ¨¡å¼å’Œè§„åˆ™
   - Schemaæ¨¡å¼
   - è½¬æ¢æ¨¡å¼
   - è®¾è®¡æ¨¡å¼

3. **Lâ‚ƒå±‚ï¼ˆé«˜å±‚ï¼‰**ï¼šæ¦‚å¿µå’ŒåŽŸç†
   - Schemaæ¦‚å¿µ
   - è½¬æ¢åŽŸç†
   - ç†è®ºåŸºç¡€

---

## 3. çŸ¥è¯†é‡‘å­—å¡”ç»“æž„

### 3.1 ä¸‰å±‚çŸ¥è¯†é‡‘å­—å¡”

**ç»“æž„å®šä¹‰**ï¼š

```text
çŸ¥è¯†é‡‘å­—å¡”ï¼ˆ3å±‚ï¼‰
â”œâ”€â”€ Lâ‚ƒå±‚ï¼ˆæ¦‚å¿µå±‚ï¼‰
â”‚   â”œâ”€â”€ Schemaæ¦‚å¿µ
â”‚   â”œâ”€â”€ è½¬æ¢åŽŸç†
â”‚   â””â”€â”€ ç†è®ºåŸºç¡€
â”œâ”€â”€ Lâ‚‚å±‚ï¼ˆæ¨¡å¼å±‚ï¼‰
â”‚   â”œâ”€â”€ Schemaæ¨¡å¼
â”‚   â”œâ”€â”€ è½¬æ¢æ¨¡å¼
â”‚   â””â”€â”€ è®¾è®¡æ¨¡å¼
â””â”€â”€ Lâ‚å±‚ï¼ˆå®žä¾‹å±‚ï¼‰
    â”œâ”€â”€ Schemaå®žä¾‹
    â”œâ”€â”€ è½¬æ¢è§„åˆ™å®žä¾‹
    â””â”€â”€ å®žé™…æ¡ˆä¾‹
```

### 3.2 æŠ½è±¡å…³ç³»

**æŠ½è±¡å…³ç³»å®šä¹‰**ï¼š

```text
Lâ‚ â†’ Lâ‚‚ï¼šå®žä¾‹æŠ½è±¡ä¸ºæ¨¡å¼
Lâ‚‚ â†’ Lâ‚ƒï¼šæ¨¡å¼æŠ½è±¡ä¸ºæ¦‚å¿µ
```

**æŠ½è±¡å‡½æ•°**ï¼š

```text
Aâ‚â‚‚: Lâ‚ â†’ Lâ‚‚  // å®žä¾‹åˆ°æ¨¡å¼çš„æŠ½è±¡
Aâ‚‚â‚ƒ: Lâ‚‚ â†’ Lâ‚ƒ  // æ¨¡å¼åˆ°æ¦‚å¿µçš„æŠ½è±¡
Aâ‚â‚ƒ: Lâ‚ â†’ Lâ‚ƒ  // å®žä¾‹åˆ°æ¦‚å¿µçš„æŠ½è±¡ï¼ˆå¤åˆæŠ½è±¡ï¼‰
```

---

## 4. çŸ¥è¯†æŠ½è±¡ç®—æ³•

### 4.1 å®žä¾‹æŠ½è±¡ç®—æ³•

**ç®—æ³•1ï¼ˆå®žä¾‹åˆ°æ¨¡å¼æŠ½è±¡ï¼‰**ï¼š

```text
è¾“å…¥ï¼šå®žä¾‹é›†åˆ I = {iâ‚, iâ‚‚, ..., iâ‚™}
è¾“å‡ºï¼šæ¨¡å¼ P

1. æå–å…±åŒç‰¹å¾ F = ExtractCommonFeatures(I)
2. è¯†åˆ«å˜åŒ–ç‚¹ V = IdentifyVariationPoints(I)
3. æž„å»ºæ¨¡å¼ P = BuildPattern(F, V)
4. è¿”å›ž P
```

**ç¤ºä¾‹**ï¼š

- **è¾“å…¥**ï¼šå¤šä¸ªSchemaå®žä¾‹ï¼ˆSWIFTã€ISO 20022ã€FHIRç­‰ï¼‰
- **è¾“å‡º**ï¼šé‡‘èžSchemaæ¨¡å¼ï¼ˆé€šç”¨ç»“æž„ã€å­—æ®µç±»åž‹ã€è½¬æ¢è§„åˆ™ï¼‰

### 4.2 æ¨¡å¼æŠ½è±¡ç®—æ³•

**ç®—æ³•2ï¼ˆæ¨¡å¼åˆ°æ¦‚å¿µæŠ½è±¡ï¼‰**ï¼š

```text
è¾“å…¥ï¼šæ¨¡å¼é›†åˆ P = {pâ‚, pâ‚‚, ..., pâ‚™}
è¾“å‡ºï¼šæ¦‚å¿µ C

1. æå–æ¨¡å¼å…±æ€§ G = ExtractCommonality(P)
2. è¯†åˆ«æ¨¡å¼å·®å¼‚ D = IdentifyDifferences(P)
3. æž„å»ºæ¦‚å¿µ C = BuildConcept(G, D)
4. è¿”å›ž C
```

**ç¤ºä¾‹**ï¼š

- **è¾“å…¥**ï¼šå¤šä¸ªSchemaæ¨¡å¼ï¼ˆé‡‘èžã€åŒ»ç–—ã€ç‰©æµç­‰ï¼‰
- **è¾“å‡º**ï¼šSchemaè½¬æ¢æ¦‚å¿µï¼ˆè½¬æ¢åŽŸç†ã€è¯­ä¹‰ä¿æŒã€ç±»åž‹å®‰å…¨ï¼‰

---

## 5. å±‚æ¬¡åŒ–æŽ¨ç†

### 5.1 è‡ªåº•å‘ä¸ŠæŽ¨ç†

**å®šä¹‰**ï¼šä»Žä½Žå±‚æ¬¡çŸ¥è¯†æŽ¨ç†é«˜å±‚æ¬¡çŸ¥è¯†

**æŽ¨ç†è¿‡ç¨‹**ï¼š

```text
Lâ‚å®žä¾‹ â†’ æŠ½è±¡ â†’ Lâ‚‚æ¨¡å¼ â†’ æŠ½è±¡ â†’ Lâ‚ƒæ¦‚å¿µ
```

**ç¤ºä¾‹**ï¼š

- ä»Žå¤šä¸ªSchemaè½¬æ¢å®žä¾‹æŽ¨ç†è½¬æ¢æ¨¡å¼
- ä»Žå¤šä¸ªè½¬æ¢æ¨¡å¼æŽ¨ç†è½¬æ¢æ¦‚å¿µ

### 5.2 è‡ªé¡¶å‘ä¸‹æŽ¨ç†

**å®šä¹‰**ï¼šä»Žé«˜å±‚æ¬¡çŸ¥è¯†æŽ¨ç†ä½Žå±‚æ¬¡çŸ¥è¯†

**æŽ¨ç†è¿‡ç¨‹**ï¼š

```text
Lâ‚ƒæ¦‚å¿µ â†’ å…·ä½“åŒ– â†’ Lâ‚‚æ¨¡å¼ â†’ å®žä¾‹åŒ– â†’ Lâ‚å®žä¾‹
```

**ç¤ºä¾‹**ï¼š

- ä»ŽSchemaè½¬æ¢æ¦‚å¿µæŽ¨ç†è½¬æ¢æ¨¡å¼
- ä»Žè½¬æ¢æ¨¡å¼ç”Ÿæˆå…·ä½“è½¬æ¢è§„åˆ™

### 5.3 è·¨å±‚æŽ¨ç†

**å®šä¹‰**ï¼šåœ¨ä¸åŒå±‚æ¬¡é—´è¿›è¡ŒæŽ¨ç†

**æŽ¨ç†ç±»åž‹**ï¼š

1. **ç±»æ¯”æŽ¨ç†**ï¼š
   - åœ¨ä¸åŒå±‚æ¬¡é—´è¿›è¡Œç±»æ¯”
   - åˆ©ç”¨ç›¸ä¼¼æ€§è¿›è¡ŒæŽ¨ç†

2. **å½’çº³æŽ¨ç†**ï¼š
   - ä»Žä½Žå±‚æ¬¡å½’çº³é«˜å±‚æ¬¡çŸ¥è¯†

3. **æ¼”ç»ŽæŽ¨ç†**ï¼š
   - ä»Žé«˜å±‚æ¬¡æ¼”ç»Žä½Žå±‚æ¬¡çŸ¥è¯†

---

## 6. æ•°æ®ç»“æž„è®¾è®¡

### 6.1 å±‚æ¬¡åŒ–å®žä½“æ•°æ®ç»“æž„

```typescript
interface HierarchicalEntity {
  id: string;                    // å®žä½“ID
  name: string;                  // å®žä½“åç§°
  level: number;                 // å±‚æ¬¡ï¼ˆ1ã€2ã€3ï¼‰

  // å±‚æ¬¡å…³ç³»
  abstraction?: string;           // æŠ½è±¡å®žä½“IDï¼ˆæŒ‡å‘æ›´é«˜å±‚æ¬¡ï¼‰
  concretizations: string[];     // å…·ä½“åŒ–å®žä½“IDåˆ—è¡¨ï¼ˆæŒ‡å‘æ›´ä½Žå±‚æ¬¡ï¼‰

  // çŸ¥è¯†å†…å®¹
  content: {
    instances?: any[];           // Lâ‚å±‚ï¼šå®žä¾‹åˆ—è¡¨
    patterns?: any[];             // Lâ‚‚å±‚ï¼šæ¨¡å¼åˆ—è¡¨
    concepts?: any[];             // Lâ‚ƒå±‚ï¼šæ¦‚å¿µåˆ—è¡¨
  };
}
```

### 6.2 æŠ½è±¡å…³ç³»æ•°æ®ç»“æž„

```typescript
interface AbstractionRelation {
  id: string;                    // å…³ç³»ID
  source: string;                // æºå®žä½“IDï¼ˆä½Žå±‚æ¬¡ï¼‰
  target: string;                // ç›®æ ‡å®žä½“IDï¼ˆé«˜å±‚æ¬¡ï¼‰
  type: 'abstraction' | 'concretization';
  confidence: number;             // æŠ½è±¡ç½®ä¿¡åº¦
  abstraction_function: string;  // æŠ½è±¡å‡½æ•°åç§°
}
```

---

## 7. å®žçŽ°æ–¹æ¡ˆ

### 7.1 PostgreSQLå­˜å‚¨

```sql
-- å±‚æ¬¡åŒ–å®žä½“è¡¨
CREATE TABLE hierarchical_entities (
    id VARCHAR(50) PRIMARY KEY,
    name VARCHAR(200) NOT NULL,
    level INTEGER NOT NULL CHECK (level >= 1 AND level <= 3),
    abstraction VARCHAR(50) REFERENCES hierarchical_entities(id),
    content JSONB,
    created_at TIMESTAMP DEFAULT NOW()
);

-- æŠ½è±¡å…³ç³»è¡¨
CREATE TABLE abstraction_relations (
    id VARCHAR(50) PRIMARY KEY,
    source VARCHAR(50) REFERENCES hierarchical_entities(id),
    target VARCHAR(50) REFERENCES hierarchical_entities(id),
    type VARCHAR(20) NOT NULL,
    confidence FLOAT,
    abstraction_function VARCHAR(100)
);

-- ç´¢å¼•
CREATE INDEX idx_hierarchical_entities_level
  ON hierarchical_entities(level);
CREATE INDEX idx_hierarchical_entities_abstraction
  ON hierarchical_entities(abstraction);
```

### 7.2 æŠ½è±¡ç®—æ³•å®žçŽ°

**Pythonå®žçŽ°ç¤ºä¾‹**ï¼š

```python
class HierarchicalKnowledgeRepresentation:
    def abstract_instances_to_pattern(self, instances):
        """å°†å®žä¾‹æŠ½è±¡ä¸ºæ¨¡å¼"""
        common_features = self.extract_common_features(instances)
        variation_points = self.identify_variation_points(instances)
        pattern = self.build_pattern(common_features, variation_points)
        return pattern

    def abstract_patterns_to_concept(self, patterns):
        """å°†æ¨¡å¼æŠ½è±¡ä¸ºæ¦‚å¿µ"""
        commonality = self.extract_commonality(patterns)
        differences = self.identify_differences(patterns)
        concept = self.build_concept(commonality, differences)
        return concept
```

---

## 8. åº”ç”¨åœºæ™¯

### 8.1 Schemaæ¨¡å¼æå–

**åœºæ™¯**ï¼šä»Žå¤šä¸ªSchemaå®žä¾‹æå–é€šç”¨æ¨¡å¼

**æµç¨‹**ï¼š

1. æ”¶é›†å¤šä¸ªSchemaå®žä¾‹
2. æå–å…±åŒç‰¹å¾
3. æž„å»ºSchemaæ¨¡å¼
4. ç”¨äºŽæ–°Schemaè®¾è®¡

### 8.2 è½¬æ¢è§„åˆ™æŠ½è±¡

**åœºæ™¯**ï¼šä»Žå¤šä¸ªè½¬æ¢å®žä¾‹æŠ½è±¡è½¬æ¢è§„åˆ™

**æµç¨‹**ï¼š

1. æ”¶é›†å¤šä¸ªè½¬æ¢å®žä¾‹
2. è¯†åˆ«è½¬æ¢æ¨¡å¼
3. æŠ½è±¡è½¬æ¢è§„åˆ™
4. ç”¨äºŽæ–°è½¬æ¢åœºæ™¯

### 8.3 æ¦‚å¿µå±‚æ¬¡æŸ¥è¯¢

**åœºæ™¯**ï¼šåœ¨ä¸åŒå±‚æ¬¡æŸ¥è¯¢ç›¸å…³çŸ¥è¯†

**æµç¨‹**ï¼š

1. ç”¨æˆ·æŸ¥è¯¢æ¦‚å¿µå±‚çŸ¥è¯†
2. ç³»ç»Ÿè‡ªåŠ¨ä¸‹æŽ¨åˆ°æ¨¡å¼å±‚å’Œå®žä¾‹å±‚
3. è¿”å›žå¤šå±‚æ¬¡ç»“æžœ
4. æä¾›å®Œæ•´çŸ¥è¯†è§†å›¾

---

**åˆ›å»ºæ—¶é—´**ï¼š2025-01-21
**æœ€åŽæ›´æ–°**ï¼š2025-01-21
**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0
**ç»´æŠ¤è€…**ï¼šDSL Schemaç ”ç©¶å›¢é˜Ÿ
