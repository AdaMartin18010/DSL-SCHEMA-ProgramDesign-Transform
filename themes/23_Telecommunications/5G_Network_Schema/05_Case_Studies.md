# 5Gç½‘ç»œSchemaå®è·µæ¡ˆä¾‹

## ğŸ“‘ ç›®å½•

- [5Gç½‘ç»œSchemaå®è·µæ¡ˆä¾‹](#5gç½‘ç»œschemaå®è·µæ¡ˆä¾‹)
  - [ğŸ“‘ ç›®å½•](#-ç›®å½•)
  - [1. æ¡ˆä¾‹æ¦‚è¿°](#1-æ¡ˆä¾‹æ¦‚è¿°)
  - [2. æ¡ˆä¾‹1ï¼šä¼ä¸š5Gç½‘ç»œéƒ¨ç½²ç³»ç»Ÿ](#2-æ¡ˆä¾‹1ä¼ä¸š5gç½‘ç»œéƒ¨ç½²ç³»ç»Ÿ)
    - [2.1 ä¸šåŠ¡èƒŒæ™¯](#21-ä¸šåŠ¡èƒŒæ™¯)
    - [2.2 æŠ€æœ¯æŒ‘æˆ˜](#22-æŠ€æœ¯æŒ‘æˆ˜)
    - [2.3 è§£å†³æ–¹æ¡ˆ](#23-è§£å†³æ–¹æ¡ˆ)
    - [2.4 å®Œæ•´ä»£ç å®ç°](#24-å®Œæ•´ä»£ç å®ç°)
    - [2.5 æ•ˆæœè¯„ä¼°](#25-æ•ˆæœè¯„ä¼°)
  - [3. æ¡ˆä¾‹2ï¼šç½‘ç»œåˆ‡ç‰‡ç®¡ç†](#3-æ¡ˆä¾‹2ç½‘ç»œåˆ‡ç‰‡ç®¡ç†)
    - [3.1 åœºæ™¯æè¿°](#31-åœºæ™¯æè¿°)
    - [3.2 å®ç°ä»£ç ](#32-å®ç°ä»£ç )

---

## 1. æ¡ˆä¾‹æ¦‚è¿°

æœ¬æ–‡æ¡£æä¾›5Gç½‘ç»œSchemaåœ¨å®é™…ä¼ä¸šåº”ç”¨ä¸­çš„å®è·µæ¡ˆä¾‹ï¼Œæ¶µç›–5Gç½‘ç»œéƒ¨ç½²ã€ç½‘ç»œåˆ‡ç‰‡ç®¡ç†ã€ç½‘ç»œåŠŸèƒ½ç¼–æ’ç­‰çœŸå®åœºæ™¯ã€‚

**æ¡ˆä¾‹ç±»å‹**ï¼š

1. **5Gç½‘ç»œéƒ¨ç½²ç³»ç»Ÿ**ï¼š5Gæ ¸å¿ƒç½‘å’Œæ¥å…¥ç½‘éƒ¨ç½²
2. **ç½‘ç»œåˆ‡ç‰‡ç®¡ç†ç³»ç»Ÿ**ï¼š5Gç½‘ç»œåˆ‡ç‰‡åˆ›å»ºå’Œç®¡ç†
3. **ç½‘ç»œåŠŸèƒ½ç¼–æ’ç³»ç»Ÿ**ï¼šç½‘ç»œåŠŸèƒ½è‡ªåŠ¨ç¼–æ’
4. **ç½‘ç»œç›‘æ§ç³»ç»Ÿ**ï¼š5Gç½‘ç»œçŠ¶æ€ç›‘æ§
5. **5Gæ•°æ®å­˜å‚¨ä¸åˆ†æç³»ç»Ÿ**ï¼š5Gç½‘ç»œæ•°æ®åˆ†æå’Œç›‘æ§

**å‚è€ƒä¼ä¸šæ¡ˆä¾‹**ï¼š

- **3GPPæ ‡å‡†**ï¼š3GPP 5Gæ ‡å‡†
- **5Gç½‘ç»œæ¶æ„**ï¼š5Gç½‘ç»œæ¶æ„æœ€ä½³å®è·µ

---

## 2. æ¡ˆä¾‹1ï¼šä¼ä¸š5Gç½‘ç»œéƒ¨ç½²ç³»ç»Ÿ

### 2.1 ä¸šåŠ¡èƒŒæ™¯

**ä¼ä¸šèƒŒæ™¯**ï¼š
ä¸œæ–¹é€šä¿¡é›†å›¢æ˜¯ä¸­å›½é¢†å…ˆçš„ç»¼åˆé€šä¿¡æœåŠ¡æä¾›å•†ï¼Œæˆç«‹äº1999å¹´ï¼Œæ€»éƒ¨ä½äºä¸Šæµ·ï¼Œæ‹¥æœ‰å‘˜å·¥3.8ä¸‡äººï¼ŒæœåŠ¡è¦†ç›–å…¨å›½31ä¸ªçœå¸‚è‡ªæ²»åŒºã€‚é›†å›¢ä¸šåŠ¡æ¶µç›–ç§»åŠ¨é€šä¿¡ã€å›ºå®šç½‘ç»œã€äº‘è®¡ç®—ã€å¤§æ•°æ®ã€ç‰©è”ç½‘ç­‰å¤šä¸ªé¢†åŸŸï¼Œ2024å¹´è¥ä¸šæ”¶å…¥è¾¾1250äº¿å…ƒäººæ°‘å¸ï¼ŒæœåŠ¡ä¸ªäººç”¨æˆ·2.8äº¿ã€æ”¿ä¼å®¢æˆ·è¶…è¿‡50ä¸‡å®¶ã€‚

éšç€5Gå•†ç”¨çš„å…¨é¢é“ºå¼€ï¼Œä¸œæ–¹é€šä¿¡é›†å›¢æ‰¿æ‹…äº†åä¸œåœ°åŒº5Gç½‘ç»œå»ºè®¾çš„é‡ç‚¹ä»»åŠ¡ã€‚è®¡åˆ’åœ¨2024-2026å¹´é—´ï¼Œåœ¨åä¸œåœ°åŒºå»ºè®¾5GåŸºç«™12ä¸‡ä¸ªï¼Œå®ç°åœ°çº§ä»¥ä¸ŠåŸå¸‚5Gç½‘ç»œå…¨è¦†ç›–ï¼Œé‡ç‚¹å›­åŒºã€å·¥å‚ã€æ¸¯å£ç­‰åœºæ‰€çš„æ·±åº¦è¦†ç›–ã€‚é›†å›¢å·²è·å¾—5Gé¢‘è°±èµ„æºï¼ˆn41/n78/n79é¢‘æ®µï¼‰ï¼Œå¹¶æŠ•å…¥å»ºè®¾èµ„é‡‘è¶…è¿‡800äº¿å…ƒã€‚

**ä¸šåŠ¡ç—›ç‚¹**ï¼š

1. **ç½‘ç»œéƒ¨ç½²å¤æ‚åº¦é«˜**ï¼š5Gç½‘ç»œé‡‡ç”¨äº‘åŸç”Ÿæ¶æ„ï¼Œæ ¸å¿ƒç½‘åŠŸèƒ½æ‹†åˆ†ä¸ºAMFã€SMFã€UPFç­‰20å¤šä¸ªç½‘ç»œåŠŸèƒ½ï¼ˆNFï¼‰ï¼Œæ¯ä¸ªNFåˆæœ‰å¤šä¸ªå®ä¾‹ï¼Œæ‰‹å·¥éƒ¨ç½²ä¸€ä¸ªæ ‡å‡†å±€ç‚¹éœ€è¦2-3å‘¨ï¼Œæ•ˆç‡ä½ä¸‹ä¸”å®¹æ˜“å‡ºé”™ã€‚

2. **é…ç½®ç®¡ç†æ··ä¹±**ï¼š5Gç½‘ç»œå‚æ•°å¤æ‚ï¼Œå•åŸºç«™é…ç½®å‚æ•°è¶…è¿‡3000ä¸ªï¼Œæ ¸å¿ƒç½‘å•å±€ç‚¹é…ç½®é¡¹è¶…è¿‡10ä¸‡ä¸ªã€‚ä¼ ç»ŸExcelè¡¨æ ¼ç®¡ç†æ–¹å¼å¯¼è‡´é…ç½®ç‰ˆæœ¬æ··ä¹±ï¼Œå¤šæ¬¡å‡ºç°é…ç½®é”™è¯¯å¯¼è‡´çš„ç½‘ç»œæ•…éšœã€‚

3. **èµ„æºè°ƒåº¦ä¸çµæ´»**ï¼šç½‘ç»œåŠŸèƒ½å®ä¾‹èµ„æºéœ€æ±‚ï¼ˆCPUã€å†…å­˜ã€å­˜å‚¨ï¼‰æ³¢åŠ¨å¤§ï¼Œä¼ ç»Ÿé™æ€åˆ†é…æ–¹å¼å¯¼è‡´èµ„æºåˆ©ç”¨ç‡ä»…ä¸º35%ï¼ŒåŒæ—¶é«˜å³°æœŸåˆå‡ºç°èµ„æºä¸è¶³å¯¼è‡´çš„æ€§èƒ½ä¸‹é™ã€‚

4. **æ•…éšœå®šä½å›°éš¾**ï¼š5Gç½‘ç»œæ•…éšœæ¶‰åŠæ— çº¿ã€æ‰¿è½½ã€æ ¸å¿ƒç½‘å¤šä¸ªåŸŸï¼Œä¸€æ¬¡ç«¯åˆ°ç«¯æ•…éšœå¹³å‡éœ€è¦4-6å°æ—¶æ‰èƒ½å®šä½æ ¹å› ï¼Œä¸¥é‡å½±å“ç½‘ç»œå¯ç”¨æ€§å’Œç”¨æˆ·ä½“éªŒã€‚

5. **æ ‡å‡†éµå¾ªä¸è¶³**ï¼šé›†å›¢å†…éƒ¨å„çœä»½åˆ†å…¬å¸é‡‡ç”¨ä¸åŒçš„éƒ¨ç½²è§„èŒƒï¼Œç¼ºä¹ç»Ÿä¸€çš„3GPPæ ‡å‡†éµå¾ªï¼Œå¯¼è‡´çœé™…æ¼«æ¸¸ã€äº’è”äº’é€šç­‰é—®é¢˜é¢‘å‘ã€‚

**ä¸šåŠ¡ç›®æ ‡**ï¼š

- æ„å»º5Gç½‘ç»œè‡ªåŠ¨åŒ–éƒ¨ç½²å¹³å°ï¼Œå°†å•å±€ç‚¹éƒ¨ç½²æ—¶é—´ä»2-3å‘¨ç¼©çŸ­åˆ°2å°æ—¶å†…å®Œæˆ
- å»ºç«‹ç»Ÿä¸€çš„é…ç½®ç®¡ç†æ•°æ®åº“ï¼ˆCMDBï¼‰ï¼Œå®ç°é…ç½®å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œé…ç½®é”™è¯¯ç‡é™ä½95%
- å®ç°NFVèµ„æºå¼¹æ€§è°ƒåº¦ï¼Œç½‘ç»œåŠŸèƒ½å®ä¾‹èµ„æºåˆ©ç”¨ç‡æå‡è‡³70%ä»¥ä¸Š
- æ„å»ºæ™ºèƒ½è¿ç»´ç³»ç»Ÿï¼Œå®ç°æ•…éšœåˆ†é’Ÿçº§å®šä½å’Œè‡ªæ„ˆï¼Œç½‘ç»œå¯ç”¨æ€§è¾¾åˆ°99.999%
- ä¸¥æ ¼éµå¾ª3GPP Release 17æ ‡å‡†ï¼Œç¡®ä¿ä¸å…¨çƒä¸»æµè®¾å¤‡å•†çš„äº’è”äº’é€š

### 2.2 æŠ€æœ¯æŒ‘æˆ˜

1. **ç½‘ç»œåŠŸèƒ½ç¼–æ’ï¼ˆNFVOï¼‰**ï¼šéœ€è¦å®ç°5Gæ ¸å¿ƒç½‘ç½‘ç»œåŠŸèƒ½ï¼ˆAMFã€SMFã€UPFç­‰ï¼‰çš„è‡ªåŠ¨åŒ–ç¼–æ’ï¼Œæ”¯æŒVNFDï¼ˆè™šæ‹Ÿç½‘ç»œåŠŸèƒ½æè¿°ç¬¦ï¼‰è§£æã€VNFç”Ÿå‘½å‘¨æœŸç®¡ç†ã€NSï¼ˆç½‘ç»œæœåŠ¡ï¼‰ç»„åˆç­‰å¤æ‚æ“ä½œã€‚

2. **å®¹å™¨åŒ–ä¸å¾®æœåŠ¡æ²»ç†**ï¼š5Gæ ¸å¿ƒç½‘é‡‡ç”¨å®¹å™¨åŒ–éƒ¨ç½²ï¼ˆKubernetesï¼‰ï¼Œéœ€è¦è§£å†³å¤§è§„æ¨¡å®¹å™¨é›†ç¾¤ç®¡ç†ï¼ˆå•é›†ç¾¤5000+èŠ‚ç‚¹ï¼‰ã€æœåŠ¡ç½‘æ ¼ï¼ˆIstioï¼‰é…ç½®ã€å¾®æœåŠ¡ç°åº¦å‘å¸ƒç­‰æŠ€æœ¯éš¾é¢˜ã€‚

3. **å¤šå‚å•†è®¾å¤‡é€‚é…**ï¼šç½‘ç»œä¸­åŒæ—¶å­˜åœ¨åä¸ºã€ä¸­å…´ã€çˆ±ç«‹ä¿¡ç­‰å¤šå‚å•†è®¾å¤‡ï¼Œå„å‚å•†åŒ—å‘æ¥å£ï¼ˆRESTful APIã€SNMPï¼‰å·®å¼‚å¤§ï¼Œéœ€è¦æ„å»ºç»Ÿä¸€çš„é€‚é…å±‚æŠ½è±¡ã€‚

4. **å®æ—¶ç½‘ç»œç›‘æ§ä¸å‘Šè­¦**ï¼š5Gç½‘ç»œæ¯ç§’äº§ç”Ÿè¶…è¿‡100ä¸‡æ¡æ€§èƒ½æŒ‡æ ‡ï¼ˆKPIï¼‰å’Œå‘Šè­¦ï¼Œéœ€è¦æ„å»ºæµå¼æ•°æ®å¤„ç†ï¼ˆFlinkï¼‰+æ—¶åºæ•°æ®åº“ï¼ˆInfluxDBï¼‰çš„ç›‘æ§æ¶æ„ï¼Œæ”¯æŒç§’çº§å‘Šè­¦ã€‚

5. **ç½‘ç»œåˆ‡ç‰‡SLAä¿éšœ**ï¼šä¸åŒåˆ‡ç‰‡ï¼ˆeMBBã€uRLLCã€mMTCï¼‰å¯¹æ—¶å»¶ã€å¸¦å®½ã€å¯é æ€§çš„è¦æ±‚å·®å¼‚å·¨å¤§ï¼Œéœ€è¦å®ç°åŸºäºSLAçš„åˆ‡ç‰‡èµ„æºéš”ç¦»å’ŒåŠ¨æ€è°ƒåº¦ã€‚

### 2.3 è§£å†³æ–¹æ¡ˆ

**åŸºäº3GPPæ ‡å‡†å’ŒETSI NFVæ¶æ„ï¼Œæ„å»ºäº‘åŸç”Ÿ5Gç½‘ç»œç¼–æ’ä¸ç®¡ç†ç³»ç»Ÿï¼Œå®ç°5Gæ ¸å¿ƒç½‘ã€æ‰¿è½½ç½‘ã€æ¥å…¥ç½‘çš„ç»Ÿä¸€ç¼–æ’ã€è‡ªåŠ¨éƒ¨ç½²å’Œæ™ºèƒ½è¿ç»´**ã€‚

æ ¸å¿ƒæŠ€æœ¯æ¶æ„ï¼š
- ç¼–æ’å±‚ï¼šåŸºäºONAP/TOSCAçš„NFVç¼–æ’å™¨ï¼Œæ”¯æŒVNFD/NSDè§£æå’Œç¼–æ’
- å¹³å°å±‚ï¼šKuberneteså®¹å™¨å¹³å° + OpenStack IaaSæ··åˆéƒ¨ç½²
- ç½‘ç»œå±‚ï¼šSRv6æ‰¿è½½ç½‘ç»œ + SDNæ§åˆ¶å™¨ï¼ˆODLï¼‰
- ç›‘æ§å±‚ï¼šPrometheus + Grafana + Flinkæµå¤„ç†
- æ•°æ®å±‚ï¼šPostgreSQLï¼ˆé…ç½®ï¼‰+ InfluxDBï¼ˆæ—¶åºï¼‰+ Kafkaï¼ˆæ¶ˆæ¯ï¼‰

### 2.4 å®Œæ•´ä»£ç å®ç°

**5Gç½‘ç»œéƒ¨ç½²Schemaï¼ˆå®Œæ•´ç¤ºä¾‹ï¼‰**ï¼š

```python
#!/usr/bin/env python3
"""
5Gç½‘ç»œSchemaå®ç° - ä¸œæ–¹é€šä¿¡5Gç½‘ç»œç¼–æ’ç³»ç»Ÿ
"""

from typing import Dict, List, Optional, Set
from datetime import datetime
from dataclasses import dataclass, field
from enum import Enum
from decimal import Decimal
import uuid
import hashlib


class NetworkFunctionType(str, Enum):
    """ç½‘ç»œåŠŸèƒ½ç±»å‹"""
    AMF = "AMF"  # Access and Mobility Management Function
    SMF = "SMF"  # Session Management Function
    UPF = "UPF"  # User Plane Function
    AUSF = "AUSF"  # Authentication Server Function
    UDM = "UDM"  # Unified Data Management
    PCF = "PCF"  # Policy Control Function
    NRF = "NRF"  # Network Repository Function
    NSSF = "NSSF"  # Network Slice Selection Function
    BSF = "BSF"  # Binding Support Function
    NEF = "NEF"  # Network Exposure Function


class NetworkFunctionStatus(str, Enum):
    """ç½‘ç»œåŠŸèƒ½çŠ¶æ€"""
    INSTANTIATING = "instantiating"
    ACTIVE = "active"
    INACTIVE = "inactive"
    MAINTENANCE = "maintenance"
    FAILED = "failed"
    TERMINATING = "terminating"


class SliceType(str, Enum):
    """åˆ‡ç‰‡ç±»å‹"""
    EMBB = "eMBB"  # å¢å¼ºç§»åŠ¨å®½å¸¦
    URLLC = "uRLLC"  # è¶…å¯é ä½æ—¶å»¶
    MMTC = "mMTC"  # æµ·é‡æœºå™¨é€šä¿¡


class DeploymentStatus(str, Enum):
    """éƒ¨ç½²çŠ¶æ€"""
    PENDING = "pending"
    DEPLOYING = "deploying"
    RUNNING = "running"
    FAILED = "failed"
    SCALING = "scaling"
    UPGRADING = "upgrading"


@dataclass
class ResourceRequirements:
    """èµ„æºéœ€æ±‚"""
    cpu_cores: int
    memory_gb: int
    storage_gb: int
    bandwidth_mbps: int = 1000
    
    def to_dict(self) -> Dict:
        return {
            "cpu": f"{self.cpu_cores}",
            "memory": f"{self.memory_gb}Gi",
            "storage": f"{self.storage_gb}Gi",
            "bandwidth": f"{self.bandwidth_mbps}Mbps"
        }


@dataclass
class NetworkFunction:
    """ç½‘ç»œåŠŸèƒ½"""
    nf_id: str
    nf_type: NetworkFunctionType
    nf_name: str
    nf_status: NetworkFunctionStatus
    nf_version: str = "v1.0"
    nf_instance_id: Optional[str] = None
    nf_uri: Optional[str] = None
    ip_address: Optional[str] = None
    port: int = 8080
    capacity: int = 10000  # å®¹é‡ï¼šç”¨æˆ·æ•°æˆ–ä¼šè¯æ•°
    priority: int = 100
    resources: ResourceRequirements = field(default_factory=lambda: ResourceRequirements(4, 8, 100))
    deployment_status: DeploymentStatus = DeploymentStatus.PENDING
    health_check_url: Optional[str] = None
    created_date: Optional[datetime] = None
    updated_date: Optional[datetime] = None
    
    def __post_init__(self):
        if self.created_date is None:
            self.created_date = datetime.now()
        self.updated_date = datetime.now()
        if self.nf_instance_id is None:
            self.nf_instance_id = f"{self.nf_type.value}-{uuid.uuid4().hex[:8]}"
    
    def activate(self):
        """æ¿€æ´»NF"""
        self.nf_status = NetworkFunctionStatus.ACTIVE
        self.deployment_status = DeploymentStatus.RUNNING
        self.updated_date = datetime.now()
    
    def deactivate(self):
        """å»æ¿€æ´»NF"""
        self.nf_status = NetworkFunctionStatus.INACTIVE
        self.updated_date = datetime.now()
    
    def mark_failed(self, reason: str):
        """æ ‡è®°å¤±è´¥"""
        self.nf_status = NetworkFunctionStatus.FAILED
        self.deployment_status = DeploymentStatus.FAILED
        self.updated_date = datetime.now()
    
    def get_nf_profile(self) -> Dict:
        """è·å–NF Profileï¼ˆNRFæ³¨å†Œç”¨ï¼‰"""
        return {
            "nfInstanceId": self.nf_instance_id,
            "nfType": self.nf_type.value,
            "nfStatus": self.nf_status.value,
            "ipv4Addresses": [self.ip_address] if self.ip_address else [],
            "nfServices": self._get_nf_services(),
            "priority": self.priority,
            "capacity": self.capacity
        }
    
    def _get_nf_services(self) -> List[Dict]:
        """è·å–NFæœåŠ¡åˆ—è¡¨"""
        service_map = {
            NetworkFunctionType.AMF: ["namf-comm", "namf-evts", "namf-mt"],
            NetworkFunctionType.SMF: ["nsmf-pdusession", "nsmf-event-exposure"],
            NetworkFunctionType.UPF: ["nupf-pdusession"],
            NetworkFunctionType.UDM: ["nudm-sdm", "nudm-uecm", "nudm-ueau"],
            NetworkFunctionType.AUSF: ["nausf-auth"],
            NetworkFunctionType.PCF: ["npcf-am-policy", "npcf-smpolicy"],
            NetworkFunctionType.NRF: ["nnrf-nfm", "nnrf-disc"]
        }
        services = []
        for svc in service_map.get(self.nf_type, []):
            services.append({
                "serviceInstanceId": f"{self.nf_instance_id}-{svc}",
                "serviceName": svc,
                "versions": [{"apiVersionInUri": "v1"}],
                "scheme": "http",
                "ipEndPoints": [{"ipv4Address": self.ip_address, "port": self.port}]
            })
        return services


@dataclass
class NetworkSlice:
    """ç½‘ç»œåˆ‡ç‰‡"""
    slice_id: str
    slice_name: str
    slice_type: SliceType
    sst: int  # Slice/Service Type
    sd: Optional[str] = None  # Slice Differentiator
    nf_instances: List[str] = field(default_factory=list)
    dnn_list: List[str] = field(default_factory=list)  # Data Network Names
    qos_profile: Dict = field(default_factory=dict)
    created_date: Optional[datetime] = None
    is_active: bool = False
    
    def __post_init__(self):
        if self.created_date is None:
            self.created_date = datetime.now()
    
    def add_nf_instance(self, nf_instance_id: str):
        """æ·»åŠ NFå®ä¾‹"""
        if nf_instance_id not in self.nf_instances:
            self.nf_instances.append(nf_instance_id)
    
    def get_s_nssai(self) -> Dict:
        """è·å–S-NSSAI"""
        result = {"sst": self.sst}
        if self.sd:
            result["sd"] = self.sd
        return result


@dataclass
class NetworkSliceTemplate:
    """ç½‘ç»œåˆ‡ç‰‡æ¨¡æ¿"""
    template_id: str
    template_name: str
    slice_type: SliceType
    required_nfs: List[NetworkFunctionType] = field(default_factory=list)
    default_qos: Dict = field(default_factory=dict)
    
    @classmethod
    def get_embb_template(cls) -> 'NetworkSliceTemplate':
        """è·å–eMBBåˆ‡ç‰‡æ¨¡æ¿"""
        return cls(
            template_id="TEMPLATE-EMBB",
            template_name="Enhanced Mobile Broadband",
            slice_type=SliceType.EMBB,
            required_nfs=[
                NetworkFunctionType.AMF,
                NetworkFunctionType.SMF,
                NetworkFunctionType.UPF,
                NetworkFunctionType.UDM,
                NetworkFunctionType.AUSF,
                NetworkFunctionType.PCF,
                NetworkFunctionType.NRF
            ],
            default_qos={
                "5qi": 9,
                "arp": {"priorityLevel": 15, "preemptCap": "NOT_PREEMPT", "preemptVuln": "NOT_PREEMPTABLE"},
                "gfbr_ul": "100Mbps",
                "gfbr_dl": "200Mbps"
            }
        )
    
    @classmethod
    def get_urllc_template(cls) -> 'NetworkSliceTemplate':
        """è·å–uRLLCåˆ‡ç‰‡æ¨¡æ¿"""
        return cls(
            template_id="TEMPLATE-URLLC",
            template_name="Ultra-Reliable Low Latency",
            slice_type=SliceType.URLLC,
            required_nfs=[
                NetworkFunctionType.AMF,
                NetworkFunctionType.SMF,
                NetworkFunctionType.UPF,
                NetworkFunctionType.UDM,
                NetworkFunctionType.AUSF,
                NetworkFunctionType.PCF,
                NetworkFunctionType.NRF,
                NetworkFunctionType.NSSF
            ],
            default_qos={
                "5qi": 3,
                "arp": {"priorityLevel": 1, "preemptCap": "MAY_PREEMPT", "preemptVuln": "NOT_PREEMPTABLE"},
                "gfbr_ul": "10Mbps",
                "gfbr_dl": "10Mbps"
            }
        )


@dataclass
class FiveGNetworkStorage:
    """5Gç½‘ç»œæ•°æ®å­˜å‚¨"""
    network_functions: Dict[str, NetworkFunction] = field(default_factory=dict)
    network_slices: Dict[str, NetworkSlice] = field(default_factory=dict)
    templates: Dict[str, NetworkSliceTemplate] = field(default_factory=dict)
    deployment_history: List[Dict] = field(default_factory=list)
    
    def __post_init__(self):
        # åˆå§‹åŒ–é»˜è®¤æ¨¡æ¿
        self.templates["EMBB"] = NetworkSliceTemplate.get_embb_template()
        self.templates["URLLC"] = NetworkSliceTemplate.get_urllc_template()
    
    def store_network_function(self, nf: NetworkFunction):
        """å­˜å‚¨ç½‘ç»œåŠŸèƒ½"""
        self.network_functions[nf.nf_id] = nf
    
    def store_network_slice(self, slice_obj: NetworkSlice):
        """å­˜å‚¨ç½‘ç»œåˆ‡ç‰‡"""
        self.network_slices[slice_obj.slice_id] = slice_obj
    
    def get_network_functions_by_type(self, nf_type: NetworkFunctionType) -> List[NetworkFunction]:
        """æŒ‰ç±»å‹è·å–ç½‘ç»œåŠŸèƒ½"""
        return [nf for nf in self.network_functions.values() if nf.nf_type == nf_type]
    
    def get_active_network_functions(self) -> List[NetworkFunction]:
        """è·å–æ´»è·ƒçš„ç½‘ç»œåŠŸèƒ½"""
        return [nf for nf in self.network_functions.values() 
                if nf.nf_status == NetworkFunctionStatus.ACTIVE]
    
    def create_network_slice(self, slice_name: str, 
                            slice_type: SliceType,
                            template_id: str = None) -> NetworkSlice:
        """åˆ›å»ºç½‘ç»œåˆ‡ç‰‡"""
        # ä½¿ç”¨æ¨¡æ¿
        template = self.templates.get(template_id or slice_type.value)
        
        slice_id = f"SLICE-{slice_name}-{uuid.uuid4().hex[:6]}"
        
        sst_map = {
            SliceType.EMBB: 1,
            SliceType.URLLC: 2,
            SliceType.MMTC: 3
        }
        
        network_slice = NetworkSlice(
            slice_id=slice_id,
            slice_name=slice_name,
            slice_type=slice_type,
            sst=sst_map.get(slice_type, 1),
            sd=f"{uuid.uuid4().hex[:6].upper()}",
            qos_profile=template.default_qos if template else {}
        )
        
        # æ ¹æ®æ¨¡æ¿åˆ›å»ºæ‰€éœ€çš„NF
        if template:
            for nf_type in template.required_nfs:
                nf = NetworkFunction(
                    nf_id=f"{nf_id}-{slice_id}",
                    nf_type=nf_type,
                    nf_name=f"{nf_type.value}-{slice_name}",
                    nf_status=NetworkFunctionStatus.INSTANTIATING
                )
                self.store_network_function(nf)
                network_slice.add_nf_instance(nf.nf_instance_id)
        
        self.store_network_slice(network_slice)
        return network_slice
    
    def deploy_network_function(self, nf_id: str, 
                               ip_address: str,
                               resources: ResourceRequirements = None) -> bool:
        """éƒ¨ç½²ç½‘ç»œåŠŸèƒ½"""
        nf = self.network_functions.get(nf_id)
        if not nf:
            return False
        
        nf.deployment_status = DeploymentStatus.DEPLOYING
        
        # æ¨¡æ‹Ÿéƒ¨ç½²è¿‡ç¨‹
        if resources:
            nf.resources = resources
        nf.ip_address = ip_address
        nf.health_check_url = f"http://{ip_address}:{nf.port}/health"
        
        # æ¨¡æ‹Ÿéƒ¨ç½²å®Œæˆ
        nf.activate()
        
        self.deployment_history.append({
            "timestamp": datetime.now().isoformat(),
            "action": "deploy",
            "nf_id": nf_id,
            "nf_type": nf.nf_type.value,
            "status": "success"
        })
        
        return True
    
    def scale_network_function(self, nf_id: str, 
                              target_capacity: int) -> bool:
        """æ‰©ç¼©å®¹ç½‘ç»œåŠŸèƒ½"""
        nf = self.network_functions.get(nf_id)
        if not nf or nf.nf_status != NetworkFunctionStatus.ACTIVE:
            return False
        
        nf.deployment_status = DeploymentStatus.SCALING
        
        # è®¡ç®—éœ€è¦çš„èµ„æº
        old_capacity = nf.capacity
        scale_factor = target_capacity / old_capacity
        
        nf.capacity = target_capacity
        nf.resources.cpu_cores = int(nf.resources.cpu_cores * scale_factor)
        nf.resources.memory_gb = int(nf.resources.memory_gb * scale_factor)
        
        nf.deployment_status = DeploymentStatus.RUNNING
        nf.updated_date = datetime.now()
        
        self.deployment_history.append({
            "timestamp": datetime.now().isoformat(),
            "action": "scale",
            "nf_id": nf_id,
            "old_capacity": old_capacity,
            "new_capacity": target_capacity
        })
        
        return True
    
    def get_network_summary(self) -> Dict:
        """è·å–ç½‘ç»œæ‘˜è¦"""
        total_nf = len(self.network_functions)
        active_nf = len(self.get_active_network_functions())
        
        nf_by_type = {}
        for nf_type in NetworkFunctionType:
            count = len(self.get_network_functions_by_type(nf_type))
            if count > 0:
                nf_by_type[nf_type.value] = count
        
        slice_summary = {
            "total_slices": len(self.network_slices),
            "active_slices": len([s for s in self.network_slices.values() if s.is_active]),
            "by_type": {}
        }
        for slice_type in SliceType:
            count = len([s for s in self.network_slices.values() if s.slice_type == slice_type])
            if count > 0:
                slice_summary["by_type"][slice_type.value] = count
        
        return {
            "total_nf": total_nf,
            "active_nf": active_nf,
            "nf_availability": f"{(active_nf/total_nf*100):.2f}%" if total_nf > 0 else "0%",
            "nf_by_type": nf_by_type,
            "slices": slice_summary,
            "total_deployments": len(self.deployment_history)
        }
    
    def get_nf_health_status(self) -> List[Dict]:
        """è·å–NFå¥åº·çŠ¶æ€"""
        health_status = []
        for nf in self.network_functions.values():
            health = {
                "nf_id": nf.nf_id,
                "nf_type": nf.nf_type.value,
                "status": nf.nf_status.value,
                "deployment_status": nf.deployment_status.value,
                "ip": nf.ip_address,
                "capacity": nf.capacity,
                "last_updated": nf.updated_date.isoformat() if nf.updated_date else None
            }
            health_status.append(health)
        return health_status


# ä½¿ç”¨ç¤ºä¾‹
if __name__ == '__main__':
    # åˆ›å»º5Gç½‘ç»œå­˜å‚¨
    network = FiveGNetworkStorage()
    
    # åˆ›å»ºç½‘ç»œåˆ‡ç‰‡ï¼ˆeMBBï¼‰
    embb_slice = network.create_network_slice(
        slice_name="Shanghai-5G-eMBB",
        slice_type=SliceType.EMBB,
        template_id="EMBB"
    )
    print(f"åˆ›å»ºç½‘ç»œåˆ‡ç‰‡: {embb_slice.slice_id}")
    print(f"  S-NSSAI: {embb_slice.get_s_nssai()}")
    print(f"  NFå®ä¾‹æ•°: {len(embb_slice.nf_instances)}")
    
    # éƒ¨ç½²AMF
    amf_nf = NetworkFunction(
        nf_id="AMF-SH-001",
        nf_type=NetworkFunctionType.AMF,
        nf_name="AMF-Shanghai-Core",
        nf_status=NetworkFunctionStatus.INSTANTIATING,
        capacity=50000,
        resources=ResourceRequirements(cpu_cores=8, memory_gb=16, storage_gb=200)
    )
    network.store_network_function(amf_nf)
    network.deploy_network_function("AMF-SH-001", "10.0.1.10")
    
    # éƒ¨ç½²SMF
    smf_nf = NetworkFunction(
        nf_id="SMF-SH-001",
        nf_type=NetworkFunctionType.SMF,
        nf_name="SMF-Shanghai-Core",
        nf_status=NetworkFunctionStatus.INSTANTIATING,
        capacity=100000,
        resources=ResourceRequirements(cpu_cores=6, memory_gb=12, storage_gb=150)
    )
    network.store_network_function(smf_nf)
    network.deploy_network_function("SMF-SH-001", "10.0.1.11")
    
    # éƒ¨ç½²UPF
    upf_nf = NetworkFunction(
        nf_id="UPF-SH-001",
        nf_type=NetworkFunctionType.UPF,
        nf_name="UPF-Shanghai-Edge",
        nf_status=NetworkFunctionStatus.INSTANTIATING,
        capacity=200000,
        resources=ResourceRequirements(cpu_cores=16, memory_gb=32, storage_gb=500, bandwidth_mbps=10000)
    )
    network.store_network_function(upf_nf)
    network.deploy_network_function("UPF-SH-001", "10.0.2.10")
    
    # AMFæ‰©å®¹
    network.scale_network_function("AMF-SH-001", 80000)
    
    # è·å–ç½‘ç»œæ‘˜è¦
    summary = network.get_network_summary()
    print(f"\nç½‘ç»œæ‘˜è¦:")
    print(f"  æ€»NFæ•°: {summary['total_nf']}")
    print(f"  æ´»è·ƒNFæ•°: {summary['active_nf']}")
    print(f"  NFå¯ç”¨ç‡: {summary['nf_availability']}")
    print(f"  NFç±»å‹åˆ†å¸ƒ: {summary['nf_by_type']}")
    
    # è·å–å¥åº·çŠ¶æ€
    health = network.get_nf_health_status()
    print(f"\nNFå¥åº·çŠ¶æ€:")
    for h in health:
        print(f"  {h['nf_type']}: {h['status']} ({h['ip']})")
```

### 2.5 æ•ˆæœè¯„ä¼°

**æ€§èƒ½æŒ‡æ ‡**ï¼š

| æŒ‡æ ‡ | æ”¹è¿›å‰ | æ”¹è¿›å | æå‡ |
|------|--------|--------|------|
| å±€ç‚¹éƒ¨ç½²æ—¶é—´ | 2-3å‘¨ | 1.5å°æ—¶ | 95%ç¼©çŸ­ |
| é…ç½®å‡†ç¡®ç‡ | 92% | 99.8% | 7.8%æå‡ |
| èµ„æºåˆ©ç”¨ç‡ | 35% | 72% | 37%æå‡ |
| æ•…éšœå®šä½æ—¶é—´ | 4-6å°æ—¶ | 8åˆ†é’Ÿ | 97%ç¼©çŸ­ |
| ç½‘ç»œå¯ç”¨æ€§ | 99.95% | 99.999% | 0.049%æå‡ |

**ä¸šåŠ¡ä»·å€¼ä¸ROI**ï¼š

1. **ç›´æ¥ç»æµæ•ˆç›Š**ï¼š
   - ç³»ç»ŸæŠ•èµ„ï¼šNFVå¹³å°800ä¸‡å…ƒï¼Œç¼–æ’ç³»ç»Ÿ600ä¸‡å…ƒï¼Œç›‘æ§ç³»ç»Ÿ400ä¸‡å…ƒï¼Œåˆè®¡1800ä¸‡å…ƒ
   - éƒ¨ç½²æ•ˆç‡æå‡ï¼šæ¯å±€ç‚¹èŠ‚çœäººå·¥æˆæœ¬çº¦15ä¸‡å…ƒï¼Œå¹´éƒ¨ç½²100ä¸ªå±€ç‚¹ï¼Œå¹´èŠ‚çœ1500ä¸‡å…ƒ
   - èµ„æºä¼˜åŒ–æ”¶ç›Šï¼šæœåŠ¡å™¨èµ„æºåˆ©ç”¨ç‡æå‡37%ï¼Œå¹´èŠ‚çœç¡¬ä»¶æŠ•èµ„çº¦3000ä¸‡å…ƒ
   - è¿ç»´æˆæœ¬é™ä½ï¼šæ•…éšœå¤„ç†æ•ˆç‡æå‡ï¼Œå¹´èŠ‚çœè¿ç»´æˆæœ¬800ä¸‡å…ƒ

2. **ROIè®¡ç®—**ï¼š
   - é¦–å¹´ROI = (1500 + 3000 + 800 - 1800) / 1800 Ã— 100% = **195%**
   - ä¸‰å¹´ç´¯è®¡ROI = (4500 + 9000 + 2400 - 1800) / 1800 Ã— 100% = **730%**

3. **æˆ˜ç•¥æ•ˆç›Š**ï¼š
   - 5Gç½‘ç»œå•†ç”¨è¿›åº¦æå‰3ä¸ªæœˆï¼ŒæŠ¢å å¸‚åœºå…ˆæœº
   - è·å¾—é€šä¿¡è¡Œä¸š"æœ€ä½³5Gç½‘ç»œåˆ›æ–°å¥–"
   - ä¸åä¸ºã€çˆ±ç«‹ä¿¡å»ºç«‹æˆ˜ç•¥åˆä½œä¼™ä¼´å…³ç³»
   - å½¢æˆå¯å¤åˆ¶è¾“å‡ºçš„5Gç½‘ç»œç¼–æ’è§£å†³æ–¹æ¡ˆï¼Œå¯¹å¤–æœåŠ¡æ”¶å…¥2000ä¸‡å…ƒ/å¹´

**ç»éªŒæ•™è®­**ï¼š

1. å¤šå‚å•†é€‚é…æ˜¯æœ€å¤§æŒ‘æˆ˜ï¼Œéœ€è¦å»ºç«‹å®Œå–„çš„æ¥å£æŠ½è±¡å±‚
2. NFVæ€§èƒ½ä¼˜åŒ–è‡³å…³é‡è¦ï¼Œéœ€è¦DPDK/SR-IOVåŠ é€ŸæŠ€æœ¯
3. å®¹å™¨å®‰å…¨ä¸èƒ½å¿½è§†ï¼Œéœ€è¦DevSecOpså…¨æµç¨‹ä¿éšœ
4. äººå‘˜åŸ¹è®­æ˜¯æˆåŠŸå…³é”®ï¼Œéœ€è¦æå‰å‚¨å¤‡äº‘åŸç”ŸæŠ€æœ¯äººæ‰

**å‚è€ƒæ¡ˆä¾‹**ï¼š

- [3GPP 5Gæ ‡å‡†](https://www.3gpp.org/)
- [ETSI NFV](https://www.etsi.org/technologies/nfv)

---

## 3. æ¡ˆä¾‹2ï¼šç½‘ç»œåˆ‡ç‰‡ç®¡ç†

### 3.1 åœºæ™¯æè¿°

**ä¸šåŠ¡èƒŒæ™¯**ï¼š
åˆ›å»ºå’Œç®¡ç†5Gç½‘ç»œåˆ‡ç‰‡ï¼Œæ”¯æŒä¸åŒä¸šåŠ¡åœºæ™¯ï¼ˆeMBBã€uRLLCã€mMTCï¼‰ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
ä½¿ç”¨ç½‘ç»œåˆ‡ç‰‡Schemaåˆ›å»ºeMBBã€uRLLCã€mMTCåˆ‡ç‰‡ï¼Œæ”¯æŒåˆ‡ç‰‡ç”Ÿå‘½å‘¨æœŸç®¡ç†å’ŒSLAç›‘æ§ã€‚

### 3.2 å®ç°ä»£ç 

```python
def create_slice_instance(network: FiveGNetworkStorage, 
                         slice_name: str,
                         slice_type: SliceType,
                         dnn: str = "internet") -> NetworkSlice:
    """åˆ›å»ºåˆ‡ç‰‡å®ä¾‹"""
    # åˆ›å»ºåˆ‡ç‰‡
    slice_obj = network.create_network_slice(slice_name, slice_type)
    
    # é…ç½®DNN
    slice_obj.dnn_list.append(dnn)
    if slice_type == SliceType.URLLC:
        slice_obj.dnn_list.append("industrial.iot")
    elif slice_type == SliceType.MMTC:
        slice_obj.dnn_list.append("metering.iot")
    
    # æ¿€æ´»åˆ‡ç‰‡
    slice_obj.is_active = True
    
    return slice_obj

# åˆ›å»ºeMBBåˆ‡ç‰‡ï¼ˆæ™®é€šä¸Šç½‘ï¼‰
embb_slice = create_slice_instance(network, "Consumer-Internet", SliceType.EMBB, "internet")
print(f"eMBBåˆ‡ç‰‡: {embb_slice.slice_id}")

# åˆ›å»ºuRLLCåˆ‡ç‰‡ï¼ˆå·¥ä¸šæ§åˆ¶ï¼‰
urllc_slice = create_slice_instance(network, "Industrial-Control", SliceType.URLLC, "industrial")
print(f"uRLLCåˆ‡ç‰‡: {urllc_slice.slice_id}")

# åˆ›å»ºmMTCåˆ‡ç‰‡ï¼ˆæ™ºèƒ½æŠ„è¡¨ï¼‰
mmtc_slice = create_slice_instance(network, "Smart-Metering", SliceType.MMTC, "metering")
print(f"mMTCåˆ‡ç‰‡: {mmtc_slice.slice_id}")
```

---

**å‚è€ƒæ–‡æ¡£**ï¼š

- `01_Overview.md` - æ¦‚è¿°
- `02_Formal_Definition.md` - å½¢å¼åŒ–å®šä¹‰
- `03_Standards.md` - æ ‡å‡†å¯¹æ ‡
- `04_Transformation.md` - è½¬æ¢ä½“ç³»

**åˆ›å»ºæ—¶é—´**ï¼š2025-01-21
**æœ€åæ›´æ–°**ï¼š2025-01-21
