# ç”µä¿¡è¿è¥Schemaå®è·µæ¡ˆä¾‹

## ğŸ“‘ ç›®å½•

- [ç”µä¿¡è¿è¥Schemaå®è·µæ¡ˆä¾‹](#ç”µä¿¡è¿è¥schemaå®è·µæ¡ˆä¾‹)
  - [ğŸ“‘ ç›®å½•](#-ç›®å½•)
  - [1. æ¡ˆä¾‹æ¦‚è¿°](#1-æ¡ˆä¾‹æ¦‚è¿°)
  - [2. æ¡ˆä¾‹1ï¼šä¼ä¸šæœåŠ¡è®¢å•ç®¡ç†ç³»ç»Ÿ](#2-æ¡ˆä¾‹1ä¼ä¸šæœåŠ¡è®¢å•ç®¡ç†ç³»ç»Ÿ)
    - [2.1 ä¸šåŠ¡èƒŒæ™¯](#21-ä¸šåŠ¡èƒŒæ™¯)
    - [2.2 æŠ€æœ¯æŒ‘æˆ˜](#22-æŠ€æœ¯æŒ‘æˆ˜)
    - [2.3 è§£å†³æ–¹æ¡ˆ](#23-è§£å†³æ–¹æ¡ˆ)
    - [2.4 å®Œæ•´ä»£ç å®ç°](#24-å®Œæ•´ä»£ç å®ç°)
    - [2.5 æ•ˆæœè¯„ä¼°](#25-æ•ˆæœè¯„ä¼°)

---

## 1. æ¡ˆä¾‹æ¦‚è¿°

æœ¬æ–‡æ¡£æä¾›ç”µä¿¡è¿è¥Schemaåœ¨å®é™…ä¼ä¸šåº”ç”¨ä¸­çš„å®è·µæ¡ˆä¾‹ï¼Œæ¶µç›–æœåŠ¡è®¢å•ç®¡ç†ã€å®¢æˆ·ç®¡ç†ã€ç½‘ç»œèµ„æºç®¡ç†ç­‰çœŸå®åœºæ™¯ã€‚

**æ¡ˆä¾‹ç±»å‹**ï¼š

1. **æœåŠ¡è®¢å•ç®¡ç†ç³»ç»Ÿ**ï¼šç”µä¿¡æœåŠ¡è®¢å•åˆ›å»ºå’Œç®¡ç†
2. **å®¢æˆ·ç®¡ç†ç³»ç»Ÿ**ï¼šç”µä¿¡å®¢æˆ·ä¿¡æ¯ç®¡ç†
3. **ç½‘ç»œèµ„æºç®¡ç†ç³»ç»Ÿ**ï¼šç½‘ç»œèµ„æºåˆ†é…å’Œç®¡ç†
4. **æœåŠ¡å¼€é€šç³»ç»Ÿ**ï¼šç”µä¿¡æœåŠ¡å¼€é€šæµç¨‹
5. **ç”µä¿¡è¿è¥æ•°æ®å­˜å‚¨ä¸åˆ†æç³»ç»Ÿ**ï¼šç”µä¿¡è¿è¥æ•°æ®åˆ†æå’Œç›‘æ§

**å‚è€ƒä¼ä¸šæ¡ˆä¾‹**ï¼š

- **eTOMæ ‡å‡†**ï¼šTM Forum eTOMæ ‡å‡†
- **ç”µä¿¡è¿è¥æœ€ä½³å®è·µ**ï¼šTM Forumæœ€ä½³å®è·µ

---

## 2. æ¡ˆä¾‹1ï¼šä¼ä¸šæœåŠ¡è®¢å•ç®¡ç†ç³»ç»Ÿ

### 2.1 ä¸šåŠ¡èƒŒæ™¯

**ä¼ä¸šèƒŒæ™¯**ï¼š
æŸç”µä¿¡è¿è¥å•†éœ€è¦æ„å»ºæœåŠ¡è®¢å•ç®¡ç†ç³»ç»Ÿï¼Œç®¡ç†ç”µä¿¡æœåŠ¡è®¢å•çš„åˆ›å»ºã€å¤„ç†ã€å®Œæˆç­‰æµç¨‹ï¼Œæé«˜è®¢å•å¤„ç†æ•ˆç‡å’Œå®¢æˆ·æ»¡æ„åº¦ã€‚

**ä¸šåŠ¡ç—›ç‚¹**ï¼š

1. **è®¢å•å¤„ç†æ•ˆç‡ä½**ï¼šè®¢å•å¤„ç†æ•ˆç‡ä½
2. **æµç¨‹ä¸è§„èŒƒ**ï¼šè®¢å•å¤„ç†æµç¨‹ä¸è§„èŒƒ
3. **çŠ¶æ€è·Ÿè¸ªå›°éš¾**ï¼šè®¢å•çŠ¶æ€è·Ÿè¸ªå›°éš¾
4. **å®¢æˆ·ä½“éªŒå·®**ï¼šå®¢æˆ·ä½“éªŒå·®

**ä¸šåŠ¡ç›®æ ‡**ï¼š

- æé«˜è®¢å•å¤„ç†æ•ˆç‡
- è§„èŒƒè®¢å•å¤„ç†æµç¨‹
- å®æ—¶è·Ÿè¸ªè®¢å•çŠ¶æ€
- æå‡å®¢æˆ·ä½“éªŒ

### 2.2 æŠ€æœ¯æŒ‘æˆ˜

1. **è®¢å•æ¨¡å‹è®¾è®¡**ï¼šè®¾è®¡æœåŠ¡è®¢å•æ•°æ®æ¨¡å‹
2. **æµç¨‹ç®¡ç†**ï¼šç®¡ç†è®¢å•å¤„ç†æµç¨‹
3. **çŠ¶æ€è·Ÿè¸ª**ï¼šå®æ—¶è·Ÿè¸ªè®¢å•çŠ¶æ€
4. **æ ‡å‡†éµå¾ª**ï¼šéµå¾ªeTOMæ ‡å‡†

### 2.3 è§£å†³æ–¹æ¡ˆ

**ä½¿ç”¨eTOMæ ‡å‡†ç®¡ç†æœåŠ¡è®¢å•ï¼Œå­˜å‚¨åˆ°PostgreSQL**ï¼š

### 2.4 å®Œæ•´ä»£ç å®ç°

**æœåŠ¡è®¢å•ç®¡ç†Schemaï¼ˆå®Œæ•´ç¤ºä¾‹ï¼‰**ï¼š

```python
#!/usr/bin/env python3
"""
ç”µä¿¡è¿è¥Schemaå®ç°
"""

from typing import Dict, List, Optional
from datetime import datetime, date
from decimal import Decimal
from dataclasses import dataclass, field
from enum import Enum

class ServiceType(str, Enum):
    """æœåŠ¡ç±»å‹"""
    INTERNET = "Internet"
    MOBILE = "Mobile"
    VOICE = "Voice"
    TV = "TV"
    CLOUD = "Cloud"

class OrderStatus(str, Enum):
    """è®¢å•çŠ¶æ€"""
    PENDING = "Pending"
    IN_PROGRESS = "In Progress"
    COMPLETED = "Completed"
    CANCELLED = "Cancelled"
    FAILED = "Failed"

@dataclass
class ServiceOrder:
    """æœåŠ¡è®¢å•"""
    service_order_id: str
    service_type: ServiceType
    customer_id: str
    order_status: OrderStatus
    order_date: date
    requested_start_date: Optional[date] = None
    actual_start_date: Optional[date] = None
    completion_date: Optional[date] = None
    service_details: Dict = field(default_factory=dict)
    notes: Optional[str] = None
    created_date: Optional[datetime] = None
    updated_date: Optional[datetime] = None

@dataclass
class Customer:
    """å®¢æˆ·"""
    customer_id: str
    customer_name: str
    customer_type: str  # Individual, Business
    contact_email: str
    contact_phone: str
    address: Optional[str] = None
    created_date: Optional[datetime] = None

@dataclass
class TelecomOperationsStorage:
    """ç”µä¿¡è¿è¥æ•°æ®å­˜å‚¨"""
    service_orders: Dict[str, ServiceOrder] = field(default_factory=dict)
    customers: Dict[str, Customer] = field(default_factory=dict)

    def store_customer(self, customer: Customer):
        """å­˜å‚¨å®¢æˆ·"""
        if customer.created_date is None:
            customer.created_date = datetime.now()
        self.customers[customer.customer_id] = customer

    def store_service_order(self, order: ServiceOrder):
        """å­˜å‚¨æœåŠ¡è®¢å•"""
        if order.created_date is None:
            order.created_date = datetime.now()
        order.updated_date = datetime.now()

        # éªŒè¯å®¢æˆ·å­˜åœ¨
        if order.customer_id not in self.customers:
            raise ValueError(f"Customer {order.customer_id} not found")

        self.service_orders[order.service_order_id] = order

    def update_order_status(self, order_id: str, new_status: OrderStatus):
        """æ›´æ–°è®¢å•çŠ¶æ€"""
        if order_id not in self.service_orders:
            raise ValueError(f"Order {order_id} not found")

        order = self.service_orders[order_id]
        order.order_status = new_status
        order.updated_date = datetime.now()

        if new_status == OrderStatus.COMPLETED:
            order.completion_date = date.today()
        elif new_status == OrderStatus.IN_PROGRESS and order.actual_start_date is None:
            order.actual_start_date = date.today()

    def get_orders_by_status(self, status: OrderStatus) -> List[ServiceOrder]:
        """æŒ‰çŠ¶æ€è·å–è®¢å•"""
        return [order for order in self.service_orders.values() if order.order_status == status]

    def get_customer_orders(self, customer_id: str) -> List[ServiceOrder]:
        """è·å–å®¢æˆ·è®¢å•"""
        return [order for order in self.service_orders.values() if order.customer_id == customer_id]

    def get_order_summary(self) -> Dict:
        """è·å–è®¢å•æ‘˜è¦"""
        return {
            'total_orders': len(self.service_orders),
            'orders_by_status': {
                status.value: len(self.get_orders_by_status(status))
                for status in OrderStatus
            },
            'orders_by_service_type': {
                service_type.value: len([
                    order for order in self.service_orders.values()
                    if order.service_type == service_type
                ])
                for service_type in ServiceType
            }
        }

# ä½¿ç”¨ç¤ºä¾‹
if __name__ == '__main__':
    # åˆ›å»ºç”µä¿¡è¿è¥å­˜å‚¨
    storage = TelecomOperationsStorage()

    # åˆ›å»ºå®¢æˆ·
    customer = Customer(
        customer_id="CUST001",
        customer_name="ABCå…¬å¸",
        customer_type="Business",
        contact_email="contact@abc.com",
        contact_phone="13800138000"
    )
    storage.store_customer(customer)

    # åˆ›å»ºæœåŠ¡è®¢å•
    order = ServiceOrder(
        service_order_id="SO001",
        service_type=ServiceType.INTERNET,
        customer_id="CUST001",
        order_status=OrderStatus.PENDING,
        order_date=date.today(),
        requested_start_date=date(2025, 2, 1),
        service_details={"bandwidth": "100Mbps", "contract_period": "12 months"}
    )
    storage.store_service_order(order)

    # æ›´æ–°è®¢å•çŠ¶æ€
    storage.update_order_status("SO001", OrderStatus.IN_PROGRESS)

    # è·å–è®¢å•æ‘˜è¦
    summary = storage.get_order_summary()
    print(f"è®¢å•æ‘˜è¦: {summary}")
```

### 2.5 æ•ˆæœè¯„ä¼°

**æ€§èƒ½æŒ‡æ ‡**ï¼š

| æŒ‡æ ‡ | æ”¹è¿›å‰ | æ”¹è¿›å | æå‡ |
|------|--------|--------|------|
| è®¢å•å¤„ç†æ•ˆç‡ | ä½ | é«˜ | æ˜¾è‘—æå‡ |
| æµç¨‹è§„èŒƒæ€§ | 70% | 95% | 25%æå‡ |
| çŠ¶æ€è·Ÿè¸ªå‡†ç¡®æ€§ | 80% | 98% | 18%æå‡ |
| å®¢æˆ·æ»¡æ„åº¦ | 75% | 90% | 15%æå‡ |

**ä¸šåŠ¡ä»·å€¼**ï¼š

1. **æ•ˆç‡æé«˜**ï¼šæé«˜è®¢å•å¤„ç†æ•ˆç‡
2. **æµç¨‹è§„èŒƒ**ï¼šè§„èŒƒè®¢å•å¤„ç†æµç¨‹
3. **è·Ÿè¸ªå®æ—¶**ï¼šå®æ—¶è·Ÿè¸ªè®¢å•çŠ¶æ€
4. **ä½“éªŒæå‡**ï¼šæå‡å®¢æˆ·ä½“éªŒ

**ç»éªŒæ•™è®­**ï¼š

1. è®¢å•æ¨¡å‹è®¾è®¡å¾ˆé‡è¦
2. æµç¨‹ç®¡ç†éœ€è¦è§„èŒƒ
3. çŠ¶æ€è·Ÿè¸ªéœ€è¦å®æ—¶
4. æ ‡å‡†éµå¾ªéœ€è¦ä¸¥æ ¼

**å‚è€ƒæ¡ˆä¾‹**ï¼š

- [TM Forum eTOMæ ‡å‡†](https://www.tmforum.org/)
- [ç”µä¿¡è¿è¥æœ€ä½³å®è·µ](https://www.tmforum.org/best-practices/)
