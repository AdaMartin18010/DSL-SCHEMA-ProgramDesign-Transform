# æµ·è¿ä¸èˆªè¿åŠ¨æ€è¡Œä¸ºåˆ†æ

## ğŸ“‘ ç›®å½•

- [æµ·è¿ä¸èˆªè¿åŠ¨æ€è¡Œä¸ºåˆ†æ](#æµ·è¿ä¸èˆªè¿åŠ¨æ€è¡Œä¸ºåˆ†æ)
  - [ğŸ“‘ ç›®å½•](#-ç›®å½•)
  - [1. æ¦‚è¿°](#1-æ¦‚è¿°)
    - [å½¢å¼åŒ–å®šä¹‰](#å½¢å¼åŒ–å®šä¹‰)
    - [æ ¸å¿ƒç‰¹å¾](#æ ¸å¿ƒç‰¹å¾)
  - [2. çŠ¶æ€æœºå½¢å¼åŒ–](#2-çŠ¶æ€æœºå½¢å¼åŒ–)
    - [2.1 èˆ¹èˆ¶èˆªè¡ŒçŠ¶æ€æœº](#21-èˆ¹èˆ¶èˆªè¡ŒçŠ¶æ€æœº)
    - [2.2 è´§ç‰©çŠ¶æ€æœº](#22-è´§ç‰©çŠ¶æ€æœº)
    - [2.3 èˆªæ¬¡çŠ¶æ€æœº](#23-èˆªæ¬¡çŠ¶æ€æœº)
  - [3. æ—¶åºå›¾å½¢å¼åŒ–](#3-æ—¶åºå›¾å½¢å¼åŒ–)
    - [3.1 æ¸¯å£æŒ‚é æµç¨‹](#31-æ¸¯å£æŒ‚é æµç¨‹)
    - [3.2 é›†è£…ç®±ç­è½®è¿è¾“æµç¨‹](#32-é›†è£…ç®±ç­è½®è¿è¾“æµç¨‹)
    - [3.3 èˆ¹èˆ¶ä»£ç†ä¸šåŠ¡æµç¨‹](#33-èˆ¹èˆ¶ä»£ç†ä¸šåŠ¡æµç¨‹)
  - [4. æ•°æ®æµåˆ†æ](#4-æ•°æ®æµåˆ†æ)
    - [4.1 AISæ•°æ®æµ](#41-aisæ•°æ®æµ)
    - [4.2 æ¸¯å£EDIæ•°æ®æµ](#42-æ¸¯å£ediæ•°æ®æµ)
  - [5. å®æ—¶æ€§åˆ†æ](#5-å®æ—¶æ€§åˆ†æ)
    - [5.1 AISæŠ¥å‘Šé¢‘ç‡](#51-aisæŠ¥å‘Šé¢‘ç‡)
    - [5.2 æ¸¯å£ä½œä¸šæ•ˆç‡SLA](#52-æ¸¯å£ä½œä¸šæ•ˆç‡sla)
  - [6. å¼‚å¸¸å¤„ç†æœºåˆ¶](#6-å¼‚å¸¸å¤„ç†æœºåˆ¶)
    - [6.1 æ¶åŠ£å¤©æ°”ç»•èˆª](#61-æ¶åŠ£å¤©æ°”ç»•èˆª)
    - [6.2 æ¸¯å£æ‹¥å µå¤„ç†](#62-æ¸¯å£æ‹¥å µå¤„ç†)
    - [6.3 è®¾å¤‡æ•…éšœå¤„ç†](#63-è®¾å¤‡æ•…éšœå¤„ç†)
  - [é™„å½•](#é™„å½•)
    - [A. çŠ¶æ€æœºDSLå®Œæ•´å®šä¹‰](#a-çŠ¶æ€æœºdslå®Œæ•´å®šä¹‰)
    - [B. å¼‚å¸¸å¤„ç†å†³ç­–æ ‘](#b-å¼‚å¸¸å¤„ç†å†³ç­–æ ‘)
    - [C. ç›¸å…³æ ‡å‡†å‚è€ƒ](#c-ç›¸å…³æ ‡å‡†å‚è€ƒ)

---

## 1. æ¦‚è¿°

**æµ·è¿ä¸èˆªè¿åŠ¨æ€è¡Œä¸ºåˆ†æ**æ˜¯å¯¹æµ·è¿ç³»ç»Ÿä¸­å„ç§å®ä½“ï¼ˆèˆ¹èˆ¶ã€è´§ç‰©ã€èˆªæ¬¡ï¼‰çš„çŠ¶æ€è½¬æ¢ã€äº¤äº’æµç¨‹ã€æ•°æ®æµè½¬å’Œå¼‚å¸¸å¤„ç†çš„ç³»ç»Ÿæ€§å½¢å¼åŒ–æè¿°ã€‚

### å½¢å¼åŒ–å®šä¹‰

```text
Dynamic_Action_Analysis = (State_Machine_Formalization
                          âŠ• Sequence_Diagram_Formalization
                          âŠ• Data_Flow_Analysis
                          âŠ• Real_Time_Analysis
                          âŠ• Exception_Handling)
```

### æ ¸å¿ƒç‰¹å¾

1. **çŠ¶æ€å®Œæ•´æ€§**ï¼šæ‰€æœ‰çŠ¶æ€è½¬æ¢éƒ½æœ‰æ˜ç¡®çš„è§¦å‘æ¡ä»¶å’ŒåŠ¨ä½œ
2. **æµç¨‹å¯è¿½æº¯**ï¼šæ¯ä¸ªä¸šåŠ¡æµç¨‹éƒ½æœ‰å®Œæ•´çš„æ—¶åºè®°å½•
3. **æ•°æ®å®æ—¶æ€§**ï¼šå…³é”®æ•°æ®æµæ»¡è¶³å®æ—¶æ€§è¦æ±‚
4. **å¼‚å¸¸å¯æ¢å¤**ï¼šå¼‚å¸¸å¤„ç†æœºåˆ¶ç¡®ä¿ç³»ç»Ÿé²æ£’æ€§

---

## 2. çŠ¶æ€æœºå½¢å¼åŒ–

### 2.1 èˆ¹èˆ¶èˆªè¡ŒçŠ¶æ€æœº

**å½¢å¼åŒ–å®šä¹‰**ï¼š

```text
Vessel_Navigation_SM = (States, Events, Transitions, Initial_State, Final_States)

Where:
  States = {ANCHORED, UNDERWAY, BERTHED, OPERATING, DEPARTING}
  Events = {anchor_lifted, arrival_notice, berth_assigned,
            cargo_ops_complete, departure_clearance}
  Initial_State = ANCHORED
  Final_States = {UNDERWAY}
```

**çŠ¶æ€è½¬æ¢è¡¨**ï¼š

| å½“å‰çŠ¶æ€ | è§¦å‘äº‹ä»¶ | ä¸‹ä¸€çŠ¶æ€ | æ‰§è¡ŒåŠ¨ä½œ |
|---------|---------|---------|---------|
| é”šæ³Š (ANCHORED) | èµ·é”š | åœ¨èˆª (UNDERWAY) | æ›´æ–°èˆªè¡ŒçŠ¶æ€ï¼ŒæŠ¥å‘Šæ¸¯å£VTS |
| åœ¨èˆª (UNDERWAY) | æŠµæ¸¯é€šçŸ¥ | é”šæ³Š (ANCHORED) | æŠ›é”šç­‰å¾…æ³Šä½ |
| é”šæ³Š (ANCHORED) | åˆ†é…æ³Šä½ | é æ³Š (BERTHED) | å‡†å¤‡é æ³Šä½œä¸š |
| é æ³Š (BERTHED) | å¼€å§‹ä½œä¸š | ä½œä¸šä¸­ (OPERATING) | å¯åŠ¨è´§ç‰©æ“ä½œ |
| ä½œä¸šä¸­ (OPERATING) | ä½œä¸šå®Œæˆ | ç¦»æ³Š (DEPARTING) | å‡†å¤‡ç¦»æ¸¯æ‰‹ç»­ |
| ç¦»æ³Š (DEPARTING) | ç¦»æ¸¯è®¸å¯ | åœ¨èˆª (UNDERWAY) | ç¦»æ¸¯æŠ¥å‘Šï¼Œæ›´æ–°AISçŠ¶æ€ |

**MermaidçŠ¶æ€å›¾**ï¼š

```mermaid
stateDiagram-v2
    [*] --> é”šæ³Š : èˆ¹èˆ¶åˆ°è¾¾é”šåœ°

    é”šæ³Š --> åœ¨èˆª : èµ·é”š [Pilot_Onboard]
    åœ¨èˆª --> é”šæ³Š : æŠµæ¸¯é€šçŸ¥ [Waiting_Berth]
    åœ¨èˆª --> åœ¨èˆª : èˆªè¡Œä¸­ [Update_Position]

    é”šæ³Š --> é æ³Š : åˆ†é…æ³Šä½ [Berth_Assigned]
    é æ³Š --> ä½œä¸šä¸­ : å¼€å§‹ä½œä¸š [Cargo_Ops_Start]
    ä½œä¸šä¸­ --> ä½œä¸šä¸­ : ä½œä¸šè¿›è¡Œä¸­ [Update_Progress]
    ä½œä¸šä¸­ --> ç¦»æ³Š : ä½œä¸šå®Œæˆ [Cargo_Ops_Complete]

    ç¦»æ³Š --> åœ¨èˆª : ç¦»æ¸¯è®¸å¯ [Departure_Clearance]
    åœ¨èˆª --> [*] : åˆ°è¾¾ä¸‹ä¸€æ¸¯å£

    note right of é”šæ³Š
        èˆ¹èˆ¶åœ¨é”šåœ°ç­‰å¾…
        æŠ¥å‘ŠVTSç³»ç»Ÿ
    end note

    note right of ä½œä¸šä¸­
        è£…å¸è´§ä½œä¸š
        è¡¥ç»™ä½œä¸š
        è”æ£€ä½œä¸š
    end note
```

**DSLå½¢å¼åŒ–å®šä¹‰**ï¼š

```dsl
stateMachine VesselNavigation {
  states {
    ANCHORED @initial
    UNDERWAY
    BERTHED
    OPERATING
    DEPARTING
  }

  transitions {
    ANCHORED --> UNDERWAY {
      event: ANCHOR_LIFTED
      condition: Pilot_Onboard == true
      action: [UpdateNavStatus, ReportVTS]
    }

    UNDERWAY --> ANCHORED {
      event: ARRIVAL_NOTICE
      condition: Berth_Available == false
      action: [DropAnchor, WaitBerth]
    }

    ANCHORED --> BERTHED {
      event: BERTH_ASSIGNED
      action: [PrepareBerthing]
    }

    BERTHED --> OPERATING {
      event: OPS_START
      action: [StartCargoOps, UpdateAIS]
    }

    OPERATING --> DEPARTING {
      event: OPS_COMPLETE
      condition: Cargo_Ops_Done == true && Docs_Ready == true
      action: [CompleteOps, PrepareDeparture]
    }

    DEPARTING --> UNDERWAY {
      event: DEPARTURE_CLEARANCE
      action: [UpdateNavStatus, ReportDeparture]
    }
  }

  invariants {
    VesselPositionValid
    AIS_Status_Consistent
  }
}
```

---

### 2.2 è´§ç‰©çŠ¶æ€æœº

**å½¢å¼åŒ–å®šä¹‰**ï¼š

```text
Cargo_Status_SM = (States, Events, Transitions, Initial_State, Final_States)

Where:
  States = {BOOKED, STUFFED, LOADED, IN_TRANSIT, DISCHARGED, DELIVERED}
  Events = {booking_confirmed, container_stuffed, vessel_loaded,
            voyage_complete, cargo_discharged, cargo_delivered}
  Initial_State = BOOKED
  Final_States = {DELIVERED}
```

**çŠ¶æ€è½¬æ¢è¡¨**ï¼š

| å½“å‰çŠ¶æ€ | è§¦å‘äº‹ä»¶ | ä¸‹ä¸€çŠ¶æ€ | æ‰§è¡ŒåŠ¨ä½œ |
|---------|---------|---------|---------|
| è®¢èˆ± (BOOKED) | è®¢èˆ±ç¡®è®¤ | è®¢èˆ± (BOOKED) | åˆ†é…B/Lå·ï¼Œå®‰æ’æç®± |
| è®¢èˆ± (BOOKED) | æç©ºç®± | è£…ç®± (STUFFED) | æ›´æ–°é›†è£…ç®±çŠ¶æ€ |
| è£…ç®± (STUFFED) | è¿˜é‡ç®± | è£…èˆ¹ (LOADED) | ç¡®è®¤ç å¤´æ”¶ç®± |
| è£…èˆ¹ (LOADED) | èˆ¹èˆ¶ç¦»æ¸¯ | è¿è¾“ä¸­ (IN_TRANSIT) | æ›´æ–°èˆªè¡ŒçŠ¶æ€ï¼ŒETAé€šçŸ¥ |
| è¿è¾“ä¸­ (IN_TRANSIT) | èˆ¹èˆ¶åˆ°æ¸¯ | å¸èˆ¹ (DISCHARGED) | æ›´æ–°å¸èˆ¹è¿›åº¦ |
| å¸èˆ¹ (DISCHARGED) | æè´§æ”¾è¡Œ | äº¤ä»˜ (DELIVERED) | å®Œæˆäº¤ä»˜ç¡®è®¤ |

**MermaidçŠ¶æ€å›¾**ï¼š

```mermaid
stateDiagram-v2
    [*] --> è®¢èˆ± : æäº¤è®¢èˆ±ç”³è¯·

    è®¢èˆ± --> è®¢èˆ± : è®¢èˆ±ç¡®è®¤ [B/L_Issued]
    è®¢èˆ± --> è£…ç®± : æç©ºç®± [Empty_Pickup]
    è£…ç®± --> è£…èˆ¹ : è¿˜é‡ç®± [Gate_In]

    è£…èˆ¹ --> è¿è¾“ä¸­ : èˆ¹èˆ¶ç¦»æ¸¯ [Vessel_Departure]
    è¿è¾“ä¸­ --> è¿è¾“ä¸­ : è¿è¾“ä¸­ [Position_Update]
    è¿è¾“ä¸­ --> å¸èˆ¹ : èˆ¹èˆ¶åˆ°æ¸¯ [Vessel_Arrival]

    å¸èˆ¹ --> äº¤ä»˜ : æè´§æ”¾è¡Œ [Customs_Release]
    äº¤ä»˜ --> [*] : äº¤ä»˜ç¡®è®¤ [POD_Signed]

    note right of è®¢èˆ±
        B/Lç­¾å‘
        èˆ¹æœŸç¡®è®¤
    end note

    note right of è£…ç®±
        è´§ç‰©è£…ç®±
        å°å¿—æ–½åŠ 
        VGMç”³æŠ¥
    end note

    note right of è¿è¾“ä¸­
        AISä½ç½®è·Ÿè¸ª
        ETAæ›´æ–°
        å¼‚å¸¸é¢„è­¦
    end note
```

**DSLå½¢å¼åŒ–å®šä¹‰**ï¼š

```dsl
stateMachine CargoStatus {
  states {
    BOOKED @initial
    STUFFED
    LOADED
    IN_TRANSIT
    DISCHARGED
    DELIVERED @final
  }

  transitions {
    BOOKED --> STUFFED {
      event: EMPTY_PICKUP
      action: [UpdateContainerStatus, AssignContainer]
    }

    STUFFED --> LOADED {
      event: GATE_IN
      condition: VGM_Submitted == true
      action: [ConfirmGateIn, Yard_Position]
    }

    LOADED --> IN_TRANSIT {
      event: VESSEL_DEPARTURE
      action: [UpdateVoyageStatus, NotifyShipper]
    }

    IN_TRANSIT --> IN_TRANSIT {
      event: POSITION_UPDATE
      action: [TrackByAIS, UpdateETA]
    }

    IN_TRANSIT --> DISCHARGED {
      event: VESSEL_ARRIVAL
      action: [UpdateDischargeProgress]
    }

    DISCHARGED --> DELIVERED {
      event: CUSTOMS_RELEASE
      condition: Charges_Paid == true && Docs_Checked == true
      action: [Gate_Out, POD_Generation]
    }
  }

  constraints {
    VGM_Required_Before_Load
    Customs_Clearance_Before_Delivery
  }
}
```

---

### 2.3 èˆªæ¬¡çŠ¶æ€æœº

**å½¢å¼åŒ–å®šä¹‰**ï¼š

```text
Voyage_SM = (States, Events, Transitions, Initial_State, Final_States)

Where:
  States = {PLANNED, EXECUTING, COMPLETED, SETTLED}
  Events = {voyage_approved, voyage_started, voyage_ended,
            accounts_settled}
  Initial_State = PLANNED
  Final_States = {SETTLED}
```

**çŠ¶æ€è½¬æ¢è¡¨**ï¼š

| å½“å‰çŠ¶æ€ | è§¦å‘äº‹ä»¶ | ä¸‹ä¸€çŠ¶æ€ | æ‰§è¡ŒåŠ¨ä½œ |
|---------|---------|---------|---------|
| è®¡åˆ’ (PLANNED) | èˆªæ¬¡æ‰¹å‡† | è®¡åˆ’ (PLANNED) | åˆ†é…èˆ¹èˆ¶ï¼Œå‘å¸ƒèˆ¹æœŸ |
| è®¡åˆ’ (PLANNED) | èˆªæ¬¡å¼€å§‹ | æ‰§è¡Œ (EXECUTING) | é¦–ä¸ªæ¸¯å£å¼€èˆª |
| æ‰§è¡Œ (EXECUTING) | æ¸¯å£ä½œä¸š | æ‰§è¡Œ (EXECUTING) | æ›´æ–°å„æ¸¯çŠ¶æ€ |
| æ‰§è¡Œ (EXECUTING) | æœ«æ¸¯ç¦»æ¸¯ | å®Œæˆ (COMPLETED) | èˆªæ¬¡ç»“æŸç¡®è®¤ |
| å®Œæˆ (COMPLETED) | è´¹ç”¨ç»“ç®— | ç»“ç®— (SETTLED) | æˆæœ¬æ”¶å…¥æ ¸ç®— |

**MermaidçŠ¶æ€å›¾**ï¼š

```mermaid
stateDiagram-v2
    [*] --> è®¡åˆ’ : åˆ›å»ºèˆªæ¬¡è®¡åˆ’

    è®¡åˆ’ --> è®¡åˆ’ : èˆªæ¬¡æ‰¹å‡† [Voyage_Approved]
    è®¡åˆ’ --> æ‰§è¡Œ : èˆªæ¬¡å¼€å§‹ [First_Port_Departure]

    æ‰§è¡Œ --> æ‰§è¡Œ : æ¸¯å£æŒ‚é  [Port_Call]
    æ‰§è¡Œ --> æ‰§è¡Œ : è£…å¸ä½œä¸š [Cargo_Operation]
    æ‰§è¡Œ --> æ‰§è¡Œ : å¼‚å¸¸å¤„ç† [Exception_Handle]
    æ‰§è¡Œ --> å®Œæˆ : æœ«æ¸¯ç¦»æ¸¯ [Last_Port_Departure]

    å®Œæˆ --> ç»“ç®— : è´¹ç”¨ç»“ç®— [Accounts_Settled]
    ç»“ç®— --> [*] : èˆªæ¬¡å…³é—­ [Voyage_Closed]

    note right of è®¡åˆ’
        èˆªçº¿è§„åˆ’
        èˆ¹æœŸå‘å¸ƒ
        èˆ±ä½åˆ†é…
    end note

    note right of æ‰§è¡Œ
        åŠ¨æ€è·Ÿè¸ª
        ETAæ›´æ–°
        å¼‚å¸¸ç®¡ç†
    end note

    note right of ç»“ç®—
        æ”¶å…¥ç¡®è®¤
        æˆæœ¬æ ¸ç®—
        åˆ©æ¶¦åˆ†æ
    end note
```

**DSLå½¢å¼åŒ–å®šä¹‰**ï¼š

```dsl
stateMachine VoyageStatus {
  states {
    PLANNED @initial
    EXECUTING
    COMPLETED
    SETTLED @final
  }

  transitions {
    PLANNED --> EXECUTING {
      event: VOYAGE_START
      action: [ActivateVoyage, StartTracking]
    }

    EXECUTING --> EXECUTING {
      event: PORT_CALL
      action: [UpdatePortStatus, UpdateSchedule]
    }

    EXECUTING --> EXECUTING {
      event: SCHEDULE_UPDATE
      action: [RecalculateETA, NotifyCustomers]
    }

    EXECUTING --> COMPLETED {
      event: VOYAGE_END
      condition: All_Cargo_Delivered == true
      action: [CloseOperations, GenerateReport]
    }

    COMPLETED --> SETTLED {
      event: ACCOUNTS_SETTLED
      action: [Revenue_Recognition, Cost_Allocation]
    }
  }

  metrics {
    Schedule_Reliability
    Voyage_Profitability
    Fuel_Efficiency
  }
}
```

---

## 3. æ—¶åºå›¾å½¢å¼åŒ–

### 3.1 æ¸¯å£æŒ‚é æµç¨‹

**æµç¨‹è¯´æ˜**ï¼š

```text
Port_Call_Flow = (Pre_Arrival, Arrival, Berthing, Operations, Departure)

Pre_Arrival:  ETAæŠ¥å‘Š â†’ è¿›æ¸¯ç”³è¯· â†’ æ³Šä½å®‰æ’ â†’ å¼•èˆªè°ƒåº¦
Arrival:     æŠµè¾¾æŠ¥å‘Š â†’ é”šæ³Š/ç›´æ¥é æ³Š â†’ VTSç¡®è®¤
Berthing:    å¼•èˆªä¸Šèˆ¹ â†’ é æ³Šæ“ä½œ â†’ ç³»ç¼†ç¡®è®¤ â†’ è”æ£€å¼€å§‹
Operations:  è´§ç‰©è£…å¸ â†’ èˆ¹èˆ¶è¡¥ç»™ â†’ è”æ£€å®Œæˆ
Departure:   ç¦»æ³Šå‡†å¤‡ â†’ å¼•èˆªç¦»èˆ¹ â†’ ç¦»æ¸¯æŠ¥å‘Š â†’ VTSæ”¾è¡Œ
```

**Mermaidæ—¶åºå›¾**ï¼š

```mermaid
sequenceDiagram
    participant Vessel as èˆ¹èˆ¶
    participant Agent as èˆ¹èˆ¶ä»£ç†
    participant Port as æ¸¯å£å½“å±€
    participant VTS as VTSç³»ç»Ÿ
    participant Terminal as ç å¤´
    participant Pilot as å¼•èˆªç«™
    participant Customs as è”æ£€å•ä½

    Note over Vessel,Customs: é¢„æŠµæ¸¯é˜¶æ®µ (Pre-Arrival)

    Vessel->>Agent: å‘é€ETAé€šçŸ¥ (é¢„è®¡æŠµæ¸¯æ—¶é—´)
    Agent->>Port: æäº¤è¿›æ¸¯ç”³è¯·
    Port->>Terminal: ç”³è¯·æ³Šä½
    Terminal-->>Port: ç¡®è®¤æ³Šä½åˆ†é…
    Port->>Pilot: é¢„çº¦å¼•èˆª
    Pilot-->>Port: ç¡®è®¤å¼•èˆªæ—¶é—´
    Port-->>Agent: è¿›æ¸¯è®¸å¯
    Agent-->>Vessel: å‘é€è¿›æ¸¯æŒ‡å—

    Note over Vessel,Customs: åˆ°æ¸¯é˜¶æ®µ (Arrival)

    Vessel->>VTS: AISåˆ°æ¸¯æŠ¥å‘Š
    VTS->>Port: èˆ¹èˆ¶æŠµè¾¾ç¡®è®¤

    alt ç›´æ¥é æ³Š
        Port->>Pilot: è°ƒåº¦å¼•èˆª
        Pilot->>Vessel: å¼•èˆªä¸Šèˆ¹
        Vessel->>Terminal: é æ³Šæ“ä½œ
    else é”šåœ°ç­‰å¾…
        Vessel->>VTS: é”šæ³ŠæŠ¥å‘Š
        VTS->>Port: é”šæ³Šç¡®è®¤
        Port->>Vessel: ç­‰å¾…æ³Šä½é€šçŸ¥
        Port->>Pilot: æ³Šä½å°±ç»ªåå¼•èˆª
        Pilot->>Vessel: å¼•èˆªä¸Šèˆ¹
        Vessel->>Terminal: é æ³Šæ“ä½œ
    end

    Terminal-->>Port: é æ³Šå®Œæˆç¡®è®¤
    Port->>Customs: é€šçŸ¥è”æ£€

    Note over Vessel,Customs: ä½œä¸šé˜¶æ®µ (Operations)

    Customs->>Vessel: è”æ£€ç™»è½®
    Customs->>Terminal: æŸ¥éªŒè´§ç‰©

    par è´§ç‰©ä½œä¸š
        Terminal->>Vessel: è£…å¸è´§ç‰©
        Terminal->>Terminal: æ›´æ–°ä½œä¸šè¿›åº¦
    and èˆ¹èˆ¶æœåŠ¡
        Vessel->>Agent: ç”³è¯·è¡¥ç»™
        Agent->>Terminal: å®‰æ’è¡¥ç»™
    end

    Customs-->>Port: è”æ£€å®Œæˆ
    Terminal-->>Port: ä½œä¸šå®Œæˆ

    Note over Vessel,Customs: ç¦»æ¸¯é˜¶æ®µ (Departure)

    Vessel->>Agent: ç”³è¯·ç¦»æ¸¯
    Agent->>Port: æäº¤ç¦»æ¸¯å•è¯
    Port->>Pilot: é¢„çº¦ç¦»æ³Šå¼•èˆª
    Pilot->>Vessel: å¼•èˆªä¸Šèˆ¹(ç¦»æ³Š)
    Vessel->>Terminal: ç¦»æ³Šæ“ä½œ
    Terminal-->>Port: ç¦»æ³Šå®Œæˆ
    Vessel->>VTS: ç¦»æ¸¯æŠ¥å‘Š
    VTS->>Port: ç¦»æ¸¯ç¡®è®¤
    Port-->>Agent: ç¦»æ¸¯è®¸å¯
    Agent-->>Vessel: ç¡®è®¤ç¦»æ¸¯
    Vessel->>VTS: AISçŠ¶æ€æ›´æ–°(åœ¨èˆª)
```

**å…³é”®æ—¶é—´èŠ‚ç‚¹**ï¼š

| é˜¶æ®µ | å…³é”®äº‹ä»¶ | SLAè¦æ±‚ | æ•°æ®æ¥æº |
|-----|---------|--------|---------|
| é¢„æŠµæ¸¯ | ETAå‘é€ | æŠµæ¸¯å‰48-72å°æ—¶ | AIS/èˆ¹ä»£ |
| åˆ°æ¸¯ | é”šæ³Š/é æ³Š | æŒ‰æ³Šä½è®¡åˆ’ | VTS |
| ä½œä¸š | è£…å¸å®Œæˆ | æŒ‰èˆ¹æœŸçª—å£ | ç å¤´TOS |
| ç¦»æ¸¯ | ç¦»æ³Š | æŒ‰æ³Šä½è®¡åˆ’ | VTS |

---

### 3.2 é›†è£…ç®±ç­è½®è¿è¾“æµç¨‹

**æµç¨‹è¯´æ˜**ï¼š

```text
Container_Liner_Flow = (Booking, Empty_Pickup, Stuffing, Gate_In,
                       Loading, Ocean_Transport, Discharge, Delivery)

Full_Cycle:  è®¢èˆ± â†’ æç©º â†’ è£…ç®± â†’ è¿˜é‡ â†’ è£…èˆ¹ â†’ æµ·è¿ â†’ å¸èˆ¹ â†’ æé‡ â†’ äº¤ä»˜
```

**Mermaidæ—¶åºå›¾**ï¼š

```mermaid
sequenceDiagram
    participant Shipper as æ‰˜è¿äºº
    participant Forwarder as è´§ä»£
    participant Carrier as èˆ¹å…¬å¸
    participant Terminal as ç å¤´
    participant Vessel as èˆ¹èˆ¶
    participant Customs as æµ·å…³
    participant Consignee as æ”¶è´§äºº

    Note over Shipper,Consignee: å‡ºå£ç«¯æµç¨‹ (Export Process)

    Shipper->>Forwarder: 1.è®¢èˆ±è¯·æ±‚
    Forwarder->>Carrier: è®¢èˆ±ç”³è¯·
    Carrier-->>Forwarder: è®¢èˆ±ç¡®è®¤(S/O)
    Forwarder-->>Shipper: æå•ä¿¡æ¯ç¡®è®¤

    Shipper->>Terminal: 2.æç©ºç®±(å‡­S/O)
    Terminal-->>Shipper: å‘æ”¾ç©ºç®±

    Shipper->>Shipper: 3.è£…ç®±ä½œä¸š
    Shipper->>Carrier: VGMç”³æŠ¥

    Shipper->>Terminal: 4.è¿˜é‡ç®±
    Terminal->>Customs: å‡ºå£æŠ¥å…³
    Customs-->>Terminal: æ”¾è¡Œç¡®è®¤
    Terminal-->>Carrier: è¿›æ¸¯ç¡®è®¤
    Terminal-->>Shipper: åœºç«™æ”¶æ®

    Carrier->>Terminal: 5.è£…èˆ¹æŒ‡ä»¤
    Terminal->>Vessel: é›†è£…ç®±è£…èˆ¹
    Terminal-->>Carrier: è£…èˆ¹æ¸…å•
    Carrier->>Shipper: æå•ç­¾å‘

    Note over Shipper,Consignee: æµ·è¿æ®µæµç¨‹ (Ocean Transport)

    Vessel->>Vessel: èˆ¹èˆ¶èˆªè¡Œ
    Vessel->>Carrier: AISä½ç½®æŠ¥å‘Š
    Carrier->>Shipper: ETAæ›´æ–°é€šçŸ¥
    Carrier->>Consignee: åˆ°æ¸¯é¢„å‘Š

    Note over Shipper,Consignee: è¿›å£ç«¯æµç¨‹ (Import Process)

    Vessel->>Terminal: 6.èˆ¹èˆ¶åˆ°æ¸¯
    Terminal->>Vessel: é›†è£…ç®±å¸èˆ¹
    Terminal-->>Carrier: å¸èˆ¹æ¸…å•

    Carrier->>Consignee: åˆ°è´§é€šçŸ¥
    Consignee->>Customs: è¿›å£æŠ¥å…³
    Customs-->>Terminal: æ”¾è¡Œé€šçŸ¥

    Consignee->>Carrier: 7.æç®±ç”³è¯·
    Carrier->>Terminal: æ”¾ç®±æŒ‡ä»¤
    Consignee->>Terminal: æé‡ç®±
    Terminal-->>Consignee: äº¤ä»˜é›†è£…ç®±

    Consignee->>Consignee: æ‹†ç®±ä½œä¸š
    Consignee->>Terminal: è¿˜ç©ºç®±
    Terminal-->>Carrier: ç©ºç®±å½’è¿˜ç¡®è®¤
    Carrier-->>Consignee: PODç­¾å‘
```

**å…³é”®å•è¯æµè½¬**ï¼š

| å•è¯ | å‘é€æ–¹ | æ¥æ”¶æ–¹ | ä½œç”¨ |
|-----|-------|-------|-----|
| S/O (è®¢èˆ±å•) | èˆ¹å…¬å¸ | æ‰˜è¿äºº | æç®±å‡­è¯ |
| VGM ( verified gross mass) | æ‰˜è¿äºº | èˆ¹å…¬å¸ | å®‰å…¨è£…è½½ä¾æ® |
| B/L (æå•) | èˆ¹å…¬å¸ | æ‰˜è¿äºº | ç‰©æƒå‡­è¯ |
| EIR (è®¾å¤‡äº¤æ¥å•) | ç å¤´ | å¡è½¦å¸æœº | é›†è£…ç®±äº¤æ¥å‡­è¯ |
| POD (äº¤ä»˜å‡­è¯) | æ”¶è´§äºº | èˆ¹å…¬å¸ | å®Œæˆäº¤ä»˜ç¡®è®¤ |

---

### 3.3 èˆ¹èˆ¶ä»£ç†ä¸šåŠ¡æµç¨‹

**æµç¨‹è¯´æ˜**ï¼š

```text
Ship_Agency_Flow = (Appointment, Pre_Arrival, Arrival, Port_Stay, Departure)

Agency_Tasks:  å§”æ‰˜å—ç† â†’ å•è¯å‡†å¤‡ â†’ æ¸¯å£åè°ƒ â†’ è´¹ç”¨ç»“ç®— â†’ èˆªæ¬¡æŠ¥å‘Š
```

**Mermaidæ—¶åºå›¾**ï¼š

```mermaid
sequenceDiagram
    participant Principal as å§”æ‰˜äºº(èˆ¹ä¸œ)
    participant Agent as èˆ¹èˆ¶ä»£ç†
    participant Port as æ¸¯å£å½“å±€
    participant VTS as VTSä¸­å¿ƒ
    participant Terminal as ç å¤´å…¬å¸
    Pilot as å¼•èˆªç«™
    participant Customs as è”æ£€å•ä½
    participant Supplier as ä¾›åº”å•†
    participant P&I as ä¿èµ”åä¼š

    Note over Principal,P&I: å§”æ‰˜é˜¶æ®µ (Appointment)

    Principal->>Agent: å§”æ‰˜å‡½/ä»£ç†åè®®
    Agent->>Principal: ç¡®è®¤æ¥å—å§”æ‰˜
    Agent->>Agent: å»ºç«‹èˆªæ¬¡æ¡£æ¡ˆ

    Note over Principal,P&I: é¢„æŠµæ¸¯é˜¶æ®µ (Pre-Arrival)

    Principal->>Agent: èˆ¹èˆ¶èµ„æ–™/ETA
    Agent->>Port: æŠµæ¸¯é¢„æŠ¥(72h)
    Agent->>Customs: é¢„æŠ¥å…³ç”³è¯·
    Agent->>Terminal: æ³Šä½ç”³è¯·
    Terminal-->>Agent: æ³Šä½ç¡®è®¤
    Agent->>Pilot: å¼•èˆªé¢„çº¦
    Pilot-->>Agent: å¼•èˆªç¡®è®¤
    Agent->>Supplier: ä¾›åº”é¢„çº¦

    Agent->>Principal: æ¸¯å£è´¹ç”¨ä¼°ç®—
    Principal-->>Agent: è´¹ç”¨ç¡®è®¤/å¤‡ç”¨é‡‘

    Note over Principal,P&I: åœ¨æ¸¯é˜¶æ®µ (Port Stay)

    Agent->>VTS: è¿›æ¸¯ç”³æŠ¥
    VTS-->>Agent: è¿›æ¸¯è®¸å¯
    Agent->>Pilot: ç¡®è®¤å¼•èˆª
    Pilot->>Vessel: å¼•èˆªæœåŠ¡

    Agent->>Customs: åŠç†è”æ£€
    Customs->>Vessel: ç™»è½®æ£€æŸ¥
    Customs-->>Agent: è”æ£€å®Œæˆ

    Agent->>Terminal: åè°ƒè£…å¸
    Terminal-->>Agent: ä½œä¸šè¿›åº¦
    Agent->>Supplier: åè°ƒä¾›åº”

    alt èˆ¹èˆ¶ç»´ä¿®éœ€æ±‚
        Agent->>Supplier: å®‰æ’ç»´ä¿®
        Supplier->>Vessel: ç»´ä¿®æœåŠ¡
    end

    alt èˆ¹å‘˜æ›´æ¢éœ€æ±‚
        Agent->>Customs: èˆ¹å‘˜å…¥å¢ƒç”³è¯·
        Customs-->>Agent: å…¥å¢ƒè®¸å¯
    end

    Agent->>Principal: æ¯æ—¥èˆªæ¬¡æŠ¥å‘Š

    Note over Principal,P&I: ç¦»æ¸¯é˜¶æ®µ (Departure)

    Agent->>Terminal: ç¡®è®¤ä½œä¸šå®Œæˆ
    Agent->>Customs: åŠç†å‡ºå£è”æ£€
    Agent->>Port: åŠç†ç¦»æ¸¯æ‰‹ç»­
    Port->>VTS: ç¦»æ¸¯è®¸å¯
    VTS-->>Agent: ç¡®è®¤ç¦»æ¸¯
    Agent->>Pilot: ç¦»æ³Šå¼•èˆª

    Agent->>Principal: ç¦»æ¸¯æŠ¥å‘Š
    Agent->>Principal: æäº¤èˆªæ¬¡è´¦å•
    Principal-->>Agent: ç»“ç®—è´¹ç”¨
    Agent->>Agent: å½’æ¡£èˆªæ¬¡èµ„æ–™
```

**ä»£ç†ä¸šåŠ¡å…³é”®èŠ‚ç‚¹**ï¼š

| é˜¶æ®µ | å…³é”®ä»»åŠ¡ | æ—¶é—´èŠ‚ç‚¹ | è´£ä»»æ–¹ |
|-----|---------|---------|-------|
| å§”æ‰˜ | ç­¾ç½²ä»£ç†åè®® | æŠµæ¸¯å‰7å¤© | èˆ¹ä¸œ/ä»£ç† |
| é¢„æŠ¥ | å‘é€æŠµæ¸¯é¢„æŠ¥ | æŠµæ¸¯å‰72å°æ—¶ | ä»£ç† |
| è”æ£€ | å®Œæˆè¿›å‡ºå£è”æ£€ | é æ³Šå2å°æ—¶å†… | ä»£ç†/æµ·å…³ |
| ä½œä¸š | åè°ƒè£…å¸ä½œä¸š | æŒ‰èˆ¹æœŸçª—å£ | ä»£ç†/ç å¤´ |
| ç¦»æ¸¯ | åŠç†ç¦»æ¸¯æ‰‹ç»­ | ç¦»æ³Šå‰2å°æ—¶ | ä»£ç† |
| ç»“ç®— | èˆªæ¬¡è´¹ç”¨ç»“ç®— | ç¦»æ¸¯å30å¤© | ä»£ç†/èˆ¹ä¸œ |

---

## 4. æ•°æ®æµåˆ†æ

### 4.1 AISæ•°æ®æµ

**æ•°æ®æµå®šä¹‰**ï¼š

```text
AIS_Data_Flow = (Sources, Processing, Storage, Distribution, Applications)

Sources:     èˆ¹è½½AISå‘å°„å™¨ â†’ å²¸åŸºæ¥æ”¶ç«™ â†’ å«æ˜ŸAIS
Processing:  è§£ç  â†’ éªŒè¯ â†’ èåˆ â†’ åˆ†æ
Storage:     æ—¶åºæ•°æ®åº“ â†’ å†å²å½’æ¡£
Distribution: APIæ¨é€ â†’ æ¶ˆæ¯é˜Ÿåˆ— â†’ æ•°æ®æœåŠ¡
Applications: èˆ¹èˆ¶è·Ÿè¸ª â†’ ç¢°æ’é¢„è­¦ â†’ èˆªçº¿ä¼˜åŒ– â†’ æ¸¯å£è°ƒåº¦
```

**Mermaidæ•°æ®æµå›¾**ï¼š

```mermaid
flowchart TB
    subgraph Sources["æ•°æ®æºå±‚"]
        A1[èˆ¹è½½AIS Class A]
        A2[èˆ¹è½½AIS Class B]
        A3[AISåŸºç«™]
        A4[å«æ˜ŸAIS]
    end

    subgraph Network["ç½‘ç»œä¼ è¾“å±‚"]
        N1[VHFæ— çº¿ç”µ]
        N2[å«æ˜Ÿé€šä¿¡]
        N3[TCP/IPç½‘ç»œ]
    end

    subgraph Processing["æ•°æ®å¤„ç†å±‚"]
        P1[NMEAè§£ç å™¨]
        P2[æ•°æ®éªŒè¯]
        P3[å¤šæºèåˆ]
        P4[å®æ—¶åˆ†æ]
    end

    subgraph Storage["æ•°æ®å­˜å‚¨å±‚"]
        S1[(æ—¶åºæ•°æ®åº“<br/>InfluxDB/TimescaleDB)]
        S2[(å…³ç³»æ•°æ®åº“<br/>PostgreSQL)]
        S3[(å¯¹è±¡å­˜å‚¨<br/>å†å²å½’æ¡£)]
    end

    subgraph Distribution["æ•°æ®åˆ†å‘å±‚"]
        D1[REST API]
        D2[WebSocket]
        D3[æ¶ˆæ¯é˜Ÿåˆ—<br/>Kafka/RabbitMQ]
    end

    subgraph Applications["åº”ç”¨å±‚"]
        APP1[èˆ¹èˆ¶è·Ÿè¸ªç³»ç»Ÿ]
        APP2[æ¸¯å£VTS]
        APP3[èˆªçº¿ä¼˜åŒ–]
        APP4[ç¢°æ’é¢„è­¦]
        APP5[æµ·äº‹ç›‘ç®¡]
        APP6[è´§ç‰©è¿½è¸ª]
    end

    A1 --> N1
    A2 --> N1
    A3 --> N1
    A4 --> N2

    N1 --> N3
    N2 --> N3

    N3 --> P1
    P1 --> P2
    P2 --> P3
    P3 --> P4

    P3 --> S1
    P3 --> S2
    S1 --> S3

    P4 --> D1
    P4 --> D2
    P4 --> D3

    D1 --> APP1
    D1 --> APP2
    D2 --> APP3
    D2 --> APP4
    D3 --> APP5
    D3 --> APP6
```

**AISæ•°æ®æŠ¥æ–‡ç±»å‹**ï¼š

| æ¶ˆæ¯ç±»å‹ | å†…å®¹ | é¢‘ç‡ | ä¼˜å…ˆçº§ |
|---------|-----|-----|-------|
| Type 1/2/3 | ä½ç½®æŠ¥å‘Š(Class A) | 2-10ç§’ | é«˜ |
| Type 5 | é™æ€ä¸èˆªè¡Œæ•°æ® | 6åˆ†é’Ÿ | ä¸­ |
| Type 18 | ä½ç½®æŠ¥å‘Š(Class B) | å¯å˜é€Ÿç‡ | ä¸­ |
| Type 24 | Class Bé™æ€æ•°æ® | 6åˆ†é’Ÿ | ä½ |

**æ•°æ®å¤„ç†æµç¨‹**ï¼š

```python
# AISæ•°æ®å¤„ç†æµç¨‹ä¼ªä»£ç 
class AISDataFlow:
    def receive(self, raw_nmea):
        """æ¥æ”¶åŸå§‹NMEAæ•°æ®"""
        return decode_nmea(raw_nmea)

    def validate(self, message):
        """æ•°æ®éªŒè¯"""
        return validate_checksum(message) and
               validate_mmsi(message.mmsi) and
               validate_position(message.lat, message.lon)

    def fuse(self, messages):
        """å¤šæºæ•°æ®èåˆ"""
        return merge_by_timestamp(
            deduplicate(messages),
            priority=['satellite', 'terrestrial']
        )

    def process(self, fused_data):
        """å®æ—¶åˆ†æå¤„ç†"""
        return {
            'position': extract_position(fused_data),
            'movement': calculate_movement(fused_data),
            'anomalies': detect_anomalies(fused_data)
        }

    def distribute(self, processed_data):
        """æ•°æ®åˆ†å‘"""
        api_publish(processed_data)
        websocket_broadcast(processed_data)
        message_queue_push(processed_data)
```

---

### 4.2 æ¸¯å£EDIæ•°æ®æµ

**æ•°æ®æµå®šä¹‰**ï¼š

```text
Port_EDI_Flow = (Trading_Partners, Message_Types, Translation,
                 Integration, Business_Processes)

Trading_Partners: èˆ¹å…¬å¸ â†” ç å¤´ â†” æµ·å…³ â†” è´§ä»£ â†” æ”¶å‘è´§äºº
Message_Types:    IFTMBF(è®¢èˆ±) â†” IFTMBC(è®¢èˆ±ç¡®è®¤) â†”
                  IFTSTA(çŠ¶æ€æŠ¥å‘Š) â†” IFTMIN(è¿›æ¸¯æŒ‡ä»¤) â†”
                  CUSCAR(æŠ¥å…³) â†” COARRI(åˆ°ç¦»æ¸¯é€šçŸ¥)
```

**Mermaidæ•°æ®æµå›¾**ï¼š

```mermaid
flowchart TB
    subgraph Partners["è´¸æ˜“ä¼™ä¼´"]
        P1[èˆ¹å…¬å¸]
        P2[ç å¤´TOS]
        P3[æµ·å…³ç³»ç»Ÿ]
        P4[è´§ä»£ç³»ç»Ÿ]
        P5[æ”¶å‘è´§äººERP]
        P6[èˆ¹èˆ¶ä»£ç†]
    end

    subgraph EDI_Hub["EDIäº¤æ¢ä¸­å¿ƒ"]
        E1[EDIç½‘å…³]
        E2[æŠ¥æ–‡è½¬æ¢]
        E3[æ ¼å¼éªŒè¯]
        E4[è·¯ç”±åˆ†å‘]
    end

    subgraph Standards["æ ‡å‡†æŠ¥æ–‡"]
        S1[EDIFACT]
        S2[XML/JSON]
        S3[Flat File]
    end

    subgraph Messages["ä¸šåŠ¡æŠ¥æ–‡"]
        M1[IFTMBF - è®¢èˆ±è¯·æ±‚]
        M2[IFTMBC - è®¢èˆ±ç¡®è®¤]
        M3[IFTSTA - è¿è¾“çŠ¶æ€]
        M4[IFTMIN - è¿›æ¸¯é€šçŸ¥]
        M5[CUSCAR - æµ·å…³ç”³æŠ¥]
        M6[COARRI - åˆ°ç¦»æ¸¯é€šçŸ¥]
        M7[IFTMAN - è£…èˆ¹æŒ‡ç¤º]
        M8[IFTMCS - èˆ¹èˆ¶ç¦»æ¸¯]
    end

    subgraph Integration["ç³»ç»Ÿé›†æˆ"]
        I1[ERPæ¥å£]
        I2[TOSæ¥å£]
        I3[æµ·å…³æ¥å£]
        I4[å•ä¸€çª—å£]
    end

    P1 <--> E1
    P2 <--> E1
    P3 <--> E1
    P4 <--> E1
    P5 <--> E1
    P6 <--> E1

    E1 <--> E2
    E2 <--> E3
    E3 <--> E4

    E2 <--> S1
    E2 <--> S2
    E2 <--> S3

    E4 --> M1
    E4 --> M2
    E4 --> M3
    E4 --> M4
    E4 --> M5
    E4 --> M6
    E4 --> M7
    E4 --> M8

    M1 --> I1
    M2 --> I1
    M3 --> I2
    M4 --> I2
    M5 --> I3
    M6 --> I4
    M7 --> I2
    M8 --> I1
```

**EDIæŠ¥æ–‡å¤„ç†æµç¨‹**ï¼š

| æ­¥éª¤ | å¤„ç†å†…å®¹ | ç³»ç»Ÿç»„ä»¶ | SLA |
|-----|---------|---------|-----|
| æ¥æ”¶ | æ¥æ”¶åŸå§‹æŠ¥æ–‡ | EDIç½‘å…³ | < 1åˆ†é’Ÿ |
| è§£æ | è¯­æ³•è§£æéªŒè¯ | æŠ¥æ–‡è½¬æ¢å™¨ | < 30ç§’ |
| æ˜ å°„ | æ ‡å‡†æ ¼å¼è½¬æ¢ | æ˜ å°„å¼•æ“ | < 30ç§’ |
| éªŒè¯ | ä¸šåŠ¡è§„åˆ™éªŒè¯ | éªŒè¯å¼•æ“ | < 1åˆ†é’Ÿ |
| è·¯ç”± | ç›®æ ‡ç³»ç»Ÿåˆ†å‘ | è·¯ç”±å¼•æ“ | < 30ç§’ |
| ç¡®è®¤ | å‘é€åŠŸèƒ½ç¡®è®¤ | å›æ‰§ç³»ç»Ÿ | < 5åˆ†é’Ÿ |

**å…³é”®æŠ¥æ–‡ç±»å‹è¯´æ˜**ï¼š

```dsl
message IFTMBF_BookingRequest {
  // è®¢èˆ±è¯·æ±‚æŠ¥æ–‡
  header: UNH_MessageHeader

  segment BGM_BeginningOfMessage {
    message_name: "IFTMBF"
    document_number: String
  }

  segment TDT_TransportDetails {
    mode: "1" // æµ·è¿
    voyage: String
    vessel: String
  }

  segment LOC_Locations {
    pol: UNLocode
    pod: UNLocode
  }

  segment GID_GoodsItemDetails {
    number_of_packages: Integer
    goods_description: String
    gross_weight: Decimal
  }

  segment EQD_EquipmentDetails {
    container_type: String
    container_count: Integer
  }

  trailer: UNT_MessageTrailer
}

message IFTSTA_StatusReport {
  // è¿è¾“çŠ¶æ€æŠ¥å‘Š
  header: UNH_MessageHeader

  segment BGM {
    message_name: "IFTSTA"
  }

  segment CNI_ConsignmentInfo {
    bl_number: String
  }

  segment STS_Status {
    status_code: StatusCode
    // 1: é¢„è®¢ç¡®è®¤
    // 2: å·²æ”¶è´§
    // 3: å·²è£…èˆ¹
    // 4: è¿è¾“ä¸­
    // 5: å·²åˆ°æ¸¯
    // 6: å·²å¸èˆ¹
    // 7: å·²äº¤ä»˜
    location: String
    timestamp: DateTime
  }

  trailer: UNT_MessageTrailer
}
```

---

## 5. å®æ—¶æ€§åˆ†æ

### 5.1 AISæŠ¥å‘Šé¢‘ç‡

**æŠ¥å‘Šé¢‘ç‡å®šä¹‰**ï¼š

```text
AIS_Report_Frequency = (Ship_Static, Ship_Dynamic, Voyage_Data, Binary_Msg)

Dynamic_Reports:
  - Class A Underway (SOG > 23 knots): 2 seconds
  - Class A Underway (SOG 14-23 knots): 3.33 seconds
  - Class A Underway (SOG < 14 knots): 10 seconds
  - Class A At Anchor/Moored: 3 minutes
  - Class B: å¯å˜é€Ÿç‡ï¼Œé€šå¸¸ä¸º30ç§’-3åˆ†é’Ÿ

Static_Reports: 6 minutes
Voyage_Data: 6 minutes
```

**Mermaidæ—¶åºå›¾ - AISæŠ¥å‘Šå‘¨æœŸ**ï¼š

```mermaid
gantt
    title AISæŠ¥å‘Šæ—¶é—´çº¿
    dateFormat X
    axisFormat %s

    section Class Aé«˜é€Ÿ
    ä½ç½®æŠ¥å‘Š    :crit, 0, 2
    ä½ç½®æŠ¥å‘Š    :crit, 2, 4
    ä½ç½®æŠ¥å‘Š    :crit, 4, 6
    ä½ç½®æŠ¥å‘Š    :crit, 6, 8
    ä½ç½®æŠ¥å‘Š    :crit, 8, 10

    section Class Aä¸­é€Ÿ
    ä½ç½®æŠ¥å‘Š    :active, 0, 3.33
    ä½ç½®æŠ¥å‘Š    :active, 3.33, 6.66
    ä½ç½®æŠ¥å‘Š    :active, 6.66, 10

    section Class Aä½é€Ÿ
    ä½ç½®æŠ¥å‘Š    :done, 0, 10
    ä½ç½®æŠ¥å‘Š    :done, 10, 20

    section é™æ€æ•°æ®
    é™æ€æ•°æ®    :milestone, 0, 0
    é™æ€æ•°æ®    :milestone, 360, 360
    èˆªè¡Œæ•°æ®    :milestone, 360, 360
```

**AISæŠ¥å‘Šé¢‘ç‡è¡¨**ï¼š

| èˆ¹èˆ¶çŠ¶æ€ | é€Ÿåº¦èŒƒå›´ | æŠ¥å‘Šé—´éš” | èˆ¹èˆ¶ç±»å‹ |
|---------|---------|---------|---------|
| é«˜é€Ÿèˆªè¡Œ | SOG > 23èŠ‚ | 2ç§’ | Class A |
| ä¸­é€Ÿèˆªè¡Œ | 14 < SOG â‰¤ 23èŠ‚ | 3.33ç§’ | Class A |
| ä½é€Ÿèˆªè¡Œ | SOG â‰¤ 14èŠ‚ | 10ç§’ | Class A |
| é”šæ³Š/ç³»æ³Š | SOG â‰ˆ 0 | 3åˆ†é’Ÿ | Class A |
| æ­£å¸¸èˆªè¡Œ | ä»»æ„ | 30ç§’-3åˆ†é’Ÿ | Class B |
| é™æ€æ•°æ® | N/A | 6åˆ†é’Ÿ | Class A/B |
| èˆªè¡Œæ•°æ® | N/A | 6åˆ†é’Ÿ | Class A |

**å®æ—¶æ€§SLAè¦æ±‚**ï¼š

```dsl
sla AIS_Realtime_Requirements {
  position_update_latency: {
    target: "< 5 seconds"
    critical: "< 10 seconds"
  }

  data_availability: {
    target: "99.9%"
    measurement: "per_month"
  }

  position_accuracy: {
    high_accuracy: "< 10 meters"
    low_accuracy: "> 10 meters"
  }

  data_freshness: {
    target: "< 30 seconds"
    critical: "< 60 seconds"
  }
}
```

---

### 5.2 æ¸¯å£ä½œä¸šæ•ˆç‡SLA

**SLAå®šä¹‰**ï¼š

```text
Port_Operation_SLA = (Vessel_Operation, Cargo_Handling,
                     Documentation, Service_Response)

Vessel_Operation: èˆ¹èˆ¶åœ¨æ¸¯æ—¶é—´ã€æ³Šä½å‘¨è½¬ç‡ã€å‡†ç­ç‡
Cargo_Handling:   å•æ¡¥æ•ˆç‡ã€åœºåœ°å‘¨è½¬ç‡ã€æŸ¥éªŒæ—¶æ•ˆ
Documentation:    å•è¯å¤„ç†æ—¶é—´ã€æ”¾è¡Œé€Ÿåº¦
Service_Response: å®¢æˆ·å“åº”æ—¶é—´ã€å¼‚å¸¸å¤„ç†æ—¶é—´
```

**æ¸¯å£ä½œä¸šKPIä¸SLA**ï¼š

| æŒ‡æ ‡ç±»åˆ« | å…·ä½“æŒ‡æ ‡ | ç›®æ ‡å€¼ | æŒ‘æˆ˜å€¼ | æµ‹é‡æ–¹æ³• |
|---------|---------|-------|-------|---------|
| èˆ¹èˆ¶æ•ˆç‡ | èˆ¹èˆ¶åœ¨æ¸¯æ—¶é—´ | < 24å°æ—¶ | < 18å°æ—¶ | AIS/VTS |
| | æ³Šä½å‘¨è½¬ç‡ | > 4è‰˜/å¤© | > 5è‰˜/å¤© | TOSç»Ÿè®¡ |
| | å‡†ç­ç‡ | > 80% | > 90% | èˆ¹æœŸå¯¹æ¯” |
| ä½œä¸šæ•ˆç‡ | å•æ¡¥æ•ˆç‡ | > 30è‡ªç„¶ç®±/å°æ—¶ | > 35è‡ªç„¶ç®±/å°æ—¶ | TOSç»Ÿè®¡ |
| | é‡ç®±å¹³å‡å †å­˜æœŸ | < 7å¤© | < 5å¤© | åœºå­˜åˆ†æ |
| æœåŠ¡æ—¶æ•ˆ | è¿›å£æ”¾è¡Œæ—¶é—´ | < 4å°æ—¶ | < 2å°æ—¶ | æµ·å…³ç³»ç»Ÿ |
| | å‡ºå£æå‰æˆªå…³ | 24å°æ—¶ | 12å°æ—¶ | èˆ¹å…¬å¸ç¡®è®¤ |
| | å®¢æœå“åº”æ—¶é—´ | < 15åˆ†é’Ÿ | < 5åˆ†é’Ÿ | å·¥å•ç³»ç»Ÿ |

**Mermaidç”˜ç‰¹å›¾ - æ¸¯å£ä½œä¸šæ—¶é—´çª—å£**ï¼š

```mermaid
gantt
    title é›†è£…ç®±èˆ¹æ¸¯å£ä½œä¸šæ—¶é—´çª—å£(ç¤ºä¾‹)
    dateFormat HH:mm
    axisFormat %H:%M

    section èˆ¹èˆ¶ä½œä¸š
    å¼•èˆªé æ³Š     :crit, 08:00, 09:00
    ç³»ç¼†å›ºå®š     :09:00, 09:30
    è”æ£€ä½œä¸š     :09:30, 11:00
    è´§ç‰©è£…å¸     :active, 09:30, 17:30
    èˆ¹èˆ¶è¡¥ç»™     :10:00, 14:00
    ç¦»æ³Šå‡†å¤‡     :17:00, 17:30
    å¼•èˆªç¦»æ³Š     :crit, 17:30, 18:30

    section è´§ç‰©ä½œä¸š
    è¿›å£å¸èˆ¹     :active, 09:30, 13:00
    å‡ºå£è£…èˆ¹     :active, 14:00, 17:30
    æŸ¥éªŒä½œä¸š     :11:00, 15:00

    section å•è¯ä½œä¸š
    è¿›å£æ”¾è¡Œ     :09:00, 12:00
    å‡ºå£ç»“å…³     :15:00, 17:00
    èˆ±å•ç¡®è®¤     :17:00, 18:00
```

**SLAç›‘æ§ä»ªè¡¨æ¿**ï¼š

```dsl
dashboard Port_Operation_SLA {
  panel Vessel_Turnaround_Time {
    type: gauge
    metric: avg(berth_departure - berth_arrival)
    unit: hours
    target: 24
    critical_threshold: 36
  }

  panel Crane_Productivity {
    type: time_series
    metric: moves_per_crane_hour
    unit: moves/hour
    target: 30
  }

  panel Schedule_Reliability {
    type: percentage
    metric: on_time_arrivals / total_arrivals
    target: 0.80
    critical_threshold: 0.70
  }

  panel Documentation_TAT {
    type: bar_chart
    metric: document_processing_time
    breakdown: [customs_clearance, manifest_confirmation, release_processing]
    target: 4_hours
  }
}
```

---

## 6. å¼‚å¸¸å¤„ç†æœºåˆ¶

### 6.1 æ¶åŠ£å¤©æ°”ç»•èˆª

**å¼‚å¸¸å®šä¹‰**ï¼š

```text
Weather_Diversion = (Trigger, Assessment, Decision, Execution, Recovery)

Trigger:    æ°”è±¡é¢„è­¦(Wind > Beaufort 8 / Wave > 4m)
Assessment: èˆªçº¿è¯„ä¼° â†’ ç»•èˆªæ–¹æ¡ˆ â†’ æˆæœ¬å½±å“ â†’ ETAå˜æ›´
Decision:   èˆ¹é•¿å†³å®š + èˆ¹å…¬å¸æ‰¹å‡† + ç§Ÿå®¶é€šçŸ¥ + æ¸¯å£è°ƒæ•´
Execution:  èˆªçº¿å˜æ›´ â†’ AISæ›´æ–° â†’ ç›¸å…³æ–¹é€šçŸ¥ â†’ åŠ¨æ€è·Ÿè¸ª
Recovery:   å›åˆ°åŸèˆªçº¿ â†’ åç»­æ¸¯å£è°ƒæ•´ â†’ åˆåŒæ¡æ¬¾è§¦å‘
```

**MermaidçŠ¶æ€å›¾ - æ¶åŠ£å¤©æ°”å¤„ç†**ï¼š

```mermaid
stateDiagram-v2
    [*] --> æ­£å¸¸èˆªè¡Œ

    æ­£å¸¸èˆªè¡Œ --> æ°”è±¡é¢„è­¦ : æ”¶åˆ°æ¶åŠ£å¤©æ°”è­¦æŠ¥

    state æ°”è±¡é¢„è­¦ {
        [*] --> è¯„ä¼°ä¸­
        è¯„ä¼°ä¸­ --> ç»•è¡Œå†³ç­– : å¤©æ°”ä¸å¯æ‰¿å—
        è¯„ä¼°ä¸­ --> å‡é€Ÿèˆªè¡Œ : å¤©æ°”å¯æ§
        è¯„ä¼°ä¸­ --> ç­‰å¾…å¤©æ°” : éœ€è¦ç­‰å¾…
        å‡é€Ÿèˆªè¡Œ --> [*] : ç»§ç»­ç›‘æ§
        ç­‰å¾…å¤©æ°” --> è¯„ä¼°ä¸­ : å¤©æ°”è½¬å¥½
    }

    æ°”è±¡é¢„è­¦ --> ç»•è¡Œå†³ç­– : å†³å®šç»•è¡Œ

    state ç»•è¡Œå†³ç­– {
        [*] --> æ–¹æ¡ˆåˆ¶å®š
        æ–¹æ¡ˆåˆ¶å®š --> æˆæœ¬è¯„ä¼°
        æˆæœ¬è¯„ä¼° --> å„æ–¹é€šçŸ¥
        å„æ–¹é€šçŸ¥ --> æ–¹æ¡ˆç¡®è®¤
        æ–¹æ¡ˆç¡®è®¤ --> [*]
    }

    ç»•è¡Œå†³ç­– --> æ‰§è¡Œç»•è¡Œ : æ–¹æ¡ˆç¡®è®¤

    state æ‰§è¡Œç»•è¡Œ {
        [*] --> èˆªçº¿å˜æ›´
        èˆªçº¿å˜æ›´ --> AISæ›´æ–°
        AISæ›´æ–° --> æŒç»­ç›‘æ§
        æŒç»­ç›‘æ§ --> åŠ¨æ€è°ƒæ•´
        åŠ¨æ€è°ƒæ•´ --> æŒç»­ç›‘æ§
        åŠ¨æ€è°ƒæ•´ --> [*] : å±é™©è§£é™¤
    }

    æ‰§è¡Œç»•è¡Œ --> æ¢å¤æ­£å¸¸ : å±é™©è§£é™¤
    æ¢å¤æ­£å¸¸ --> [*] : å›åˆ°åŸèˆªçº¿

    note right of ç»•è¡Œå†³ç­–
        é€šçŸ¥å¯¹è±¡ï¼š
        - èˆ¹å…¬å¸
        - ç§Ÿèˆ¹äºº
        - è´§ä¸»/ä»£ç†
        - æ¸¯å£/ä»£ç†
        - ä¿é™©å…¬å¸
    end note
```

**Mermaidæ—¶åºå›¾ - æ¶åŠ£å¤©æ°”å¤„ç†æµç¨‹**ï¼š

```mermaid
sequenceDiagram
    participant Vessel as èˆ¹èˆ¶
    participant Master as èˆ¹é•¿
    participant Company as èˆ¹å…¬å¸
    participant Charterer as ç§Ÿèˆ¹äºº
    participant Weather as æ°”è±¡æœåŠ¡
    participant Port as ç›®çš„æ¸¯
    participant Agent as èˆ¹èˆ¶ä»£ç†
    participant Insurer as ä¿é™©å…¬å¸

    Weather->>Vessel: æ¶åŠ£å¤©æ°”é¢„è­¦
    Weather->>Company: æ°”è±¡æ›´æ–°é€šçŸ¥

    Vessel->>Master: è¯„ä¼°å¤©æ°”å½±å“
    Master->>Company: è¯·æ±‚ç»•èˆªæˆæƒ

    alt åŒæ„ç»•èˆª
        Company->>Master: æˆæƒç»•èˆª
        Master->>Vessel: æ‰§è¡Œèˆªçº¿å˜æ›´
        Vessel->>Vessel: æ›´æ–°AISçŠ¶æ€

        Company->>Charterer: é€šçŸ¥ç»•èˆªå†³å®š
        Company->>Port: æ›´æ–°ETAé€šçŸ¥
        Company->>Insurer: æŠ¥å‘Šèˆªçº¿å˜æ›´

        Port->>Agent: è°ƒæ•´æ³Šä½å®‰æ’
        Agent-->>Company: ç¡®è®¤æ¸¯å£è°ƒæ•´

        loop ç»•èˆªæœŸé—´
            Vessel->>Company: æ¯6å°æ—¶ä½ç½®æŠ¥å‘Š
            Weather->>Company: æŒç»­æ°”è±¡æ›´æ–°
        end

        Vessel->>Master: å¤©æ°”å¥½è½¬é€šçŸ¥
        Master->>Vessel: æ¢å¤åŸè®¡åˆ’èˆªçº¿
        Vessel->>Company: æ¢å¤æ­£å¸¸èˆªè¡Œé€šçŸ¥
        Company->>Port: æ›´æ–°ETA

    else ç»´æŒèˆªçº¿
        Company->>Master: æ‹’ç»ç»•èˆªè¯·æ±‚
        Master->>Vessel: å‡é€Ÿæˆ–ç­‰å¾…æŒ‡ä»¤
        Vessel->>Company: ç­‰å¾…å¤©æ°”å¥½è½¬
    end
```

---

### 6.2 æ¸¯å£æ‹¥å µå¤„ç†

**å¼‚å¸¸å®šä¹‰**ï¼š

```text
Port_Congestion = (Detection, Impact_Assessment, Mitigation, Communication)

Detection:        é”šåœ°èˆ¹èˆ¶æ•° > é˜ˆå€¼ OR æ³Šä½ç­‰å¾…æ—¶é—´ > SLA
Impact_Assessment: åç»­èˆªæ¬¡å»¶è¯¯ã€è´§ç‰©äº¤ä»˜å»¶è¿Ÿã€æˆæœ¬å¢åŠ 
Mitigation:       èˆªçº¿è°ƒæ•´ã€æ¸¯å£å˜æ›´ã€èˆ¹æœŸè·³æ¸¯ã€åŠ å¼€åŠ ç­èˆ¹
Communication:    å®¢æˆ·é€šçŸ¥ã€èˆ¹æœŸæ›´æ–°ã€åˆåŒåå•†
```

**Mermaidæµç¨‹å›¾ - æ¸¯å£æ‹¥å µå¤„ç†**ï¼š

```mermaid
flowchart TD
    A[ç›‘æµ‹æ¸¯å£æ‹¥å µæŒ‡æ ‡] --> B{æ‹¥å µé˜ˆå€¼æ£€æŸ¥}

    B -->|é”šåœ°èˆ¹èˆ¶ < 5| C[æ­£å¸¸çŠ¶æ€]
    B -->|é”šåœ°èˆ¹èˆ¶ 5-10| D[è½»åº¦æ‹¥å µ]
    B -->|é”šåœ°èˆ¹èˆ¶ > 10| E[ä¸¥é‡æ‹¥å µ]

    C --> F[æ­£å¸¸è°ƒåº¦]

    D --> G[å¯åŠ¨é¢„è­¦æœºåˆ¶]
    G --> H[é€šçŸ¥ç›¸å…³èˆ¹èˆ¶]
    H --> I[è¯„ä¼°åç»­å½±å“]
    I --> J[è°ƒæ•´èˆ¹æœŸè®¡åˆ’]

    E --> K[å¯åŠ¨åº”æ€¥é¢„æ¡ˆ]
    K --> L[å¬é›†åº”æ€¥ä¼šè®®]
    L --> M{å†³ç­–é€‰é¡¹}

    M -->|é€‰é¡¹1| N[è°ƒæ•´èˆªçº¿é¡ºåº]
    M -->|é€‰é¡¹2| O[å˜æ›´å¸è´§æ¸¯]
    M -->|é€‰é¡¹3| P[èˆ¹æœŸè·³æ¸¯]
    M -->|é€‰é¡¹4| Q[ä¸´æ—¶åŠ æŒ‚å…¶ä»–æ¸¯]

    N --> R[é‡æ–°ä¼˜åŒ–èˆªçº¿]
    O --> S[å¯ç”¨å¤‡ç”¨æ¸¯å£]
    P --> T[å®¢æˆ·åå•†åŒæ„]
    Q --> U[åè°ƒä¸´æ—¶æ³Šä½]

    R --> V[å®¢æˆ·é€šçŸ¥]
    S --> V
    T --> V
    U --> V

    V --> W[åˆåŒæ¡æ¬¾å®¡æŸ¥]
    W --> X[é¢å¤–è´¹ç”¨å¤„ç†]
    X --> Y[æŒç»­ç›‘æ§]

    J --> Y
    F --> Y

    Y --> A
```

**æ‹¥å µå¤„ç†å†³ç­–çŸ©é˜µ**ï¼š

| æ‹¥å µç­‰çº§ | é”šåœ°èˆ¹èˆ¶æ•° | ç­‰å¾…æ—¶é—´ | å“åº”æªæ–½ | å†³ç­–æ—¶æ•ˆ |
|---------|----------|---------|---------|---------|
| ç»¿è‰²(æ­£å¸¸) | 0-3è‰˜ | < 6å°æ—¶ | æ­£å¸¸è°ƒåº¦ | 24å°æ—¶ |
| é»„è‰²(è½»åº¦) | 4-7è‰˜ | 6-24å°æ—¶ | é¢„è­¦é€šçŸ¥ | 12å°æ—¶ |
| æ©™è‰²(ä¸­åº¦) | 8-12è‰˜ | 24-48å°æ—¶ | èˆªçº¿è°ƒæ•´ | 6å°æ—¶ |
| çº¢è‰²(ä¸¥é‡) | > 12è‰˜ | > 48å°æ—¶ | åº”æ€¥é¢„æ¡ˆ | 2å°æ—¶ |

---

### 6.3 è®¾å¤‡æ•…éšœå¤„ç†

**å¼‚å¸¸å®šä¹‰**ï¼š

```text
Equipment_Failure = (Failure_Types, Response_Levels, Recovery_Procedures)

Failure_Types:
  - Critical: ä¸»æœºæ•…éšœã€èˆµæœºæ•…éšœã€ç”µåŠ›ç³»ç»Ÿæ•…éšœ
  - Major:    è¾…æœºæ•…éšœã€è£…å¸è®¾å¤‡æ•…éšœã€é€šä¿¡è®¾å¤‡æ•…éšœ
  - Minor:    å¯¼èˆªè®¾å¤‡æ•…éšœã€ç”Ÿæ´»è®¾æ–½æ•…éšœ

Response_Levels:
  - Level 1: èˆ¹ä¸Šç»´ä¿®
  - Level 2: æ¸¯å£ç»´ä¿®
  - Level 3: æ‹–è½®ååŠ©
  - Level 4: è¿›å…¥èˆ¹å‚
```

**MermaidçŠ¶æ€å›¾ - è®¾å¤‡æ•…éšœå¤„ç†**ï¼š

```mermaid
stateDiagram-v2
    [*] --> æ­£å¸¸è¿è¥

    æ­£å¸¸è¿è¥ --> æ•…éšœæ£€æµ‹ : è®¾å¤‡å¼‚å¸¸æŠ¥è­¦

    state æ•…éšœæ£€æµ‹ {
        [*] --> æ•…éšœç¡®è®¤
        æ•…éšœç¡®è®¤ --> ä¸¥é‡ç¨‹åº¦è¯„ä¼°
        ä¸¥é‡ç¨‹åº¦è¯„ä¼° --> è½»å¾®æ•…éšœ : å¯ç»§ç»­è¿è¥
        ä¸¥é‡ç¨‹åº¦è¯„ä¼° --> ä¸€èˆ¬æ•…éšœ : éœ€è¦ç»´ä¿®
        ä¸¥é‡ç¨‹åº¦è¯„ä¼° --> ä¸¥é‡æ•…éšœ : å½±å“å®‰å…¨
    }

    è½»å¾®æ•…éšœ --> æ­£å¸¸è¿è¥ : èˆ¹ä¸Šä¿®å¤

    ä¸€èˆ¬æ•…éšœ --> æ¸¯å£ç»´ä¿® : ç”³è¯·è¿›æ¸¯

    state æ¸¯å£ç»´ä¿® {
        [*] --> ç»´ä¿®ç”³è¯·
        ç»´ä¿®ç”³è¯· --> ç»´ä¿®æ–¹æ¡ˆ
        ç»´ä¿®æ–¹æ¡ˆ --> å¤‡ä»¶è°ƒé…
        å¤‡ä»¶è°ƒé… --> ç»´ä¿®æ‰§è¡Œ
        ç»´ä¿®æ‰§è¡Œ --> æµ‹è¯•éªŒæ”¶
        æµ‹è¯•éªŒæ”¶ --> [*]
    }

    ä¸¥é‡æ•…éšœ --> åº”æ€¥å“åº” : å±åŠå®‰å…¨

    state åº”æ€¥å“åº” {
        [*] --> åº”æ€¥æŠ¥è­¦
        åº”æ€¥æŠ¥è­¦ --> å¯»æ±‚å¸®åŠ©
        å¯»æ±‚å¸®åŠ© --> æ‹–è½®ååŠ©
        å¯»æ±‚å¸®åŠ© --> æœ€è¿‘æ¸¯å£
        å¯»æ±‚å¸®åŠ© --> æµ·ä¸Šä¿®ç†
        æ‹–è½®ååŠ© --> å®‰å…¨æ‹–å¸¦
        æœ€è¿‘æ¸¯å£ --> ç´§æ€¥è¿›æ¸¯
        æµ·ä¸Šä¿®ç† --> ä¸´æ—¶ä¿®å¤
        ä¸´æ—¶ä¿®å¤ --> å®‰å…¨æ‹–å¸¦
        å®‰å…¨æ‹–å¸¦ --> [*]
        ç´§æ€¥è¿›æ¸¯ --> [*]
    }

    æ¸¯å£ç»´ä¿® --> æ¢å¤è¿è¥ : ç»´ä¿®å®Œæˆ
    åº”æ€¥å“åº” --> æ¢å¤è¿è¥ : å±é™©è§£é™¤
    æ¢å¤è¿è¥ --> [*] : æ­£å¸¸è¿è¥

    note right of åº”æ€¥å“åº”
        åº”æ€¥å“åº”è§¦å‘ï¼š
        - ä¸»æœºåœè½¦
        - èˆµæœºå¤±çµ
        - å…¨èˆ¹å¤±ç”µ
        - ç«ç¾/è¿›æ°´
    end note
```

**Mermaidæ—¶åºå›¾ - ä¸»æœºæ•…éšœåº”æ€¥å¤„ç†**ï¼š

```mermaid
sequenceDiagram
    participant Engine as ä¸»æœºç³»ç»Ÿ
    participant Bridge as é©¾é©¶å°
    participant Master as èˆ¹é•¿
    participant Company as èˆ¹å…¬å¸
    participant MRCC as æµ·ä¸Šæ•‘æ´ä¸­å¿ƒ
    participant Tug as æ‹–è½®å…¬å¸
    participant Port as æœ€è¿‘æ¸¯å£
    participant Agent as æ¸¯å£ä»£ç†
    participant Class as èˆ¹çº§ç¤¾

    Engine->>Engine: ä¸»æœºæ•…éšœæŠ¥è­¦
    Engine->>Bridge: æ•…éšœä¿¡å·ä¼ è¾“
    Bridge->>Master: æŠ¥å‘Šä¸»æœºæ•…éšœ

    Master->>Bridge: å‘å‡ºåº”æ€¥å‘½ä»¤
    Bridge->>Engine: å¯åŠ¨åº”æ€¥ç¨‹åº

    Master->>Company: MAYDAYæŠ¥å‘Š
    Master->>MRCC: ç´§æ€¥å‘¼å«

    MRCC->>MRCC: å¯åŠ¨æœæ•‘ç¨‹åº
    MRCC->>Tug: è°ƒåº¦æ‹–è½®
    MRCC->>Port: é€šçŸ¥å‡†å¤‡ç´§æ€¥è¿›æ¸¯

    Tug-->>MRCC: æ‹–è½®å‡ºå‘ç¡®è®¤
    Tug->>Master: å»ºç«‹é€šä¿¡è”ç³»

    Port->>Agent: å‡†å¤‡ç´§æ€¥æ³Šä½
    Agent->>Port: åè°ƒè”æ£€å¿«åŠ

    Master->>Bridge: è¯„ä¼°èˆ¹èˆ¶çŠ¶æ€
    Bridge->>Master: æŠ¥å‘Šæ¼‚ç§»æƒ…å†µ

    Tug->>Master: æ‹–è½®åˆ°è¾¾
    Master->>Tug: æ‹–å¸¦æŒ‡ä»¤
    Tug->>Tug: è¿æ¥æ‹–ç¼†
    Tug->>Master: å¼€å§‹æ‹–å¸¦

    Tug->>Port: æ‹–å¸¦é€”ä¸­
    Port->>Agent: å‡†å¤‡é æ³Š
    Agent->>Class: é€šçŸ¥éªŒèˆ¹å¸ˆ

    Tug->>Port: åˆ°è¾¾æ¸¯å¤–é”šåœ°
    Master->>Port: ç”³è¯·ç´§æ€¥è¿›æ¸¯
    Port-->>Master: è¿›æ¸¯è®¸å¯

    Tug->>Port: æ‹–å¸¦è¿›æ¸¯
    Tug->>Port: ååŠ©é æ³Š

    Master->>Port: é æ³Šå®ŒæˆæŠ¥å‘Š
    Port->>Agent: å®‰æ’è”æ£€
    Agent->>Class: å®‰æ’æ£€éªŒ

    Class->>Engine: æ•…éšœæ£€éªŒ
    Class-->>Company: æ£€éªŒæŠ¥å‘Š

    Company->>Engine: å®‰æ’ç»´ä¿®
    Engine->>Engine: ç»´ä¿®å®Œæˆ
    Class->>Engine: æ£€éªŒå‘è¯

    Company->>Port: ç”³è¯·å¼€èˆª
    Port-->>Company: å¼€èˆªè®¸å¯
    Master->>Bridge: æ¢å¤æ­£å¸¸è¿è¥
```

**æ•…éšœå“åº”æ—¶æ•ˆè¦æ±‚**ï¼š

| æ•…éšœç­‰çº§ | æŠ¥å‘Šæ—¶é™ | å“åº”æªæ–½ | æ¢å¤ç›®æ ‡ |
|---------|---------|---------|---------|
| è½»å¾®æ•…éšœ | 24å°æ—¶å†… | èˆ¹ä¸Šç»´ä¿® | 7å¤©å†… |
| ä¸€èˆ¬æ•…éšœ | 12å°æ—¶å†… | æ¸¯å£ç»´ä¿® | 3å¤©å†… |
| ä¸¥é‡æ•…éšœ | ç«‹å³ | åº”æ€¥å“åº” | è§†æƒ…å†µè€Œå®š |
| ç´§æ€¥æ•…éšœ | ç«‹å³ | MAYDAY | å®‰å…¨ç¬¬ä¸€ |

---

## é™„å½•

### A. çŠ¶æ€æœºDSLå®Œæ•´å®šä¹‰

```dsl
schema MaritimeStateMachines {

  stateMachine VesselNavigation {
    description: "èˆ¹èˆ¶èˆªè¡ŒçŠ¶æ€ç®¡ç†"
    version: "1.0"

    states {
      ANCHORED @initial {
        entry_action: [ReportToVTS]
        exit_action: [ClearAnchor]
      }

      UNDERWAY {
        do_action: [UpdatePosition, ReportAIS]
      }

      BERTHED {
        entry_action: [ConfirmBerthing]
      }

      OPERATING {
        do_action: [TrackCargoOps]
      }

      DEPARTING {
        exit_action: [FinalDepartureReport]
      }
    }

    transitions {
      // å®šä¹‰è§å‰æ–‡
    }
  }

  stateMachine CargoLifecycle {
    description: "è´§ç‰©å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†"
    version: "1.0"

    // å®šä¹‰è§å‰æ–‡
  }

  stateMachine VoyageManagement {
    description: "èˆªæ¬¡å…¨æµç¨‹ç®¡ç†"
    version: "1.0"

    // å®šä¹‰è§å‰æ–‡
  }
}
```

### B. å¼‚å¸¸å¤„ç†å†³ç­–æ ‘

```
å¼‚å¸¸äº‹ä»¶æ£€æµ‹
    â”œâ”€â”€ å¤©æ°”ç›¸å…³
    â”‚   â”œâ”€â”€ é£åŠ› > 8çº§ â†’ è¯„ä¼°ç»•èˆª
    â”‚   â”œâ”€â”€ æµªé«˜ > 4m â†’ è¯„ä¼°ç»•èˆª
    â”‚   â””â”€â”€ å°é£é¢„è­¦ â†’ ç´§æ€¥é¿å°
    â”œâ”€â”€ æ¸¯å£ç›¸å…³
    â”‚   â”œâ”€â”€ æ³Šä½å–æ¶ˆ â†’ è¯„ä¼°æ›¿ä»£æ¸¯
    â”‚   â”œâ”€â”€ æ¸¯å£æ‹¥å µ â†’ è°ƒæ•´èˆ¹æœŸ
    â”‚   â””â”€â”€ ç½¢å·¥/å…³é—­ â†’ èˆªçº¿å˜æ›´
    â”œâ”€â”€ èˆ¹èˆ¶ç›¸å…³
    â”‚   â”œâ”€â”€ ä¸»æœºæ•…éšœ â†’ ç´§æ€¥å“åº”
    â”‚   â”œâ”€â”€ è®¾å¤‡æ•…éšœ â†’ åˆ†çº§å¤„ç†
    â”‚   â””â”€â”€ èˆ¹å‘˜ä¼¤ç—… â†’ åŒ»ç–—æ´åŠ©
    â””â”€â”€ è´§ç‰©ç›¸å…³
        â”œâ”€â”€ å±é™©å“æ³„æ¼ â†’ åº”æ€¥å¤„ç†
        â”œâ”€â”€ å†·è—æ•…éšœ â†’ ç´§æ€¥ä¿®ç†
        â””â”€â”€ è´§æŸè´§å·® â†’ ç†ç®—å¤„ç†
```

### C. ç›¸å…³æ ‡å‡†å‚è€ƒ

| æ ‡å‡†ç¼–å· | æ ‡å‡†åç§° | é€‚ç”¨èŒƒå›´ |
|---------|---------|---------|
| IMO MSC.74(69) | AISæ€§èƒ½æ ‡å‡† | èˆ¹èˆ¶AISè®¾å¤‡ |
| IEC 61993-2 | AIS Class Aæ ‡å‡† | AISè®¾å¤‡è§„èŒƒ |
| ISO 28005 | ç”µå­æ¸¯å£æ¸…å…³ | æ¸¯å£EDI |
| UN/EDIFACT | è”åˆå›½ç”µå­æ•°æ®äº¤æ¢ | EDIæŠ¥æ–‡ |
| IMDG Code | å›½é™…æµ·è¿å±é™©å“è§„åˆ™ | å±é™©å“è¿è¾“ |

---

*æ–‡æ¡£ç‰ˆæœ¬: 1.0*
*æœ€åæ›´æ–°: 2026-02-15*
*ç»´æŠ¤è€…: Maritime Schemaå·¥ä½œç»„*
