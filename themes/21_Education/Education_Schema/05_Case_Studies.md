# æ•™è‚²è¡Œä¸šSchemaå®è·µæ¡ˆä¾‹

## ğŸ“‘ ç›®å½•

- [1. æ¡ˆä¾‹æ¦‚è¿°](#1-æ¡ˆä¾‹æ¦‚è¿°)
- [2. ä¼ä¸šèƒŒæ™¯](#2-ä¼ä¸šèƒŒæ™¯)
- [3. ä¸šåŠ¡ç—›ç‚¹ä¸ç›®æ ‡](#3-ä¸šåŠ¡ç—›ç‚¹ä¸ç›®æ ‡)
- [4. æŠ€æœ¯æŒ‘æˆ˜](#4-æŠ€æœ¯æŒ‘æˆ˜)
- [5. è§£å†³æ–¹æ¡ˆæ¶æ„](#5-è§£å†³æ–¹æ¡ˆæ¶æ„)
- [6. å®Œæ•´å®ç°ä»£ç ](#6-å®Œæ•´å®ç°ä»£ç )
- [7. æ•ˆæœè¯„ä¼°ä¸ROIåˆ†æ](#7-æ•ˆæœè¯„ä¼°ä¸roiåˆ†æ)

---

## 1. æ¡ˆä¾‹æ¦‚è¿°

æœ¬æ–‡æ¡£æä¾›æ•™è‚²è¡Œä¸šSchemaåœ¨å®é™…åº”ç”¨ä¸­çš„å®Œæ•´å®è·µæ¡ˆä¾‹ï¼Œæ¶µç›–å­¦ç”Ÿä¿¡æ¯ç®¡ç†ã€è¯¾ç¨‹ç®¡ç†ã€æ•™å­¦èµ„æºç®¡ç†ã€å­¦ä¸šè¯„ä¼°ç­‰æ ¸å¿ƒæ•™è‚²åœºæ™¯ã€‚é€šè¿‡Schemaé©±åŠ¨çš„æ–¹æ³•ï¼Œå®ç°æ•™è‚²æ•°æ®çš„ç»“æ„åŒ–ç®¡ç†å’Œæ™ºèƒ½åˆ†æã€‚

---

## 2. ä¼ä¸šèƒŒæ™¯

### 2.1 ä¼ä¸šæ¦‚å†µ

**ä¼ä¸šåç§°**ï¼šåæ™ºæ•™è‚²é›†å›¢ï¼ˆè™šæ„æ¡ˆä¾‹ä¼ä¸šï¼‰

**ä¼ä¸šè§„æ¨¡**ï¼š
- æœåŠ¡å­¦æ ¡æ•°é‡ï¼š500+æ‰€
- è¦†ç›–å­¦ç”Ÿæ•°ï¼š120ä¸‡äºº
- å¹³å°æ—¥æ´»è·ƒç”¨æˆ·ï¼š80ä¸‡
- å¹´è¥ä¸šé¢ï¼š8.5äº¿å…ƒäººæ°‘å¸

**æ ¸å¿ƒä¸šåŠ¡**ï¼š
- K12æ™ºæ…§æ•™è‚²å¹³å°
- é«˜ç­‰æ•™è‚²ä¿¡æ¯åŒ–è§£å†³æ–¹æ¡ˆ
- èŒä¸šæ•™è‚²åŸ¹è®­ç³»ç»Ÿ
- æ•™è‚²å¤§æ•°æ®åˆ†ææœåŠ¡

**æ•°å­—åŒ–ç°çŠ¶**ï¼š
- å·²éƒ¨ç½²å¤šä¸ªç‹¬ç«‹ä¸šåŠ¡ç³»ç»Ÿ
- æ•°æ®å­¤å²›é—®é¢˜ä¸¥é‡
- ç¼ºä¹ç»Ÿä¸€çš„æ•°æ®æ ‡å‡†å’Œäº¤æ¢æ ¼å¼
- å­¦ç”Ÿæ•°æ®åˆ†æ•£åœ¨ä¸åŒç³»ç»Ÿä¸­

---

## 3. ä¸šåŠ¡ç—›ç‚¹ä¸ç›®æ ‡

### 3.1 äº”å¤§ä¸šåŠ¡ç—›ç‚¹

| åºå· | ç—›ç‚¹ | å…·ä½“è¡¨ç° | å½±å“ç¨‹åº¦ |
|------|------|----------|----------|
| 1 | **æ•°æ®å­¤å²›ä¸¥é‡** | å­¦ç±ã€æˆç»©ã€è€ƒå‹¤æ•°æ®åˆ†æ•£åœ¨å¤šä¸ªç³»ç»Ÿ | é«˜ |
| 2 | **å­¦ç”Ÿç”»åƒæ¨¡ç³Š** | ç¼ºä¹å…¨é¢çš„å­¦ç”Ÿæ•°æ®åˆ†æèƒ½åŠ› | é«˜ |
| 3 | **ä¸ªæ€§åŒ–æ•™å­¦éš¾** | æ— æ³•æ ¹æ®å­¦ç”Ÿç‰¹ç‚¹å®šåˆ¶å­¦ä¹ è·¯å¾„ | é«˜ |
| 4 | **å®¶æ ¡æ²Ÿé€šä½æ•ˆ** | ä¿¡æ¯ä¼ é€’æ»åï¼Œåé¦ˆä¸åŠæ—¶ | ä¸­ |
| 5 | **èµ„æºé…ç½®ä¸åˆç†** | æ•™å¸ˆã€æ•™å®¤èµ„æºåˆ©ç”¨ç‡ä½ | ä¸­ |

### 3.2 äº”å¤§ä¸šåŠ¡ç›®æ ‡

| åºå· | ç›®æ ‡ | å…·ä½“æŒ‡æ ‡ | å®ŒæˆæœŸé™ |
|------|------|----------|----------|
| 1 | **å»ºç«‹ç»Ÿä¸€æ•°æ®æ ‡å‡†** | åˆ¶å®šæ•™è‚²æ•°æ®Schemaæ ‡å‡† | 6ä¸ªæœˆ |
| 2 | **æ„å»ºå­¦ç”Ÿæ•°å­—ç”»åƒ** | è¦†ç›–100%å­¦ç”Ÿï¼Œå‡†ç¡®ç‡>95% | 12ä¸ªæœˆ |
| 3 | **å®ç°ä¸ªæ€§åŒ–æ¨è** | å­¦ä¹ èµ„æºæ¨èå‡†ç¡®ç‡>80% | 12ä¸ªæœˆ |
| 4 | **æå‡æ•™å­¦æ•ˆç‡** | æ•™å¸ˆå¤‡è¯¾æ—¶é—´å‡å°‘30% | 9ä¸ªæœˆ |
| 5 | **ä¼˜åŒ–èµ„æºé…ç½®** | æ•™å®¤åˆ©ç”¨ç‡æå‡è‡³85% | 12ä¸ªæœˆ |

---

## 4. æŠ€æœ¯æŒ‘æˆ˜

### 4.1 äº”å¤§æŠ€æœ¯æŒ‘æˆ˜

1. **å¤šæºå¼‚æ„æ•°æ®èåˆ**
   - å­¦ç±ç³»ç»Ÿã€æ•™åŠ¡ç³»ç»Ÿã€è€ƒè¯•ç³»ç»Ÿæ•°æ®æ ¼å¼å„å¼‚
   - éœ€è¦ç»Ÿä¸€çš„å­¦ç”Ÿä¸»æ•°æ®ç®¡ç†
   - å†å²æ•°æ®è¿ç§»å’Œæ¸…æ´—éš¾åº¦å¤§

2. **éšç§ä¿æŠ¤ä¸åˆè§„**
   - å­¦ç”Ÿæ•°æ®æ¶‰åŠä¸ªäººéšç§
   - éœ€è¦ç¬¦åˆã€Šä¸ªäººä¿¡æ¯ä¿æŠ¤æ³•ã€‹
   - æ•°æ®è„±æ•å’Œæƒé™æ§åˆ¶è¦æ±‚é«˜

3. **å®æ—¶æ•°æ®å¤„ç†**
   - åœ¨çº¿å­¦ä¹ è¡Œä¸ºæ•°æ®å®æ—¶é‡‡é›†
   - è¯¾å ‚äº’åŠ¨æ•°æ®å®æ—¶åˆ†æ
   - å¤§è§„æ¨¡å¹¶å‘æ•°æ®å†™å…¥

4. **ä¸ªæ€§åŒ–ç®—æ³•å¼€å‘**
   - å­¦ä¹ è·¯å¾„æ¨èç®—æ³•
   - çŸ¥è¯†å›¾è°±æ„å»º
   - å­¦ä¹ æ•ˆæœé¢„æµ‹æ¨¡å‹

5. **ç³»ç»Ÿé›†æˆå¤æ‚**
   - éœ€è¦å¯¹æ¥ç¬¬ä¸‰æ–¹æ•™è‚²åº”ç”¨
   - APIæ ‡å‡†åŒ–å’Œç‰ˆæœ¬ç®¡ç†
   - æ•°æ®åŒæ­¥å’Œä¸€è‡´æ€§ä¿è¯

---

## 5. è§£å†³æ–¹æ¡ˆæ¶æ„

### 5.1 æ€»ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åº”ç”¨å±‚ (Application)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ æ™ºæ…§è¯¾å ‚  â”‚  â”‚ åœ¨çº¿å­¦ä¹   â”‚  â”‚ æ•™åŠ¡ç®¡ç†  â”‚  â”‚ å®¶æ ¡äº’é€š  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    æœåŠ¡å±‚ (Service)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ å­¦ç”Ÿç”»åƒ  â”‚  â”‚ æ™ºèƒ½æ¨è  â”‚  â”‚ å­¦ä¸šè¯„ä¼°  â”‚  â”‚ æ•°æ®åˆ†æ  â”‚    â”‚
â”‚  â”‚ å¼•æ“     â”‚  â”‚ å¼•æ“     â”‚  â”‚ å¼•æ“     â”‚  â”‚ æœåŠ¡     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    æ•°æ®å±‚ (Data)                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ å­¦ç”Ÿæ•°æ®  â”‚  â”‚ è¯¾ç¨‹æ•°æ®  â”‚  â”‚ è¡Œä¸ºæ•°æ®  â”‚  â”‚ èµ„æºæ•°æ®  â”‚    â”‚
â”‚  â”‚ ä»“åº“     â”‚  â”‚ ä»“åº“     â”‚  â”‚ ä»“åº“     â”‚  â”‚ ä»“åº“     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    æ ‡å‡†å±‚ (Standard)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ LTI      â”‚  â”‚ xAPI     â”‚  â”‚ CEDS     â”‚  â”‚ ä¼ä¸šSchemaâ”‚    â”‚
â”‚  â”‚ æ ‡å‡†     â”‚  â”‚ æ ‡å‡†     â”‚  â”‚ æ ‡å‡†     â”‚  â”‚ æ ‡å‡†     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. å®Œæ•´å®ç°ä»£ç 

```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
æ•™è‚²è¡Œä¸šSchemaå®è·µæ¡ˆä¾‹ - å®Œæ•´å®ç°
ä¼ä¸šï¼šåæ™ºæ•™è‚²é›†å›¢
ä½œè€…ï¼šSchemaå·¥ç¨‹å›¢é˜Ÿ
ç‰ˆæœ¬ï¼š2.0.0
"""

import json
import uuid
from datetime import datetime, date
from typing import Dict, List, Optional, Any, Set
from dataclasses import dataclass, field, asdict
from enum import Enum
import random
import logging

logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)


class Gender(Enum):
    """æ€§åˆ«æšä¸¾"""
    MALE = "Male"
    FEMALE = "Female"
    OTHER = "Other"


class StudentStatus(Enum):
    """å­¦ç”ŸçŠ¶æ€æšä¸¾"""
    ENROLLED = "Enrolled"
    SUSPENDED = "Suspended"
    GRADUATED = "Graduated"
    WITHDRAWN = "Withdrawn"
    TRANSFERRED = "Transferred"


class GradeLevel(Enum):
    """å¹´çº§æšä¸¾"""
    GRADE_1 = "ä¸€å¹´çº§"
    GRADE_2 = "äºŒå¹´çº§"
    GRADE_3 = "ä¸‰å¹´çº§"
    GRADE_4 = "å››å¹´çº§"
    GRADE_5 = "äº”å¹´çº§"
    GRADE_6 = "å…­å¹´çº§"
    GRADE_7 = "åˆä¸€"
    GRADE_8 = "åˆäºŒ"
    GRADE_9 = "åˆä¸‰"
    GRADE_10 = "é«˜ä¸€"
    GRADE_11 = "é«˜äºŒ"
    GRADE_12 = "é«˜ä¸‰"


class Subject(Enum):
    """å­¦ç§‘æšä¸¾"""
    CHINESE = "è¯­æ–‡"
    MATHEMATICS = "æ•°å­¦"
    ENGLISH = "è‹±è¯­"
    PHYSICS = "ç‰©ç†"
    CHEMISTRY = "åŒ–å­¦"
    BIOLOGY = "ç”Ÿç‰©"
    HISTORY = "å†å²"
    GEOGRAPHY = "åœ°ç†"
    POLITICS = "æ”¿æ²»"
    COMPUTER = "ä¿¡æ¯æŠ€æœ¯"
    ART = "ç¾æœ¯"
    MUSIC = "éŸ³ä¹"
    PE = "ä½“è‚²"


class LearningStyle(Enum):
    """å­¦ä¹ é£æ ¼æšä¸¾"""
    VISUAL = "è§†è§‰å‹"
    AUDITORY = "å¬è§‰å‹"
    KINESTHETIC = "åŠ¨è§‰å‹"
    READING_WRITING = "è¯»å†™å‹"


@dataclass
class Address:
    """åœ°å€ä¿¡æ¯"""
    province: str = ""
    city: str = ""
    district: str = ""
    street: str = ""
    postal_code: str = ""
    
    def to_dict(self) -> Dict:
        return asdict(self)


@dataclass
class ContactInfo:
    """è”ç³»ä¿¡æ¯"""
    phone: str = ""
    email: str = ""
    emergency_contact: str = ""
    emergency_phone: str = ""
    
    def to_dict(self) -> Dict:
        return asdict(self)


@dataclass
class Student:
    """å­¦ç”Ÿå®ä½“"""
    student_id: str
    name: str
    gender: Gender
    date_of_birth: date
    grade_level: GradeLevel
    class_id: str
    status: StudentStatus = StudentStatus.ENROLLED
    enrollment_date: date = field(default_factory=date.today)
    
    # è”ç³»ä¿¡æ¯
    address: Address = field(default_factory=Address)
    contact: ContactInfo = field(default_factory=ContactInfo)
    
    # å­¦ä¹ ç‰¹å¾
    learning_style: LearningStyle = LearningStyle.VISUAL
    academic_ability: float = 0.5  # 0-1
    learning_interests: List[Subject] = field(default_factory=list)
    
    # å…ƒæ•°æ®
    created_at: datetime = field(default_factory=datetime.now)
    updated_at: datetime = field(default_factory=datetime.now)
    
    def get_age(self) -> int:
        """è®¡ç®—å¹´é¾„"""
        today = date.today()
        return today.year - self.date_of_birth.year - (
            (today.month, today.day) < (self.date_of_birth.month, self.date_of_birth.day)
        )
    
    def to_dict(self) -> Dict:
        return {
            "student_id": self.student_id,
            "name": self.name,
            "gender": self.gender.value,
            "age": self.get_age(),
            "date_of_birth": self.date_of_birth.isoformat(),
            "grade_level": self.grade_level.value,
            "class_id": self.class_id,
            "status": self.status.value,
            "enrollment_date": self.enrollment_date.isoformat(),
            "address": self.address.to_dict(),
            "contact": self.contact.to_dict(),
            "learning_style": self.learning_style.value,
            "academic_ability": self.academic_ability,
            "learning_interests": [s.value for s in self.learning_interests],
            "created_at": self.created_at.isoformat(),
            "updated_at": self.updated_at.isoformat()
        }


@dataclass
class Teacher:
    """æ•™å¸ˆå®ä½“"""
    teacher_id: str
    name: str
    gender: Gender
    subjects: List[Subject] = field(default_factory=list)
    years_of_experience: int = 0
    qualifications: List[str] = field(default_factory=list)
    contact: ContactInfo = field(default_factory=ContactInfo)
    
    def to_dict(self) -> Dict:
        return {
            "teacher_id": self.teacher_id,
            "name": self.name,
            "gender": self.gender.value,
            "subjects": [s.value for s in self.subjects],
            "years_of_experience": self.years_of_experience,
            "qualifications": self.qualifications,
            "contact": self.contact.to_dict()
        }


@dataclass
class Course:
    """è¯¾ç¨‹å®ä½“"""
    course_id: str
    course_name: str
    subject: Subject
    grade_levels: List[GradeLevel] = field(default_factory=list)
    description: str = ""
    credits: float = 1.0
    duration_hours: int = 45
    prerequisites: List[str] = field(default_factory=list)
    learning_objectives: List[str] = field(default_factory=list)
    
    def to_dict(self) -> Dict:
        return {
            "course_id": self.course_id,
            "course_name": self.course_name,
            "subject": self.subject.value,
            "grade_levels": [g.value for g in self.grade_levels],
            "description": self.description,
            "credits": self.credits,
            "duration_hours": self.duration_hours,
            "prerequisites": self.prerequisites,
            "learning_objectives": self.learning_objectives
        }


@dataclass
class Class:
    """ç­çº§å®ä½“"""
    class_id: str
    class_name: str
    grade_level: GradeLevel
    academic_year: str
    head_teacher_id: str
    student_ids: List[str] = field(default_factory=list)
    room_number: str = ""
    max_capacity: int = 50
    
    def get_student_count(self) -> int:
        return len(self.student_ids)
    
    def to_dict(self) -> Dict:
        return {
            "class_id": self.class_id,
            "class_name": self.class_name,
            "grade_level": self.grade_level.value,
            "academic_year": self.academic_year,
            "head_teacher_id": self.head_teacher_id,
            "student_count": self.get_student_count(),
            "room_number": self.room_number,
            "max_capacity": self.max_capacity
        }


@dataclass
class GradeRecord:
    """æˆç»©è®°å½•"""
    record_id: str
    student_id: str
    course_id: str
    exam_type: str  # æœŸä¸­ã€æœŸæœ«ã€æœˆè€ƒç­‰
    score: float
    max_score: float = 100.0
    exam_date: date = field(default_factory=date.today)
    semester: str = ""
    academic_year: str = ""
    
    def get_percentage(self) -> float:
        return (self.score / self.max_score * 100) if self.max_score > 0 else 0
    
    def get_grade_level(self) -> str:
        pct = self.get_percentage()
        if pct >= 90: return "A"
        elif pct >= 80: return "B"
        elif pct >= 70: return "C"
        elif pct >= 60: return "D"
        else: return "F"
    
    def to_dict(self) -> Dict:
        return {
            "record_id": self.record_id,
            "student_id": self.student_id,
            "course_id": self.course_id,
            "exam_type": self.exam_type,
            "score": self.score,
            "max_score": self.max_score,
            "percentage": round(self.get_percentage(), 2),
            "grade_level": self.get_grade_level(),
            "exam_date": self.exam_date.isoformat(),
            "semester": self.semester,
            "academic_year": self.academic_year
        }


@dataclass
class LearningActivity:
    """å­¦ä¹ æ´»åŠ¨è®°å½•"""
    activity_id: str
    student_id: str
    course_id: str
    activity_type: str  # video, quiz, assignment, discussion
    duration_minutes: int = 0
    completion_status: str = "in_progress"  # in_progress, completed, not_started
    score: Optional[float] = None
    timestamp: datetime = field(default_factory=datetime.now)
    metadata: Dict[str, Any] = field(default_factory=dict)
    
    def to_dict(self) -> Dict:
        return {
            "activity_id": self.activity_id,
            "student_id": self.student_id,
            "course_id": self.course_id,
            "activity_type": self.activity_type,
            "duration_minutes": self.duration_minutes,
            "completion_status": self.completion_status,
            "score": self.score,
            "timestamp": self.timestamp.isoformat(),
            "metadata": self.metadata
        }


class StudentProfileEngine:
    """å­¦ç”Ÿç”»åƒå¼•æ“"""
    
    def __init__(self):
        self.students: Dict[str, Student] = {}
        self.grade_records: Dict[str, List[GradeRecord]] = {}
        self.learning_activities: Dict[str, List[LearningActivity]] = {}
    
    def add_student(self, student: Student):
        self.students[student.student_id] = student
        self.grade_records[student.student_id] = []
        self.learning_activities[student.student_id] = []
    
    def add_grade_record(self, record: GradeRecord):
        if record.student_id in self.grade_records:
            self.grade_records[record.student_id].append(record)
    
    def add_learning_activity(self, activity: LearningActivity):
        if activity.student_id in self.learning_activities:
            self.learning_activities[activity.student_id].append(activity)
    
    def generate_student_profile(self, student_id: str) -> Dict:
        """ç”Ÿæˆå­¦ç”Ÿç”»åƒ"""
        student = self.students.get(student_id)
        if not student:
            return {}
        
        # æˆç»©åˆ†æ
        grades = self.grade_records.get(student_id, [])
        subject_scores: Dict[str, List[float]] = {}
        for grade in grades:
            if grade.course_id not in subject_scores:
                subject_scores[grade.course_id] = []
            subject_scores[grade.course_id].append(grade.get_percentage())
        
        avg_scores = {cid: sum(scores)/len(scores) 
                     for cid, scores in subject_scores.items()}
        
        # å­¦ä¹ è¡Œä¸ºåˆ†æ
        activities = self.learning_activities.get(student_id, [])
        total_learning_time = sum(a.duration_minutes for a in activities)
        completion_rate = (sum(1 for a in activities if a.completion_status == "completed") 
                          / len(activities) * 100 if activities else 0)
        
        # å¼ºé¡¹å’Œå¼±é¡¹ç§‘ç›®
        sorted_subjects = sorted(avg_scores.items(), key=lambda x: x[1], reverse=True)
        strong_subjects = [cid for cid, score in sorted_subjects[:3]]
        weak_subjects = [cid for cid, score in sorted_subjects[-3:]]
        
        profile = {
            "student_id": student_id,
            "basic_info": {
                "name": student.name,
                "grade": student.grade_level.value,
                "learning_style": student.learning_style.value
            },
            "academic_performance": {
                "average_score": round(sum(avg_scores.values())/len(avg_scores), 2) if avg_scores else 0,
                "subject_scores": avg_scores,
                "strong_subjects": strong_subjects,
                "weak_subjects": weak_subjects
            },
            "learning_behavior": {
                "total_learning_time": total_learning_time,
                "activity_count": len(activities),
                "completion_rate": round(completion_rate, 2)
            },
            "recommendations": self._generate_recommendations(student, weak_subjects)
        }
        
        return profile
    
    def _generate_recommendations(self, student: Student, weak_subjects: List[str]) -> List[str]:
        """ç”Ÿæˆå­¦ä¹ å»ºè®®"""
        recommendations = []
        
        if student.learning_style == LearningStyle.VISUAL:
            recommendations.append("å»ºè®®ä½¿ç”¨å›¾è¡¨ã€è§†é¢‘ç­‰è§†è§‰åŒ–å­¦ä¹ ææ–™")
        elif student.learning_style == LearningStyle.AUDITORY:
            recommendations.append("å»ºè®®å¤šå¬è®²è§£ã€å‚ä¸è®¨è®º")
        
        for subject in weak_subjects[:2]:
            recommendations.append(f"å»ºè®®åŠ å¼º{subject}çš„å­¦ä¹ ï¼Œå¤šåšç»ƒä¹ é¢˜")
        
        return recommendations
    
    def analyze_class_performance(self, class_id: str, class_students: List[str]) -> Dict:
        """åˆ†æç­çº§æ•´ä½“è¡¨ç°"""
        total_scores = []
        subject_scores: Dict[str, List[float]] = {}
        
        for student_id in class_students:
            grades = self.grade_records.get(student_id, [])
            for grade in grades:
                total_scores.append(grade.get_percentage())
                if grade.course_id not in subject_scores:
                    subject_scores[grade.course_id] = []
                subject_scores[grade.course_id].append(grade.get_percentage())
        
        return {
            "class_id": class_id,
            "student_count": len(class_students),
            "overall_average": round(sum(total_scores)/len(total_scores), 2) if total_scores else 0,
            "subject_averages": {cid: round(sum(scores)/len(scores), 2) 
                                for cid, scores in subject_scores.items()},
            "score_distribution": self._calculate_distribution(total_scores)
        }
    
    def _calculate_distribution(self, scores: List[float]) -> Dict[str, int]:
        """è®¡ç®—æˆç»©åˆ†å¸ƒ"""
        distribution = {"A(90-100)": 0, "B(80-89)": 0, "C(70-79)": 0, "D(60-69)": 0, "F(<60)": 0}
        for score in scores:
            if score >= 90: distribution["A(90-100)"] += 1
            elif score >= 80: distribution["B(80-89)"] += 1
            elif score >= 70: distribution["C(70-79)"] += 1
            elif score >= 60: distribution["D(60-69)"] += 1
            else: distribution["F(<60)"] += 1
        return distribution


class LearningRecommendationEngine:
    """å­¦ä¹ æ¨èå¼•æ“"""
    
    def __init__(self, profile_engine: StudentProfileEngine):
        self.profile_engine = profile_engine
        self.courses: Dict[str, Course] = {}
        self.resources: Dict[str, Dict] = {}
    
    def add_course(self, course: Course):
        self.courses[course.course_id] = course
    
    def recommend_courses(self, student_id: str, top_k: int = 5) -> List[Dict]:
        """æ¨èè¯¾ç¨‹"""
        student = self.profile_engine.students.get(student_id)
        if not student:
            return []
        
        recommendations = []
        profile = self.profile_engine.generate_student_profile(student_id)
        weak_subjects = profile.get("academic_performance", {}).get("weak_subjects", [])
        
        for course_id, course in self.courses.items():
            score = 0.0
            
            # å¼±é¡¹ç§‘ç›®ä¼˜å…ˆ
            if course_id in weak_subjects:
                score += 0.4
            
            # åŒ¹é…å­¦ä¹ é£æ ¼
            if course.subject in student.learning_interests:
                score += 0.3
            
            # å¹´çº§åŒ¹é…
            if student.grade_level in course.grade_levels:
                score += 0.3
            
            recommendations.append({
                "course_id": course_id,
                "course_name": course.course_name,
                "subject": course.subject.value,
                "relevance_score": round(score, 2),
                "reason": "æ¨èè¡¥å¼º" if course_id in weak_subjects else "å…´è¶£åŒ¹é…"
            })
        
        recommendations.sort(key=lambda x: x["relevance_score"], reverse=True)
        return recommendations[:top_k]
    
    def recommend_learning_path(self, student_id: str, target_subject: Subject) -> List[Dict]:
        """æ¨èå­¦ä¹ è·¯å¾„"""
        # ç®€åŒ–çš„å­¦ä¹ è·¯å¾„æ¨è
        path = [
            {"step": 1, "content": f"{target_subject.value}åŸºç¡€çŸ¥è¯†å¤ä¹ ", "duration": "2å‘¨"},
            {"step": 2, "content": f"{target_subject.value}æ ¸å¿ƒæ¦‚å¿µå­¦ä¹ ", "duration": "4å‘¨"},
            {"step": 3, "content": f"{target_subject.value}å…¸å‹ä¾‹é¢˜è®­ç»ƒ", "duration": "3å‘¨"},
            {"step": 4, "content": f"{target_subject.value}ç»¼åˆæµ‹è¯•", "duration": "1å‘¨"}
        ]
        return path


def generate_demo_data():
    """ç”Ÿæˆæ¼”ç¤ºæ•°æ®"""
    profile_engine = StudentProfileEngine()
    
    # åˆ›å»ºå­¦ç”Ÿ
    students_data = [
        ("STU-001", "å¼ ä¸‰", Gender.MALE, date(2010, 5, 15), GradeLevel.GRADE_10, "CLASS-01"),
        ("STU-002", "æå››", Gender.FEMALE, date(2010, 8, 22), GradeLevel.GRADE_10, "CLASS-01"),
        ("STU-003", "ç‹äº”", Gender.MALE, date(2009, 12, 3), GradeLevel.GRADE_10, "CLASS-01"),
        ("STU-004", "èµµå…­", Gender.FEMALE, date(2010, 3, 18), GradeLevel.GRADE_10, "CLASS-02"),
        ("STU-005", "é’±ä¸ƒ", Gender.MALE, date(2010, 7, 9), GradeLevel.GRADE_10, "CLASS-02"),
    ]
    
    for sid, name, gender, dob, grade, class_id in students_data:
        student = Student(
            student_id=sid,
            name=name,
            gender=gender,
            date_of_birth=dob,
            grade_level=grade,
            class_id=class_id,
            learning_style=random.choice(list(LearningStyle)),
            academic_ability=random.uniform(0.4, 0.9),
            learning_interests=random.sample(list(Subject), 3)
        )
        profile_engine.add_student(student)
    
    # åˆ›å»ºè¯¾ç¨‹
    courses_data = [
        ("COURSE-MATH-10", "é«˜ä¸­æ•°å­¦å¿…ä¿®ä¸€", Subject.MATHEMATICS, [GradeLevel.GRADE_10]),
        ("COURSE-ENG-10", "é«˜ä¸­è‹±è¯­å¿…ä¿®ä¸€", Subject.ENGLISH, [GradeLevel.GRADE_10]),
        ("COURSE-PHY-10", "é«˜ä¸­ç‰©ç†å¿…ä¿®ä¸€", Subject.PHYSICS, [GradeLevel.GRADE_10]),
        ("COURSE-CHM-10", "é«˜ä¸­åŒ–å­¦å¿…ä¿®ä¸€", Subject.CHEMISTRY, [GradeLevel.GRADE_10]),
    ]
    
    for cid, name, subject, grades in courses_data:
        course = Course(
            course_id=cid,
            course_name=name,
            subject=subject,
            grade_levels=grades
        )
        profile_engine.profile_engine = profile_engine
    
    # ç”Ÿæˆæˆç»©è®°å½•
    for student_id in profile_engine.students:
        for course_id, _, _, _ in courses_data:
            for exam_type in ["æœŸä¸­è€ƒè¯•", "æœŸæœ«è€ƒè¯•"]:
                record = GradeRecord(
                    record_id=f"GRADE-{student_id}-{course_id}-{exam_type}",
                    student_id=student_id,
                    course_id=course_id,
                    exam_type=exam_type,
                    score=random.uniform(60, 98),
                    exam_date=date(2025, 1, 15) if exam_type == "æœŸä¸­è€ƒè¯•" else date(2025, 6, 20),
                    academic_year="2024-2025"
                )
                profile_engine.add_grade_record(record)
        
        # ç”Ÿæˆå­¦ä¹ æ´»åŠ¨
        for _ in range(10):
            activity = LearningActivity(
                activity_id=str(uuid.uuid4()),
                student_id=student_id,
                course_id=random.choice([c[0] for c in courses_data]),
                activity_type=random.choice(["video", "quiz", "assignment"]),
                duration_minutes=random.randint(15, 120),
                completion_status=random.choice(["completed", "completed", "in_progress"])
            )
            profile_engine.add_learning_activity(activity)
    
    return profile_engine, courses_data


def main():
    """ä¸»å‡½æ•°"""
    print("=" * 80)
    print("æ•™è‚²è¡Œä¸šSchemaå®è·µæ¡ˆä¾‹ - åæ™ºæ•™è‚²é›†å›¢")
    print("=" * 80)
    
    # ç”Ÿæˆæ¼”ç¤ºæ•°æ®
    print("\nã€æ­¥éª¤1ã€‘ç”Ÿæˆæ¼”ç¤ºæ•°æ®...")
    profile_engine, courses_data = generate_demo_data()
    print(f"  åˆ›å»ºå­¦ç”Ÿ: {len(profile_engine.students)} äºº")
    
    # ç”Ÿæˆå­¦ç”Ÿç”»åƒ
    print("\nã€æ­¥éª¤2ã€‘ç”Ÿæˆå­¦ç”Ÿç”»åƒ...")
    for student_id in list(profile_engine.students.keys())[:2]:
        profile = profile_engine.generate_student_profile(student_id)
        print(f"\n  å­¦ç”Ÿ: {profile['basic_info']['name']}")
        print(f"    å¹³å‡æˆç»©: {profile['academic_performance']['average_score']}")
        print(f"    å­¦ä¹ æ—¶é•¿: {profile['learning_behavior']['total_learning_time']} åˆ†é’Ÿ")
        print(f"    å»ºè®®: {profile['recommendations'][0] if profile['recommendations'] else 'æš‚æ— '}")
    
    # ç­çº§åˆ†æ
    print("\nã€æ­¥éª¤3ã€‘ç­çº§æ•´ä½“åˆ†æ...")
    class_analysis = profile_engine.analyze_class_performance(
        "CLASS-01", 
        ["STU-001", "STU-002", "STU-003"]
    )
    print(f"  ç­çº§: {class_analysis['class_id']}")
    print(f"  æ•´ä½“å¹³å‡åˆ†: {class_analysis['overall_average']}")
    print(f"  æˆç»©åˆ†å¸ƒ: {class_analysis['score_distribution']}")
    
    # å­¦ä¹ æ¨è
    print("\nã€æ­¥éª¤4ã€‘å­¦ä¹ æ¨è...")
    rec_engine = LearningRecommendationEngine(profile_engine)
    for course_data in courses_data:
        course = Course(*course_data)
        rec_engine.add_course(course)
    
    recommendations = rec_engine.recommend_courses("STU-001", top_k=3)
    print("  æ¨èè¯¾ç¨‹:")
    for rec in recommendations:
        print(f"    - {rec['course_name']} (ç›¸å…³åº¦: {rec['relevance_score']})")
    
    print("\n" + "=" * 80)
    print("æ•™è‚²è¡Œä¸šSchemaå®è·µæ¡ˆä¾‹æ‰§è¡Œå®Œæˆ")
    print("=" * 80)


if __name__ == "__main__":
    main()
```

---

## 7. æ•ˆæœè¯„ä¼°ä¸ROIåˆ†æ

### 7.1 å…³é”®ç»©æ•ˆæŒ‡æ ‡(KPI)

| æŒ‡æ ‡ç±»åˆ« | æŒ‡æ ‡åç§° | å®æ–½å‰ | å®æ–½å | æ”¹å–„å¹…åº¦ |
|----------|----------|--------|--------|----------|
| **æ•ˆç‡æŒ‡æ ‡** | å­¦ç”Ÿæ•°æ®æŸ¥è¯¢æ—¶é—´ | 5åˆ†é’Ÿ | 5ç§’ | -98% |
| | æˆç»©å•ç”Ÿæˆæ—¶é—´ | 2å¤© | 2å°æ—¶ | -95% |
| | æ•™å¸ˆå¤‡è¯¾æ•ˆç‡ | åŸºå‡† | +30% | +30% |
| **è´¨é‡æŒ‡æ ‡** | å­¦ç”Ÿç”»åƒå‡†ç¡®ç‡ | N/A | 92% | - |
| | æ¨èè¯¾ç¨‹æ¥å—ç‡ | N/A | 78% | - |
| | æ•°æ®ä¸€è‡´æ€§ | 70% | 99% | +41% |
| **æˆæœ¬æŒ‡æ ‡** | äººå·¥æˆæœ¬/å­¦ç”Ÿ | Â¥120 | Â¥75 | -37% |
| | ç³»ç»Ÿç»´æŠ¤æˆæœ¬ | åŸºå‡† | -25% | -25% |

### 7.2 ROIè®¡ç®—

**æŠ•èµ„æˆæœ¬ï¼ˆ3å¹´æœŸï¼‰**ï¼š
- å¹³å°å¼€å‘ä¸é›†æˆï¼šÂ¥360ä¸‡
- æ•°æ®è¿ç§»ä¸æ¸…æ´—ï¼šÂ¥80ä¸‡
- åŸ¹è®­ä¸å’¨è¯¢ï¼šÂ¥60ä¸‡
- **æ€»æŠ•èµ„**ï¼šÂ¥500ä¸‡

**æ”¶ç›Šè®¡ç®—ï¼ˆå¹´åŒ–ï¼‰**ï¼š
- è¿è¥æ•ˆç‡æå‡ï¼šÂ¥180ä¸‡/å¹´
- å‡å°‘é‡å¤åŠ³åŠ¨ï¼šÂ¥120ä¸‡/å¹´
- æ–°ä¸šåŠ¡æ”¶å…¥ï¼šÂ¥200ä¸‡/å¹´
- **å¹´åº¦æ€»æ”¶ç›Š**ï¼šÂ¥500ä¸‡

**ROIåˆ†æ**ï¼š
```
æŠ•èµ„å›æ”¶æœŸ = 500 / 500 = 1å¹´

3å¹´ROI = (500 Ã— 3 - 500) / 500 Ã— 100% = 200%

5å¹´NPVï¼ˆæŠ˜ç°ç‡10%ï¼‰= Â¥1,396ä¸‡
```

---

**åˆ›å»ºæ—¶é—´**ï¼š2026-02-15  
**ç‰ˆæœ¬**ï¼š1.0.0
