# å­¦ç”Ÿä¿¡æ¯ç³»ç»ŸSchemaå®è·µæ¡ˆä¾‹

## ğŸ“‘ ç›®å½•

- [å­¦ç”Ÿä¿¡æ¯ç³»ç»ŸSchemaå®è·µæ¡ˆä¾‹](#å­¦ç”Ÿä¿¡æ¯ç³»ç»Ÿschemaå®è·µæ¡ˆä¾‹)
  - [ğŸ“‘ ç›®å½•](#-ç›®å½•)
  - [1. æ¡ˆä¾‹æ¦‚è¿°](#1-æ¡ˆä¾‹æ¦‚è¿°)
  - [2. æ¡ˆä¾‹1ï¼šé«˜æ ¡æ™ºæ…§æ ¡å›­å­¦ç”ŸæœåŠ¡å¹³å°](#2-æ¡ˆä¾‹1é«˜æ ¡æ™ºæ…§æ ¡å›­å­¦ç”ŸæœåŠ¡å¹³å°)
    - [2.1 ä¸šåŠ¡èƒŒæ™¯](#21-ä¸šåŠ¡èƒŒæ™¯)
    - [2.2 ä¸šåŠ¡ç—›ç‚¹](#22-ä¸šåŠ¡ç—›ç‚¹)
    - [2.3 ä¸šåŠ¡ç›®æ ‡](#23-ä¸šåŠ¡ç›®æ ‡)
    - [2.4 æŠ€æœ¯æŒ‘æˆ˜](#24-æŠ€æœ¯æŒ‘æˆ˜)
    - [2.5 å®Œæ•´ä»£ç å®ç°](#25-å®Œæ•´ä»£ç å®ç°)
    - [2.6 æ•ˆæœè¯„ä¼°](#26-æ•ˆæœè¯„ä¼°)
  - [3. æ¡ˆä¾‹æ€»ç»“](#3-æ¡ˆä¾‹æ€»ç»“)

---

## 1. æ¡ˆä¾‹æ¦‚è¿°

æœ¬æ–‡æ¡£æä¾›SIS Schemaåœ¨é«˜æ ¡å­¦ç”Ÿç®¡ç†é¢†åŸŸçš„å®è·µæ¡ˆä¾‹ã€‚

---

## 2. æ¡ˆä¾‹1ï¼šé«˜æ ¡æ™ºæ…§æ ¡å›­å­¦ç”ŸæœåŠ¡å¹³å°

### 2.1 ä¸šåŠ¡èƒŒæ™¯

**ä¼ä¸šæ¦‚å†µ**ï¼šæŸç»¼åˆæ€§å¤§å­¦ï¼ˆä»¥ä¸‹ç®€ç§°"På¤§å­¦"ï¼‰ï¼Œåœ¨æ ¡ç”Ÿè¶…è¿‡4ä¸‡äººï¼Œæ•™èŒå·¥5000äººï¼Œè®¾æœ‰20ä¸ªå­¦é™¢ï¼Œ80ä¸ªæœ¬ç§‘ä¸“ä¸šã€‚

### 2.2 ä¸šåŠ¡ç—›ç‚¹

1. **ä¿¡æ¯å­¤å²›ä¸¥é‡**ï¼šæ•™åŠ¡ã€å­¦å·¥ã€å®¿ç®¡ã€è´¢åŠ¡ç­‰10ä½™å¥—ç³»ç»Ÿç‹¬ç«‹è¿è¡Œï¼Œæ•°æ®ä¸äº’é€š
2. **åŠäº‹æµç¨‹ç¹ç**ï¼šå­¦ç”ŸåŠäº‹éœ€è¦è·‘å¤šä¸ªéƒ¨é—¨ï¼Œå¹³å‡åŠäº‹æ—¶é—´2å°æ—¶ä»¥ä¸Š
3. **æ•°æ®è´¨é‡å·®**ï¼šå­¦ç”Ÿä¿¡æ¯åˆ†æ•£ç®¡ç†ï¼Œæ•°æ®ä¸ä¸€è‡´ï¼Œç»Ÿè®¡å›°éš¾
4. **æœåŠ¡ä½“éªŒå·®**ï¼šç¼ºä¹ç»Ÿä¸€æœåŠ¡å…¥å£ï¼Œå­¦ç”Ÿä½“éªŒå·®
5. **å†³ç­–æ”¯æ’‘å¼±**ï¼šç¼ºä¹æ•°æ®åˆ†æï¼Œç®¡ç†å†³ç­–ä¾èµ–ç»éªŒ

### 2.3 ä¸šåŠ¡ç›®æ ‡

1. **æ•°æ®äº’è”äº’é€š**ï¼šå»ºç«‹ç»Ÿä¸€æ•°æ®æ ‡å‡†ï¼Œå®ç°æ•°æ®å…±äº«
2. **ä¸€ç«™å¼æœåŠ¡**ï¼šå»ºè®¾å­¦ç”Ÿä¸€ç«™å¼æœåŠ¡å¹³å°ï¼ŒåŠäº‹æ—¶é—´ç¼©çŸ­è‡³10åˆ†é’Ÿ
3. **æå‡æ•°æ®è´¨é‡**ï¼šå»ºç«‹æ•°æ®æ²»ç†ä½“ç³»ï¼Œæ•°æ®å‡†ç¡®ç‡è¾¾åˆ°99%
4. **ä¼˜åŒ–æœåŠ¡ä½“éªŒ**ï¼šç§»åŠ¨ç«¯å…¨è¦†ç›–ï¼Œå­¦ç”Ÿæ»¡æ„åº¦æå‡è‡³95%
5. **æ•°æ®é©±åŠ¨å†³ç­–**ï¼šå»ºç«‹æ•°æ®åˆ†æå¹³å°ï¼Œæ”¯æ’‘ç®¡ç†å†³ç­–

### 2.4 æŠ€æœ¯æŒ‘æˆ˜

1. **å¤šç³»ç»Ÿé›†æˆ**ï¼šéœ€è¦é›†æˆ10ä½™å¥—å¼‚æ„ç³»ç»Ÿ
2. **æ•°æ®å®‰å…¨**ï¼šå­¦ç”Ÿéšç§æ•°æ®ä¿æŠ¤
3. **é«˜å¹¶å‘è®¿é—®**ï¼šé€‰è¯¾ã€æŸ¥æˆç»©ç­‰åœºæ™¯å³°å€¼å¹¶å‘é«˜
4. **å¾®æœåŠ¡æ¶æ„**ï¼šç³»ç»Ÿéœ€è¦æ”¯æŒå¼¹æ€§æ‰©å±•

### 2.5 å®Œæ•´ä»£ç å®ç°

```python
#!/usr/bin/env python3
"""
é«˜æ ¡æ™ºæ…§æ ¡å›­å­¦ç”ŸæœåŠ¡å¹³å°
åŠŸèƒ½ï¼šå­¦ç”Ÿç®¡ç†ã€æ•™åŠ¡ç®¡ç†ã€å®¿èˆç®¡ç†ã€è´¢åŠ¡ç®¡ç†
"""

from datetime import datetime, date
from typing import Dict, List, Optional
from dataclasses import dataclass, field
from enum import Enum
import uuid


class Gender(str, Enum):
    """æ€§åˆ«"""
    MALE = "M"
    FEMALE = "F"


class StudentStatus(str, Enum):
    """å­¦ç”ŸçŠ¶æ€"""
    ACTIVE = "active"
    SUSPENDED = "suspended"
    GRADUATED = "graduated"
    WITHDRAWN = "withdrawn"


class CourseStatus(str, Enum):
    """è¯¾ç¨‹çŠ¶æ€"""
    ENROLLED = "enrolled"
    IN_PROGRESS = "in_progress"
    COMPLETED = "completed"
    DROPPED = "dropped"


@dataclass
class Student:
    """å­¦ç”Ÿ"""
    student_id: str
    name: str
    gender: Gender
    birth_date: date
    id_number: str  # èº«ä»½è¯å·
    
    college: str
    major: str
    grade: int
    class_name: str
    
    phone: str
    email: str
    address: str
    
    status: StudentStatus = StudentStatus.ACTIVE
    enrollment_date: date = field(default_factory=date.today)
    expected_graduation: date = field(default_factory=lambda: date.today().replace(year=date.today().year+4))
    
    # å­¦ç±ä¿¡æ¯
    credits_earned: int = 0
    gpa: float = 0.0
    
    # å®¿èˆä¿¡æ¯
    dormitory_building: str = ""
    dormitory_room: str = ""


@dataclass
class Course:
    """è¯¾ç¨‹"""
    course_code: str
    course_name: str
    credits: int
    hours: int
    college: str
    
    instructor: str
    semester: str
    classroom: str
    schedule: str  # ä¾‹å¦‚ï¼šå‘¨ä¸€1-2èŠ‚
    
    capacity: int = 60
    enrolled: int = 0


@dataclass
class Enrollment:
    """é€‰è¯¾è®°å½•"""
    enrollment_id: str
    student_id: str
    course_code: str
    semester: str
    status: CourseStatus
    
    midterm_score: Optional[float] = None
    final_score: Optional[float] = None
    total_score: Optional[float] = None
    grade: Optional[str] = None  # A, B, C, D, F


@dataclass
class Dormitory:
    """å®¿èˆ"""
    building_id: str
    room_number: str
    capacity: int
    current_occupants: int = 0
    residents: List[str] = field(default_factory=list)


@dataclass
class FinancialRecord:
    """è´¢åŠ¡è®°å½•"""
    record_id: str
    student_id: str
    record_type: str  # tuition, accommodation, scholarship
    amount: float
    description: str
    status: str = "pending"  # pending, paid, refunded
    created_at: datetime = field(default_factory=datetime.now)


class StudentInformationSystem:
    """å­¦ç”Ÿä¿¡æ¯ç³»ç»Ÿ"""
    
    def __init__(self):
        self.students: Dict[str, Student] = {}
        self.courses: Dict[str, Course] = {}
        self.enrollments: Dict[str, Enrollment] = {}
        self.dormitories: Dict[str, Dormitory] = {}
        self.financial_records: Dict[str, FinancialRecord] = {}
        
        self.service_requests: List[Dict] = []
    
    def add_student(self, student: Student):
        """æ·»åŠ å­¦ç”Ÿ"""
        self.students[student.student_id] = student
    
    def add_course(self, course: Course):
        """æ·»åŠ è¯¾ç¨‹"""
        self.courses[course.course_code] = course
    
    def enroll_course(self, student_id: str, course_code: str, semester: str) -> Enrollment:
        """é€‰è¯¾"""
        student = self.students.get(student_id)
        course = self.courses.get(course_code)
        
        if not student or not course:
            raise ValueError("Student or course not found")
        
        if course.enrolled >= course.capacity:
            raise ValueError("Course is full")
        
        enrollment = Enrollment(
            enrollment_id=f"ENR-{uuid.uuid4().hex[:8]}",
            student_id=student_id,
            course_code=course_code,
            semester=semester,
            status=CourseStatus.ENROLLED
        )
        
        self.enrollments[enrollment.enrollment_id] = enrollment
        course.enrolled += 1
        
        return enrollment
    
    def record_grade(self, enrollment_id: str, midterm: float, final: float):
        """è®°å½•æˆç»©"""
        enrollment = self.enrollments.get(enrollment_id)
        if not enrollment:
            return
        
        enrollment.midterm_score = midterm
        enrollment.final_score = final
        enrollment.total_score = midterm * 0.4 + final * 0.6
        
        # è®¡ç®—ç­‰çº§
        if enrollment.total_score >= 90:
            enrollment.grade = "A"
        elif enrollment.total_score >= 80:
            enrollment.grade = "B"
        elif enrollment.total_score >= 70:
            enrollment.grade = "C"
        elif enrollment.total_score >= 60:
            enrollment.grade = "D"
        else:
            enrollment.grade = "F"
        
        enrollment.status = CourseStatus.COMPLETED
        
        # æ›´æ–°å­¦ç”Ÿå­¦åˆ†å’ŒGPA
        self._update_student_academic(enrollment.student_id)
    
    def _update_student_academic(self, student_id: str):
        """æ›´æ–°å­¦ç”Ÿå­¦ä¸šä¿¡æ¯"""
        student = self.students.get(student_id)
        if not student:
            return
        
        # è®¡ç®—å·²ä¿®å­¦åˆ†
        completed_courses = [
            e for e in self.enrollments.values()
            if e.student_id == student_id and e.status == CourseStatus.COMPLETED
        ]
        
        total_credits = 0
        weighted_score = 0
        
        for enrollment in completed_courses:
            course = self.courses.get(enrollment.course_code)
            if course:
                total_credits += course.credits
                weighted_score += enrollment.total_score * course.credits
        
        student.credits_earned = total_credits
        student.gpa = round(weighted_score / total_credits / 20, 2) if total_credits > 0 else 0
    
    def assign_dormitory(self, student_id: str, building: str, room: str):
        """åˆ†é…å®¿èˆ"""
        student = self.students.get(student_id)
        if not student:
            return
        
        dorm_key = f"{building}-{room}"
        
        if dorm_key not in self.dormitories:
            self.dormitories[dorm_key] = Dormitory(
                building_id=building,
                room_number=room,
                capacity=4
            )
        
        dorm = self.dormitories[dorm_key]
        if dorm.current_occupants < dorm.capacity:
            dorm.residents.append(student_id)
            dorm.current_occupants += 1
            
            student.dormitory_building = building
            student.dormitory_room = room
    
    def create_financial_record(self, student_id: str, record_type: str,
                               amount: float, description: str) -> FinancialRecord:
        """åˆ›å»ºè´¢åŠ¡è®°å½•"""
        record = FinancialRecord(
            record_id=f"FIN-{uuid.uuid4().hex[:8]}",
            student_id=student_id,
            record_type=record_type,
            amount=amount,
            description=description
        )
        self.financial_records[record.record_id] = record
        return record
    
    def submit_service_request(self, student_id: str, service_type: str,
                              description: str) -> str:
        """æäº¤æœåŠ¡ç”³è¯·"""
        request_id = f"REQ-{uuid.uuid4().hex[:8]}"
        
        self.service_requests.append({
            "request_id": request_id,
            "student_id": student_id,
            "service_type": service_type,
            "description": description,
            "status": "submitted",
            "created_at": datetime.now().isoformat()
        })
        
        return request_id
    
    def get_student_profile(self, student_id: str) -> Dict:
        """è·å–å­¦ç”Ÿæ¡£æ¡ˆ"""
        student = self.students.get(student_id)
        if not student:
            return {}
        
        # è·å–æœ¬å­¦æœŸè¯¾ç¨‹
        current_semester = "2024-2025-2"
        current_courses = [
            e for e in self.enrollments.values()
            if e.student_id == student_id and e.semester == current_semester
        ]
        
        # è·å–è´¢åŠ¡è®°å½•
        financials = [
            r for r in self.financial_records.values()
            if r.student_id == student_id
        ]
        
        return {
            "student_id": student_id,
            "name": student.name,
            "college": student.college,
            "major": student.major,
            "grade": student.grade,
            "gpa": student.gpa,
            "credits_earned": student.credits_earned,
            "dormitory": f"{student.dormitory_building}-{student.dormitory_room}",
            "current_courses": len(current_courses),
            "financial_balance": sum(r.amount for r in financials if r.status == "pending")
        }
    
    def get_class_statistics(self, college: str, major: str, grade: int) -> Dict:
        """è·å–ç­çº§ç»Ÿè®¡"""
        students = [
            s for s in self.students.values()
            if s.college == college and s.major == major and s.grade == grade
        ]
        
        if not students:
            return {}
        
        avg_gpa = sum(s.gpa for s in students) / len(students)
        
        return {
            "college": college,
            "major": major,
            "grade": grade,
            "student_count": len(students),
            "average_gpa": round(avg_gpa, 2),
            "total_credits": sum(s.credits_earned for s in students)
        }


def main():
    """å­¦ç”Ÿä¿¡æ¯ç³»ç»Ÿæ¼”ç¤º"""
    
    print("=" * 60)
    print("é«˜æ ¡æ™ºæ…§æ ¡å›­å­¦ç”ŸæœåŠ¡å¹³å°æ¼”ç¤º")
    print("=" * 60)
    
    sis = StudentInformationSystem()
    
    # 1. æ·»åŠ å­¦ç”Ÿ
    print("\n[1] æ·»åŠ å­¦ç”Ÿ")
    for i in range(1, 6):
        student = Student(
            student_id=f"2024{i:04d}",
            name=f"å­¦ç”Ÿ{i}",
            gender=Gender.MALE if i % 2 == 1 else Gender.FEMALE,
            birth_date=date(2005, 5, i),
            id_number=f"1101012005050{i:04d}",
            college="è®¡ç®—æœºå­¦é™¢",
            major="è½¯ä»¶å·¥ç¨‹",
            grade=1,
            class_name="è½¯ä»¶2401",
            phone=f"138{i:08d}",
            email=f"student{i}@university.edu.cn",
            address="åŒ—äº¬å¸‚"
        )
        sis.add_student(student)
    print(f"å·²æ·»åŠ  {len(sis.students)} åå­¦ç”Ÿ")
    
    # 2. æ·»åŠ è¯¾ç¨‹
    print("\n[2] æ·»åŠ è¯¾ç¨‹")
    courses = [
        ("CS101", "è®¡ç®—æœºå¯¼è®º", 3, 48),
        ("CS102", "ç¨‹åºè®¾è®¡åŸºç¡€", 4, 64),
        ("MATH101", "é«˜ç­‰æ•°å­¦", 5, 80)
    ]
    for code, name, credits, hours in courses:
        course = Course(
            course_code=code,
            course_name=name,
            credits=credits,
            hours=hours,
            college="è®¡ç®—æœºå­¦é™¢",
            instructor=f"æ•™å¸ˆ{code}",
            semester="2024-2025-2",
            classroom="æ•™å­¦æ¥¼A101"
        )
        sis.add_course(course)
    print(f"å·²æ·»åŠ  {len(sis.courses)} é—¨è¯¾ç¨‹")
    
    # 3. é€‰è¯¾
    print("\n[3] å­¦ç”Ÿé€‰è¯¾")
    for student_id in list(sis.students.keys())[:3]:
        for course_code in ["CS101", "CS102"]:
            try:
                enrollment = sis.enroll_course(student_id, course_code, "2024-2025-2")
                print(f"  {student_id} é€‰ä¿® {course_code}")
            except ValueError as e:
                print(f"  {student_id} é€‰è¯¾å¤±è´¥: {e}")
    
    # 4. æˆç»©å½•å…¥
    print("\n[4] æˆç»©å½•å…¥")
    for enrollment in list(sis.enrollments.values())[:3]:
        sis.record_grade(enrollment.enrollment_id, 85, 90)
        print(f"  {enrollment.student_id} - {enrollment.course_code}: {enrollment.grade}")
    
    # 5. å®¿èˆåˆ†é…
    print("\n[5] å®¿èˆåˆ†é…")
    for student_id in list(sis.students.keys())[:4]:
        sis.assign_dormitory(student_id, "A1", "101")
    print("å®¿èˆåˆ†é…å®Œæˆ")
    
    # 6. å­¦ç”Ÿæ¡£æ¡ˆ
    print("\n[6] å­¦ç”Ÿæ¡£æ¡ˆ")
    profile = sis.get_student_profile("20240001")
    print(f"å­¦ç”Ÿ: {profile['name']}")
    print(f"GPA: {profile['gpa']}")
    print(f"å·²ä¿®å­¦åˆ†: {profile['credits_earned']}")
    print(f"å®¿èˆ: {profile['dormitory']}")
    
    # 7. ç­çº§ç»Ÿè®¡
    print("\n[7] ç­çº§ç»Ÿè®¡")
    stats = sis.get_class_statistics("è®¡ç®—æœºå­¦é™¢", "è½¯ä»¶å·¥ç¨‹", 1)
    print(f"ç­çº§äººæ•°: {stats['student_count']}")
    print(f"å¹³å‡GPA: {stats['average_gpa']}")


if __name__ == "__main__":
    main()
```

### 2.6 æ•ˆæœè¯„ä¼°

| æŒ‡æ ‡ | åŸºçº¿å€¼ | ç›®æ ‡å€¼ | å®é™…å€¼ | è¾¾æˆç‡ |
|------|--------|--------|--------|--------|
| åŠäº‹æ—¶é—´ | 2å°æ—¶ | â‰¤10åˆ†é’Ÿ | 8åˆ†é’Ÿ | 125% |
| æ•°æ®å‡†ç¡®ç‡ | 85% | 99% | 99.5% | 100% |
| å­¦ç”Ÿæ»¡æ„åº¦ | 70% | 95% | 96% | 101% |
| ç³»ç»Ÿå¯ç”¨æ€§ | 99% | 99.9% | 99.95% | 100% |

**ROIåˆ†æ**ï¼š
- é¡¹ç›®æ€»æŠ•èµ„ï¼š3000ä¸‡å…ƒ
- å¹´åº¦æ€»æ”¶ç›Šï¼š8000ä¸‡å…ƒ
- **æŠ•èµ„å›æ”¶æœŸï¼š4.5ä¸ªæœˆ**
- **3å¹´ROIï¼š700%**

---

## 3. æ¡ˆä¾‹æ€»ç»“

**å…³é”®æˆåŠŸå› ç´ **ï¼š
1. æ•°æ®æ ‡å‡†ç»Ÿä¸€æ˜¯åŸºç¡€
2. æœåŠ¡æ•´åˆæ˜¯å…³é”®
3. ç”¨æˆ·ä½“éªŒæ˜¯æ ¸å¿ƒ

**åˆ›å»ºæ—¶é—´**ï¼š2025-01-21  
**æœ€åæ›´æ–°**ï¼š2025-02-15
