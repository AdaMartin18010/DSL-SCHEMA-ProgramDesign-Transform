# å­¦ä¹ ç®¡ç†ç³»ç»ŸSchemaå®è·µæ¡ˆä¾‹

## ğŸ“‘ ç›®å½•

- [å­¦ä¹ ç®¡ç†ç³»ç»ŸSchemaå®è·µæ¡ˆä¾‹](#å­¦ä¹ ç®¡ç†ç³»ç»Ÿschemaå®è·µæ¡ˆä¾‹)
  - [ğŸ“‘ ç›®å½•](#-ç›®å½•)
  - [1. æ¡ˆä¾‹æ¦‚è¿°](#1-æ¡ˆä¾‹æ¦‚è¿°)
  - [2. æ¡ˆä¾‹1ï¼šä¼ä¸šå¤§å­¦æ•°å­—åŒ–å­¦ä¹ å¹³å°](#2-æ¡ˆä¾‹1ä¼ä¸šå¤§å­¦æ•°å­—åŒ–å­¦ä¹ å¹³å°)
    - [2.1 ä¸šåŠ¡èƒŒæ™¯](#21-ä¸šåŠ¡èƒŒæ™¯)
    - [2.2 ä¸šåŠ¡ç—›ç‚¹](#22-ä¸šåŠ¡ç—›ç‚¹)
    - [2.3 ä¸šåŠ¡ç›®æ ‡](#23-ä¸šåŠ¡ç›®æ ‡)
    - [2.4 æŠ€æœ¯æŒ‘æˆ˜](#24-æŠ€æœ¯æŒ‘æˆ˜)
    - [2.5 å®Œæ•´ä»£ç å®ç°](#25-å®Œæ•´ä»£ç å®ç°)
    - [2.6 æ•ˆæœè¯„ä¼°](#26-æ•ˆæœè¯„ä¼°)
  - [3. æ¡ˆä¾‹æ€»ç»“](#3-æ¡ˆä¾‹æ€»ç»“)

---

## 1. æ¡ˆä¾‹æ¦‚è¿°

æœ¬æ–‡æ¡£æä¾›LMS Schemaåœ¨ä¼ä¸šåŸ¹è®­é¢†åŸŸçš„å®è·µæ¡ˆä¾‹ã€‚

---

## 2. æ¡ˆä¾‹1ï¼šä¼ä¸šå¤§å­¦æ•°å­—åŒ–å­¦ä¹ å¹³å°

### 2.1 ä¸šåŠ¡èƒŒæ™¯

**ä¼ä¸šæ¦‚å†µ**ï¼šæŸå¤§å‹åˆ¶é€ ä¼ä¸šï¼ˆä»¥ä¸‹ç®€ç§°"Mä¼ä¸š"ï¼‰ï¼Œå‘˜å·¥æ€»æ•°è¶…è¿‡5ä¸‡äººï¼Œå¹´åŸ¹è®­æŠ•å…¥è¶…è¿‡5000ä¸‡å…ƒï¼Œåœ¨å…¨å›½è®¾æœ‰20ä¸ªåŸ¹è®­ä¸­å¿ƒã€‚

### 2.2 ä¸šåŠ¡ç—›ç‚¹

1. **åŸ¹è®­è¦†ç›–éš¾**ï¼šåˆ†æ”¯æœºæ„åˆ†æ•£ï¼Œçº¿ä¸‹åŸ¹è®­ç»„ç»‡å›°éš¾ï¼ŒåŸ¹è®­è¦†ç›–ç‡ä»…60%
2. **æ•ˆæœéš¾è¯„ä¼°**ï¼šç¼ºä¹å­¦ä¹ æ•°æ®è·Ÿè¸ªï¼ŒåŸ¹è®­æ•ˆæœéš¾ä»¥é‡åŒ–è¯„ä¼°
3. **å†…å®¹æ›´æ–°æ…¢**ï¼šåŸ¹è®­èµ„æ–™æ›´æ–°å‘¨æœŸé•¿ï¼ŒçŸ¥è¯†ä¼ é€’æ»å
4. **å­¦ä¹ ä½“éªŒå·®**ï¼šä¼ ç»Ÿe-learningå½¢å¼æ¯ç‡¥ï¼Œå‘˜å·¥å­¦ä¹ ç§¯ææ€§ä½
5. **è¯ä¹¦ç®¡ç†ä¹±**ï¼šåŸ¹è®­è¯ä¹¦åˆ†æ•£ç®¡ç†ï¼ŒæŸ¥è¯¢éªŒè¯å›°éš¾

### 2.3 ä¸šåŠ¡ç›®æ ‡

1. **æå‡åŸ¹è®­è¦†ç›–**ï¼šå®ç°100%å‘˜å·¥åœ¨çº¿å­¦ä¹ ï¼ŒåŸ¹è®­è¦†ç›–ç‡æå‡è‡³95%
2. **ç²¾å‡†æ•ˆæœè¯„ä¼°**ï¼šå»ºç«‹å­¦ä¹ æ•°æ®åˆ†æä½“ç³»ï¼ŒåŸ¹è®­æ•ˆæœå¯é‡åŒ–
3. **çŸ¥è¯†å¿«é€Ÿè¿­ä»£**ï¼šå»ºç«‹çŸ¥è¯†ç®¡ç†é—­ç¯ï¼Œå†…å®¹æ›´æ–°å‘¨æœŸç¼©çŸ­è‡³1å‘¨
4. **æå‡å­¦ä¹ ä½“éªŒ**ï¼šæ¸¸æˆåŒ–ã€ç¤¾äº¤åŒ–å­¦ä¹ ï¼Œå‘˜å·¥æ»¡æ„åº¦æå‡è‡³90%
5. **è¯ä¹¦æ•°å­—åŒ–**ï¼šå®ç°åŸ¹è®­è¯ä¹¦åŒºå—é“¾å­˜è¯ï¼Œç»ˆèº«å¯æŸ¥

### 2.4 æŠ€æœ¯æŒ‘æˆ˜

1. **å¤§è§„æ¨¡å¹¶å‘**ï¼š5ä¸‡å‘˜å·¥åŒæ—¶åœ¨çº¿å­¦ä¹ ï¼Œå³°å€¼å¹¶å‘1ä¸‡äºº
2. **å¤šåª’ä½“å¤„ç†**ï¼šæ”¯æŒè§†é¢‘ã€ç›´æ’­ã€VRç­‰å¤šç§å­¦ä¹ å½¢å¼
3. **æ•°æ®å®‰å…¨**ï¼šå‘˜å·¥éšç§æ•°æ®ä¿æŠ¤ï¼Œç¬¦åˆç­‰ä¿ä¸‰çº§è¦æ±‚
4. **ç§»åŠ¨ä¼˜å…ˆ**ï¼šæ”¯æŒå¤šç»ˆç«¯æ— ç¼å­¦ä¹ ä½“éªŒ

### 2.5 å®Œæ•´ä»£ç å®ç°

```python
#!/usr/bin/env python3
"""
ä¼ä¸šå¤§å­¦æ•°å­—åŒ–å­¦ä¹ å¹³å°
åŠŸèƒ½ï¼šè¯¾ç¨‹ç®¡ç†ã€å­¦ä¹ è·Ÿè¸ªã€è€ƒè¯•è¯„ä¼°ã€è¯ä¹¦ç®¡ç†
"""

from datetime import datetime, date, timedelta
from typing import Dict, List, Optional
from dataclasses import dataclass, field
from enum import Enum
import uuid
import hashlib


class CourseStatus(str, Enum):
    """è¯¾ç¨‹çŠ¶æ€"""
    DRAFT = "draft"
    PUBLISHED = "published"
    ARCHIVED = "archived"


class EnrollmentStatus(str, Enum):
    """æ³¨å†ŒçŠ¶æ€"""
    ENROLLED = "enrolled"
    IN_PROGRESS = "in_progress"
    COMPLETED = "completed"
    DROPPED = "dropped"


class ContentType(str, Enum):
    """å†…å®¹ç±»å‹"""
    VIDEO = "video"
    DOCUMENT = "document"
    QUIZ = "quiz"
    ASSIGNMENT = "assignment"
    LIVE = "live"


@dataclass
class Course:
    """è¯¾ç¨‹"""
    course_id: str
    course_code: str
    title: str
    description: str
    category: str
    duration_minutes: int
    difficulty: str  # beginner, intermediate, advanced
    instructor: str
    status: CourseStatus
    
    contents: List[Dict] = field(default_factory=list)
    created_at: datetime = field(default_factory=datetime.now)
    published_at: Optional[datetime] = None
    
    def add_content(self, content_type: ContentType, title: str, url: str, duration: int):
        """æ·»åŠ è¯¾ç¨‹å†…å®¹"""
        self.contents.append({
            "content_id": f"CNT-{uuid.uuid4().hex[:8]}",
            "type": content_type.value,
            "title": title,
            "url": url,
            "duration": duration,
            "order": len(self.contents) + 1
        })


@dataclass
class Employee:
    """å‘˜å·¥"""
    employee_id: str
    name: str
    department: str
    position: str
    email: str
    join_date: date
    
    total_learning_hours: float = 0.0
    completed_courses: int = 0
    skill_points: int = 0
    level: str = "L1"  # L1, L2, L3, L4


@dataclass
class Enrollment:
    """å­¦ä¹ æ³¨å†Œ"""
    enrollment_id: str
    employee_id: str
    course_id: str
    status: EnrollmentStatus
    
    enrolled_at: datetime = field(default_factory=datetime.now)
    started_at: Optional[datetime] = None
    completed_at: Optional[datetime] = None
    
    progress_percentage: float = 0.0
    total_time_spent: int = 0  # åˆ†é’Ÿ
    quiz_scores: List[float] = field(default_factory=list)
    
    def start(self):
        """å¼€å§‹å­¦ä¹ """
        self.status = EnrollmentStatus.IN_PROGRESS
        self.started_at = datetime.now()
    
    def complete(self):
        """å®Œæˆå­¦ä¹ """
        self.status = EnrollmentStatus.COMPLETED
        self.completed_at = datetime.now()
        self.progress_percentage = 100.0
    
    def update_progress(self, percentage: float, time_spent: int):
        """æ›´æ–°è¿›åº¦"""
        self.progress_percentage = min(100.0, percentage)
        self.total_time_spent += time_spent


@dataclass
class Certificate:
    """è¯ä¹¦"""
    certificate_id: str
    employee_id: str
    course_id: str
    issue_date: date
    expiry_date: Optional[date] = None
    
    blockchain_hash: Optional[str] = None
    
    def generate_hash(self) -> str:
        """ç”ŸæˆåŒºå—é“¾å“ˆå¸Œ"""
        data = f"{self.certificate_id}{self.employee_id}{self.course_id}{self.issue_date}"
        self.blockchain_hash = hashlib.sha256(data.encode()).hexdigest()
        return self.blockchain_hash


class LMSSystem:
    """å­¦ä¹ ç®¡ç†ç³»ç»Ÿ"""
    
    def __init__(self):
        self.courses: Dict[str, Course] = {}
        self.employees: Dict[str, Employee] = {}
        self.enrollments: Dict[str, Enrollment] = {}
        self.certificates: Dict[str, Certificate] = {}
        self.learning_paths: Dict[str, List[str]] = {}  # å­¦ä¹ è·¯å¾„
    
    def add_course(self, course: Course):
        """æ·»åŠ è¯¾ç¨‹"""
        self.courses[course.course_id] = course
    
    def add_employee(self, employee: Employee):
        """æ·»åŠ å‘˜å·¥"""
        self.employees[employee.employee_id] = employee
    
    def enroll(self, employee_id: str, course_id: str) -> Enrollment:
        """æ³¨å†Œè¯¾ç¨‹"""
        enrollment_id = f"ENR-{uuid.uuid4().hex[:8]}"
        enrollment = Enrollment(
            enrollment_id=enrollment_id,
            employee_id=employee_id,
            course_id=course_id,
            status=EnrollmentStatus.ENROLLED
        )
        self.enrollments[enrollment_id] = enrollment
        return enrollment
    
    def create_learning_path(self, path_name: str, course_ids: List[str]):
        """åˆ›å»ºå­¦ä¹ è·¯å¾„"""
        self.learning_paths[path_name] = course_ids
    
    def record_learning_activity(self, enrollment_id: str, content_id: str,
                                 time_spent: int, completed: bool):
        """è®°å½•å­¦ä¹ æ´»åŠ¨"""
        enrollment = self.enrollments.get(enrollment_id)
        if not enrollment:
            return
        
        course = self.courses.get(enrollment.course_id)
        if not course:
            return
        
        # è®¡ç®—è¿›åº¦
        total_contents = len(course.contents)
        completed_contents = int(enrollment.progress_percentage / 100 * total_contents)
        if completed:
            completed_contents += 1
        
        new_progress = (completed_contents / total_contents) * 100
        enrollment.update_progress(new_progress, time_spent)
        
        # å¦‚æœå®Œæˆï¼Œé¢å‘è¯ä¹¦
        if enrollment.progress_percentage >= 100:
            enrollment.complete()
            self._issue_certificate(enrollment)
            self._update_employee_stats(enrollment.employee_id, course.duration_minutes)
    
    def _issue_certificate(self, enrollment: Enrollment):
        """é¢å‘è¯ä¹¦"""
        cert = Certificate(
            certificate_id=f"CERT-{uuid.uuid4().hex[:8]}",
            employee_id=enrollment.employee_id,
            course_id=enrollment.course_id,
            issue_date=date.today()
        )
        cert.generate_hash()
        self.certificates[cert.certificate_id] = cert
    
    def _update_employee_stats(self, employee_id: str, course_duration: int):
        """æ›´æ–°å‘˜å·¥å­¦ä¹ ç»Ÿè®¡"""
        employee = self.employees.get(employee_id)
        if employee:
            employee.total_learning_hours += course_duration / 60
            employee.completed_courses += 1
            employee.skill_points += int(course_duration / 10)
            
            # å‡çº§åˆ¤å®š
            if employee.completed_courses >= 10:
                employee.level = "L2"
            if employee.completed_courses >= 30:
                employee.level = "L3"
    
    def get_employee_report(self, employee_id: str) -> Dict:
        """è·å–å‘˜å·¥å­¦ä¹ æŠ¥å‘Š"""
        employee = self.employees.get(employee_id)
        if not employee:
            return {}
        
        # è·å–å­¦ä¹ è®°å½•
        my_enrollments = [
            e for e in self.enrollments.values()
            if e.employee_id == employee_id
        ]
        
        completed = [e for e in my_enrollments if e.status == EnrollmentStatus.COMPLETED]
        in_progress = [e for e in my_enrollments if e.status == EnrollmentStatus.IN_PROGRESS]
        
        # è®¡ç®—å¹³å‡åˆ†
        all_scores = []
        for e in my_enrollments:
            all_scores.extend(e.quiz_scores)
        avg_score = sum(all_scores) / len(all_scores) if all_scores else 0
        
        return {
            "employee_id": employee_id,
            "name": employee.name,
            "department": employee.department,
            "level": employee.level,
            "total_learning_hours": round(employee.total_learning_hours, 1),
            "completed_courses": len(completed),
            "in_progress_courses": len(in_progress),
            "skill_points": employee.skill_points,
            "average_score": round(avg_score, 2)
        }
    
    def get_department_stats(self, department: str) -> Dict:
        """è·å–éƒ¨é—¨ç»Ÿè®¡"""
        dept_employees = [
            e for e in self.employees.values()
            if e.department == department
        ]
        
        if not dept_employees:
            return {}
        
        total_hours = sum(e.total_learning_hours for e in dept_employees)
        total_courses = sum(e.completed_courses for e in dept_employees)
        
        return {
            "department": department,
            "employee_count": len(dept_employees),
            "total_learning_hours": round(total_hours, 1),
            "avg_hours_per_employee": round(total_hours / len(dept_employees), 1),
            "total_completed_courses": total_courses,
            "completion_rate": round(len([e for e in dept_employees if e.completed_courses > 0]) / len(dept_employees) * 100, 1)
        }


def main():
    """LMSç³»ç»Ÿæ¼”ç¤º"""
    
    print("=" * 60)
    print("ä¼ä¸šå¤§å­¦æ•°å­—åŒ–å­¦ä¹ å¹³å°æ¼”ç¤º")
    print("=" * 60)
    
    lms = LMSSystem()
    
    # 1. æ·»åŠ è¯¾ç¨‹
    print("\n[1] æ·»åŠ è¯¾ç¨‹")
    course1 = Course(
        course_id="C001",
        course_code="SAFE-101",
        title="å®‰å…¨ç”Ÿäº§åŸºç¡€",
        description="ä¼ä¸šå®‰å…¨ç”Ÿäº§åŸºç¡€çŸ¥è¯†åŸ¹è®­",
        category="å®‰å…¨",
        duration_minutes=120,
        difficulty="beginner",
        instructor="å®‰å…¨éƒ¨",
        status=CourseStatus.PUBLISHED
    )
    course1.add_content(ContentType.VIDEO, "å®‰å…¨åˆ¶åº¦ä»‹ç»", "/video/intro.mp4", 30)
    course1.add_content(ContentType.DOCUMENT, "å®‰å…¨æ‰‹å†Œ", "/doc/manual.pdf", 60)
    course1.add_content(ContentType.QUIZ, "å®‰å…¨çŸ¥è¯†æµ‹è¯•", "/quiz/test.html", 30)
    lms.add_course(course1)
    
    course2 = Course(
        course_id="C002",
        course_code="MGT-201",
        title="å›¢é˜Ÿç®¡ç†æŠ€èƒ½",
        description="åŸºå±‚ç®¡ç†è€…å›¢é˜Ÿç®¡ç†æŠ€èƒ½åŸ¹è®­",
        category="ç®¡ç†",
        duration_minutes=180,
        difficulty="intermediate",
        instructor="äººåŠ›èµ„æºéƒ¨",
        status=CourseStatus.PUBLISHED
    )
    lms.add_course(course2)
    
    print(f"å·²æ·»åŠ  {len(lms.courses)} é—¨è¯¾ç¨‹")
    
    # 2. æ·»åŠ å‘˜å·¥
    print("\n[2] æ·»åŠ å‘˜å·¥")
    for i in range(1, 6):
        employee = Employee(
            employee_id=f"EMP-{i:04d}",
            name=f"å‘˜å·¥{i}",
            department=random.choice(["ç”Ÿäº§éƒ¨", "é”€å”®éƒ¨", "ç ”å‘éƒ¨"]),
            position=f"å²—ä½{i}",
            email=f"emp{i}@company.com",
            join_date=date(2020, 1, 1)
        )
        lms.add_employee(employee)
    print(f"å·²æ·»åŠ  {len(lms.employees)} åå‘˜å·¥")
    
    # 3. è¯¾ç¨‹æ³¨å†Œ
    print("\n[3] è¯¾ç¨‹æ³¨å†Œ")
    enrollment1 = lms.enroll("EMP-0001", "C001")
    enrollment1.start()
    print(f"EMP-0001 æ³¨å†Œè¯¾ç¨‹ C001")
    
    # 4. è®°å½•å­¦ä¹ æ´»åŠ¨
    print("\n[4] è®°å½•å­¦ä¹ ")
    lms.record_learning_activity(enrollment1.enrollment_id, "CNT-xxx", 30, True)
    lms.record_learning_activity(enrollment1.enrollment_id, "CNT-yyy", 60, True)
    lms.record_learning_activity(enrollment1.enrollment_id, "CNT-zzz", 30, True)
    
    print(f"å­¦ä¹ è¿›åº¦: {enrollment1.progress_percentage}%")
    print(f"çŠ¶æ€: {enrollment1.status.value}")
    
    # 5. å‘˜å·¥æŠ¥å‘Š
    print("\n[5] å‘˜å·¥å­¦ä¹ æŠ¥å‘Š")
    report = lms.get_employee_report("EMP-0001")
    print(f"å‘˜å·¥: {report['name']}")
    print(f"å­¦ä¹ æ—¶é•¿: {report['total_learning_hours']} å°æ—¶")
    print(f"å®Œæˆè¯¾ç¨‹: {report['completed_courses']} é—¨")
    print(f"å½“å‰ç­‰çº§: {report['level']}")
    
    # 6. éƒ¨é—¨ç»Ÿè®¡
    print("\n[6] éƒ¨é—¨ç»Ÿè®¡")
    for dept in ["ç”Ÿäº§éƒ¨", "é”€å”®éƒ¨", "ç ”å‘éƒ¨"]:
        stats = lms.get_department_stats(dept)
        if stats:
            print(f"  {dept}: {stats['employee_count']}äºº, "
                  f"äººå‡å­¦ä¹ {stats['avg_hours_per_employee']}å°æ—¶")


if __name__ == "__main__":
    import random
    main()
```

### 2.6 æ•ˆæœè¯„ä¼°

| æŒ‡æ ‡ | åŸºçº¿å€¼ | ç›®æ ‡å€¼ | å®é™…å€¼ | è¾¾æˆç‡ |
|------|--------|--------|--------|--------|
| åŸ¹è®­è¦†ç›–ç‡ | 60% | 95% | 97% | 102% |
| äººå‡å­¦ä¹ æ—¶é•¿ | 8å°æ—¶/å¹´ | 24å°æ—¶/å¹´ | 28å°æ—¶/å¹´ | 117% |
| å†…å®¹æ›´æ–°å‘¨æœŸ | 3ä¸ªæœˆ | â‰¤1å‘¨ | 3å¤© | 233% |
| å‘˜å·¥æ»¡æ„åº¦ | 65% | 90% | 92% | 102% |

**ROIåˆ†æ**ï¼š
- é¡¹ç›®æ€»æŠ•èµ„ï¼š2000ä¸‡å…ƒ
- å¹´åº¦æ€»æ”¶ç›Šï¼š5000ä¸‡å…ƒ
- **æŠ•èµ„å›æ”¶æœŸï¼š4.8ä¸ªæœˆ**
- **3å¹´ROIï¼š650%**

---

## 3. æ¡ˆä¾‹æ€»ç»“

**å…³é”®æˆåŠŸå› ç´ **ï¼š
1. å†…å®¹è´¨é‡æ˜¯æ ¸å¿ƒ
2. å­¦ä¹ ä½“éªŒæ˜¯å…³é”®
3. æ•°æ®é©±åŠ¨æ˜¯ä¿éšœ

**åˆ›å»ºæ—¶é—´**ï¼š2025-01-21  
**æœ€åæ›´æ–°**ï¼š2025-02-15
