# åœ¨çº¿æ•™è‚²å¹³å°Schemaå®è·µæ¡ˆä¾‹

## ğŸ“‘ ç›®å½•

- [åœ¨çº¿æ•™è‚²å¹³å°Schemaå®è·µæ¡ˆä¾‹](#åœ¨çº¿æ•™è‚²å¹³å°schemaå®è·µæ¡ˆä¾‹)
  - [ğŸ“‘ ç›®å½•](#-ç›®å½•)
  - [1. æ¡ˆä¾‹æ¦‚è¿°](#1-æ¡ˆä¾‹æ¦‚è¿°)
  - [2. æ¡ˆä¾‹1ï¼šè¯¾ç¨‹å†…å®¹ç®¡ç†](#2-æ¡ˆä¾‹1è¯¾ç¨‹å†…å®¹ç®¡ç†)
    - [2.1 åœºæ™¯æè¿°](#21-åœºæ™¯æè¿°)
    - [2.2 Schemaå®šä¹‰](#22-schemaå®šä¹‰)
  - [3. æ¡ˆä¾‹2ï¼šå­¦ä¹ è·¯å¾„è§„åˆ’](#3-æ¡ˆä¾‹2å­¦ä¹ è·¯å¾„è§„åˆ’)
    - [3.1 åœºæ™¯æè¿°](#31-åœºæ™¯æè¿°)
    - [3.2 Schemaå®šä¹‰](#32-schemaå®šä¹‰)
  - [4. æ¡ˆä¾‹3ï¼šäº’åŠ¨å­¦ä¹ ](#4-æ¡ˆä¾‹3äº’åŠ¨å­¦ä¹ )
    - [4.1 åœºæ™¯æè¿°](#41-åœºæ™¯æè¿°)
    - [4.2 Schemaå®šä¹‰](#42-schemaå®šä¹‰)
  - [5. æ¡ˆä¾‹4ï¼šCommon Cartridgeåˆ°xAPIè½¬æ¢](#5-æ¡ˆä¾‹4common-cartridgeåˆ°xapiè½¬æ¢)
    - [5.1 åœºæ™¯æè¿°](#51-åœºæ™¯æè¿°)
    - [5.2 å®ç°ä»£ç ](#52-å®ç°ä»£ç )
  - [6. æ¡ˆä¾‹5ï¼šåœ¨çº¿æ•™è‚²æ•°æ®å­˜å‚¨ä¸åˆ†æ](#6-æ¡ˆä¾‹5åœ¨çº¿æ•™è‚²æ•°æ®å­˜å‚¨ä¸åˆ†æ)
    - [6.1 åœºæ™¯æè¿°](#61-åœºæ™¯æè¿°)
    - [6.2 å®ç°ä»£ç ](#62-å®ç°ä»£ç )

---

## 1. æ¡ˆä¾‹æ¦‚è¿°

æœ¬æ–‡æ¡£æä¾›åœ¨çº¿æ•™è‚²å¹³å°Schemaåœ¨å®é™…ä¼ä¸šåº”ç”¨ä¸­çš„å®è·µæ¡ˆä¾‹ï¼Œæ¶µç›–è¯¾ç¨‹å†…å®¹ç®¡ç†ã€å­¦ä¹ è·¯å¾„è§„åˆ’ã€äº’åŠ¨å­¦ä¹ ç­‰çœŸå®åœºæ™¯ã€‚

**æ¡ˆä¾‹ç±»å‹**ï¼š

1. **è¯¾ç¨‹å†…å®¹ç®¡ç†ç³»ç»Ÿ**ï¼šåœ¨çº¿è¯¾ç¨‹å†…å®¹ç®¡ç†
2. **å­¦ä¹ è·¯å¾„è§„åˆ’ç³»ç»Ÿ**ï¼šä¸ªæ€§åŒ–å­¦ä¹ è·¯å¾„è§„åˆ’
3. **äº’åŠ¨å­¦ä¹ ç³»ç»Ÿ**ï¼šäº’åŠ¨å­¦ä¹ åŠŸèƒ½
4. **Common Cartridgeåˆ°xAPIè½¬æ¢å·¥å…·**ï¼šCommon Cartridgeåˆ°xAPIè½¬æ¢
5. **åœ¨çº¿æ•™è‚²æ•°æ®å­˜å‚¨ä¸åˆ†æç³»ç»Ÿ**ï¼šåœ¨çº¿æ•™è‚²æ•°æ®åˆ†æå’Œç›‘æ§

**å‚è€ƒä¼ä¸šæ¡ˆä¾‹**ï¼š
- **IMS Common Cartridge**ï¼šIMS Common Cartridgeæ ‡å‡†
- **xAPIæ ‡å‡†**ï¼šxAPI (Tin Can API)æ ‡å‡†

---

## 2. æ¡ˆä¾‹1ï¼šä¼ä¸šè¯¾ç¨‹å†…å®¹ç®¡ç†ç³»ç»Ÿ

### 2.1 ä¸šåŠ¡èƒŒæ™¯

**ä¼ä¸šèƒŒæ™¯**ï¼š
æŸåœ¨çº¿æ•™è‚²å¹³å°éœ€è¦æ„å»ºè¯¾ç¨‹å†…å®¹ç®¡ç†ç³»ç»Ÿï¼Œç®¡ç†åœ¨çº¿è¯¾ç¨‹å†…å®¹ï¼Œä½¿ç”¨IMS Common Cartridgeæ ¼å¼ï¼Œæ”¯æŒè¯¾ç¨‹å‘å¸ƒã€å­¦ä¹ è·¯å¾„è§„åˆ’ã€äº’åŠ¨å­¦ä¹ ç­‰åŠŸèƒ½ã€‚

**ä¸šåŠ¡ç—›ç‚¹**ï¼š
1. **å†…å®¹ç®¡ç†ä¸è§„èŒƒ**ï¼šè¯¾ç¨‹å†…å®¹ç®¡ç†ä¸è§„èŒƒ
2. **æ ¼å¼ä¸ç»Ÿä¸€**ï¼šè¯¾ç¨‹æ ¼å¼ä¸ç»Ÿä¸€
3. **è·¯å¾„è§„åˆ’å›°éš¾**ï¼šå­¦ä¹ è·¯å¾„è§„åˆ’å›°éš¾
4. **äº’åŠ¨åŠŸèƒ½ä¸è¶³**ï¼šäº’åŠ¨å­¦ä¹ åŠŸèƒ½ä¸è¶³

**ä¸šåŠ¡ç›®æ ‡**ï¼š
- è§„èŒƒå†…å®¹ç®¡ç†
- ç»Ÿä¸€è¯¾ç¨‹æ ¼å¼
- æé«˜è·¯å¾„è§„åˆ’æ•ˆç‡
- å¢å¼ºäº’åŠ¨åŠŸèƒ½

### 2.2 æŠ€æœ¯æŒ‘æˆ˜

1. **å†…å®¹æ¨¡å‹è®¾è®¡**ï¼šè®¾è®¡è¯¾ç¨‹å†…å®¹æ•°æ®æ¨¡å‹
2. **æ ‡å‡†åº”ç”¨**ï¼šåº”ç”¨IMS Common Cartridgeæ ‡å‡†
3. **è·¯å¾„è§„åˆ’ç®—æ³•**ï¼šå®ç°å­¦ä¹ è·¯å¾„è§„åˆ’ç®—æ³•
4. **äº’åŠ¨åŠŸèƒ½å®ç°**ï¼šå®ç°äº’åŠ¨å­¦ä¹ åŠŸèƒ½

### 2.3 è§£å†³æ–¹æ¡ˆ

**ç®¡ç†åœ¨çº¿è¯¾ç¨‹å†…å®¹ï¼Œä½¿ç”¨IMS Common Cartridgeæ ¼å¼**ï¼š

### 2.4 å®Œæ•´ä»£ç å®ç°

**è¯¾ç¨‹å†…å®¹ç®¡ç†Schemaï¼ˆå®Œæ•´ç¤ºä¾‹ï¼‰**ï¼š

```python
#!/usr/bin/env python3
"""
åœ¨çº¿æ•™è‚²å¹³å°Schemaå®ç°
"""

from typing import Dict, List, Optional
from datetime import datetime, date
from dataclasses import dataclass, field
from enum import Enum
from decimal import Decimal

class ResourceType(str, Enum):
    """èµ„æºç±»å‹"""
    VIDEO = "Video"
    DOCUMENT = "Document"
    QUIZ = "Quiz"
    ASSIGNMENT = "Assignment"

@dataclass
class CourseContent:
    """è¯¾ç¨‹å†…å®¹"""
    content_id: str
    course_id: str
    package_name: str
    resource_type: ResourceType
    resource_title: str
    resource_url: Optional[str] = None
    duration: Optional[int] = None  # minutes
    created_date: Optional[datetime] = None

@dataclass
class LearningPath:
    """å­¦ä¹ è·¯å¾„"""
    path_id: str
    learner_id: str
    course_id: str
    current_progress: Decimal
    completed_steps: int
    total_steps: int
    steps: List[str] = field(default_factory=list)
    created_date: Optional[datetime] = None

@dataclass
class Interaction:
    """äº’åŠ¨"""
    interaction_id: str
    learner_id: str
    content_id: str
    interaction_type: str  # Discussion, Question, Comment
    interaction_content: str
    interaction_time: datetime
    created_date: Optional[datetime] = None

@dataclass
class OnlineEducationStorage:
    """åœ¨çº¿æ•™è‚²æ•°æ®å­˜å‚¨"""
    contents: Dict[str, CourseContent] = field(default_factory=dict)
    learning_paths: Dict[str, LearningPath] = field(default_factory=dict)
    interactions: Dict[str, Interaction] = field(default_factory=dict)
    
    def store_content(self, content: CourseContent):
        """å­˜å‚¨å†…å®¹"""
        if content.created_date is None:
            content.created_date = datetime.now()
        self.contents[content.content_id] = content
    
    def create_learning_path(self, path: LearningPath):
        """åˆ›å»ºå­¦ä¹ è·¯å¾„"""
        if path.created_date is None:
            path.created_date = datetime.now()
        self.learning_paths[path.path_id] = path
    
    def store_interaction(self, interaction: Interaction):
        """å­˜å‚¨äº’åŠ¨"""
        if interaction.created_date is None:
            interaction.created_date = datetime.now()
        self.interactions[interaction.interaction_id] = interaction
    
    def update_learning_progress(self, path_id: str, progress: Decimal):
        """æ›´æ–°å­¦ä¹ è¿›åº¦"""
        if path_id not in self.learning_paths:
            raise ValueError(f"Learning path {path_id} not found")
        
        path = self.learning_paths[path_id]
        path.current_progress = min(Decimal('100'), max(Decimal('0'), progress))
        path.completed_steps = int((path.current_progress / Decimal('100')) * path.total_steps)

# ä½¿ç”¨ç¤ºä¾‹
if __name__ == '__main__':
    # åˆ›å»ºåœ¨çº¿æ•™è‚²å­˜å‚¨
    storage = OnlineEducationStorage()
    
    # åˆ›å»ºè¯¾ç¨‹å†…å®¹
    content = CourseContent(
        content_id="CONTENT001",
        course_id="COURSE001",
        package_name="Pythonç¼–ç¨‹åŸºç¡€è¯¾ç¨‹åŒ…",
        resource_type=ResourceType.VIDEO,
        resource_title="PythonåŸºç¡€è¯­æ³•",
        duration=30
    )
    storage.store_content(content)
    
    # åˆ›å»ºå­¦ä¹ è·¯å¾„
    path = LearningPath(
        path_id="PATH001",
        learner_id="LEARNER001",
        course_id="COURSE001",
        current_progress=Decimal('25.0'),
        completed_steps=2,
        total_steps=8
    )
    storage.create_learning_path(path)
    
    # æ›´æ–°å­¦ä¹ è¿›åº¦
    storage.update_learning_progress("PATH001", Decimal('50.0'))
    print(f"å­¦ä¹ è¿›åº¦: {storage.learning_paths['PATH001'].current_progress}%")
```

### 2.5 æ•ˆæœè¯„ä¼°

**æ€§èƒ½æŒ‡æ ‡**ï¼š

| æŒ‡æ ‡ | æ”¹è¿›å‰ | æ”¹è¿›å | æå‡ |
|------|--------|--------|------|
| å†…å®¹ç®¡ç†è§„èŒƒæ€§ | 70% | 95% | 25%æå‡ |
| æ ¼å¼ç»Ÿä¸€æ€§ | 65% | 98% | 33%æå‡ |
| è·¯å¾„è§„åˆ’æ•ˆç‡ | ä½ | é«˜ | æ˜¾è‘—æå‡ |
| äº’åŠ¨åŠŸèƒ½å®Œæ•´æ€§ | 60% | 90% | 30%æå‡ |

**ä¸šåŠ¡ä»·å€¼**ï¼š
1. **ç®¡ç†è§„èŒƒåŒ–**ï¼šè§„èŒƒå†…å®¹ç®¡ç†æµç¨‹
2. **æ ¼å¼ç»Ÿä¸€**ï¼šç»Ÿä¸€è¯¾ç¨‹æ ¼å¼
3. **æ•ˆç‡æé«˜**ï¼šæé«˜è·¯å¾„è§„åˆ’æ•ˆç‡
4. **åŠŸèƒ½å¢å¼º**ï¼šå¢å¼ºäº’åŠ¨åŠŸèƒ½

**ç»éªŒæ•™è®­**ï¼š
1. å†…å®¹æ¨¡å‹è®¾è®¡å¾ˆé‡è¦
2. æ ‡å‡†åº”ç”¨éœ€è¦å‡†ç¡®
3. è·¯å¾„è§„åˆ’ç®—æ³•éœ€è¦ä¼˜åŒ–
4. äº’åŠ¨åŠŸèƒ½éœ€è¦å®Œå–„

**å‚è€ƒæ¡ˆä¾‹**ï¼š
- [IMS Common Cartridgeæ ‡å‡†](https://www.imsglobal.org/activity/commoncartridge/)
- [xAPIæ ‡å‡†](https://xapi.com/)

---

## 3. æ¡ˆä¾‹2ï¼šå­¦ä¹ è·¯å¾„è§„åˆ’

### 3.1 åœºæ™¯æè¿°

**åº”ç”¨åœºæ™¯**ï¼š
ä¸ºå­¦ä¹ è€…è§„åˆ’ä¸ªæ€§åŒ–å­¦ä¹ è·¯å¾„ã€‚

### 3.2 Schemaå®šä¹‰

**å­¦ä¹ è·¯å¾„Schema**ï¼š

```dsl
schema LearningPath {
  path_id: String @value("PATH001") @required
  learner_id: String @value("LEARNER001") @required
  current_progress: Decimal @value(25.0) @range(0.0, 100.0)
  completed_steps: Integer @value(2)
  total_steps: Integer @value(8)
} @standard("xAPI")
```

---

## 4. æ¡ˆä¾‹3ï¼šäº’åŠ¨å­¦ä¹ 

### 4.1 åœºæ™¯æè¿°

**åº”ç”¨åœºæ™¯**ï¼š
åœ¨çº¿è®¨è®ºå’Œé—®ç­”äº’åŠ¨å­¦ä¹ ã€‚

### 4.2 Schemaå®šä¹‰

**äº’åŠ¨å­¦ä¹ Schema**ï¼š

```dsl
schema InteractiveLearning {
  interaction_id: String @value("INTER001") @required
  course_id: String @value("COURSE001") @required
  learner_id: String @value("LEARNER001") @required
  topic_title: String @value("Pythonå˜é‡å’Œæ•°æ®ç±»å‹")
} @standard("xAPI")
```

---

## 5. æ¡ˆä¾‹4ï¼šCommon Cartridgeåˆ°xAPIè½¬æ¢

### 5.1 åœºæ™¯æè¿°

**åº”ç”¨åœºæ™¯**ï¼š
å°†Common Cartridgeæ ¼å¼çš„è¯¾ç¨‹å†…å®¹è½¬æ¢ä¸ºxAPIè¯­å¥ã€‚

### 5.2 å®ç°ä»£ç 

```python
from online_education_storage import OnlineEducationStorage

def convert_cc_to_xapi_example():
    """Common Cartridgeåˆ°xAPIè½¬æ¢ç¤ºä¾‹"""
    cc_data = {
        "learner_email": "learner@example.com",
        "learner_name": "å¼ ä¸‰",
        "content_id": "CONTENT001",
        "content_title": "PythonåŸºç¡€è¯­æ³•",
        "course_id": "COURSE001"
    }

    # è½¬æ¢ä¸ºxAPIè¯­å¥
    xapi_statement = convert_cc_to_xapi(cc_data)
    print(f"xAPI Statement: {xapi_statement}")

    return xapi_statement

if __name__ == "__main__":
    convert_cc_to_xapi_example()
```

---

## 6. æ¡ˆä¾‹5ï¼šåœ¨çº¿æ•™è‚²æ•°æ®å­˜å‚¨ä¸åˆ†æ

### 6.1 åœºæ™¯æè¿°

**åº”ç”¨åœºæ™¯**ï¼š
ä½¿ç”¨PostgreSQLå­˜å‚¨åœ¨çº¿æ•™è‚²æ•°æ®ï¼Œè¿›è¡Œå­¦ä¹ åˆ†æã€‚

### 6.2 å®ç°ä»£ç 

```python
from online_education_storage import OnlineEducationStorage

def online_education_data_storage_example():
    """åœ¨çº¿æ•™è‚²æ•°æ®å­˜å‚¨ç¤ºä¾‹"""
    storage = OnlineEducationStorage("postgresql://user:password@localhost/online_edu_db")
    storage.create_tables()

    # å­˜å‚¨è¯¾ç¨‹å†…å®¹
    content_data = {
        "content_id": "CONTENT001",
        "course_id": "COURSE001",
        "package_name": "Pythonç¼–ç¨‹åŸºç¡€è¯¾ç¨‹åŒ…",
        "resource_type": "Video",
        "resource_title": "PythonåŸºç¡€è¯­æ³•"
    }
    storage.store_course_content(content_data)

    # åˆ†æåœ¨çº¿æ•™è‚²æ•°æ®
    results = analyze_online_education_data(storage)
    print(f"Online education analysis results: {results}")

    storage.close()

if __name__ == "__main__":
    online_education_data_storage_example()
```

---

**å‚è€ƒæ–‡æ¡£**ï¼š

- `01_Overview.md` - æ¦‚è¿°
- `02_Formal_Definition.md` - å½¢å¼åŒ–å®šä¹‰
- `03_Standards.md` - æ ‡å‡†å¯¹æ ‡
- `04_Transformation.md` - è½¬æ¢ä½“ç³»

**åˆ›å»ºæ—¶é—´**ï¼š2025-01-21
**æœ€åæ›´æ–°**ï¼š2025-01-21
