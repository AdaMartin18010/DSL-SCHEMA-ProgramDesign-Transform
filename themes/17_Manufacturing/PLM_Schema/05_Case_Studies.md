# PLM Schemaå®è·µæ¡ˆä¾‹

## ğŸ“‘ ç›®å½•

- [PLM Schemaå®è·µæ¡ˆä¾‹](#plm-schemaå®è·µæ¡ˆä¾‹)
  - [ğŸ“‘ ç›®å½•](#-ç›®å½•)
  - [1. æ¡ˆä¾‹æ¦‚è¿°](#1-æ¡ˆä¾‹æ¦‚è¿°)
  - [2. æ¡ˆä¾‹1ï¼šæ±½è½¦åˆ¶é€ ä¼ä¸šPLMæ•°å­—åŒ–é¡¹ç›®](#2-æ¡ˆä¾‹1æ±½è½¦åˆ¶é€ ä¼ä¸šplmæ•°å­—åŒ–é¡¹ç›®)
    - [2.1 ä¸šåŠ¡èƒŒæ™¯](#21-ä¸šåŠ¡èƒŒæ™¯)
    - [2.2 ä¸šåŠ¡ç—›ç‚¹](#22-ä¸šåŠ¡ç—›ç‚¹)
    - [2.3 ä¸šåŠ¡ç›®æ ‡](#23-ä¸šåŠ¡ç›®æ ‡)
    - [2.4 æŠ€æœ¯æŒ‘æˆ˜](#24-æŠ€æœ¯æŒ‘æˆ˜)
    - [2.5 Schemaå®šä¹‰](#25-schemaå®šä¹‰)
    - [2.6 å®Œæ•´ä»£ç å®ç°](#26-å®Œæ•´ä»£ç å®ç°)
    - [2.7 æ•ˆæœè¯„ä¼°](#27-æ•ˆæœè¯„ä¼°)
  - [3. æ¡ˆä¾‹2ï¼šç”µå­åˆ¶é€ ä¼ä¸šç ”å‘ååŒå¹³å°](#3-æ¡ˆä¾‹2ç”µå­åˆ¶é€ ä¼ä¸šç ”å‘ååŒå¹³å°)
    - [3.1-3.6 æ¦‚è¦](#31-36-æ¦‚è¦)
  - [4. æ¡ˆä¾‹æ€»ç»“](#4-æ¡ˆä¾‹æ€»ç»“)

---

## 1. æ¡ˆä¾‹æ¦‚è¿°

æœ¬æ–‡æ¡£æä¾›PLM Schemaåœ¨åˆ¶é€ è¡Œä¸šçš„å®è·µæ¡ˆä¾‹ã€‚

---

## 2. æ¡ˆä¾‹1ï¼šæ±½è½¦åˆ¶é€ ä¼ä¸šPLMæ•°å­—åŒ–é¡¹ç›®

### 2.1 ä¸šåŠ¡èƒŒæ™¯

**ä¼ä¸šæ¦‚å†µ**ï¼šæŸæ±½è½¦åˆ¶é€ ä¼ä¸šï¼ˆä»¥ä¸‹ç®€ç§°"Iæ±½è½¦"ï¼‰ï¼Œå¹´äº§èƒ½50ä¸‡è¾†ï¼Œæ‹¥æœ‰ç ”å‘äººå‘˜3000äººï¼Œå¹´ç ”å‘æŠ•å…¥è¶…è¿‡30äº¿å…ƒã€‚

### 2.2 ä¸šåŠ¡ç—›ç‚¹

1. **æ•°æ®å­¤å²›ä¸¥é‡**ï¼šCADã€CAEã€BOMæ•°æ®åˆ†æ•£ï¼Œå·¥ç¨‹å¸ˆæ¯å¤©èŠ±è´¹2å°æ—¶æŸ¥æ‰¾æ•°æ®
2. **å˜æ›´ç®¡ç†æ··ä¹±**ï¼šå·¥ç¨‹å˜æ›´å®¡æ‰¹å‘¨æœŸé•¿ï¼Œå¹³å‡éœ€è¦15å¤©ï¼Œå˜æ›´é”™è¯¯ç‡é«˜
3. **ååŒæ•ˆç‡ä½**ï¼šè·¨éƒ¨é—¨åä½œä¾èµ–é‚®ä»¶ï¼Œè®¾è®¡è¯„å®¡æ•ˆç‡ä½
4. **çŸ¥è¯†æµå¤±ä¸¥é‡**ï¼šä¸“å®¶ç»éªŒç¼ºä¹æ²‰æ·€ï¼Œæ–°å‘˜å·¥åŸ¹å…»å‘¨æœŸé•¿
5. **é¡¹ç›®ç®¡ç†ç²—æ”¾**ï¼šé¡¹ç›®è¿›åº¦ä¸é€æ˜ï¼Œå»¶æœŸç‡é«˜è¾¾40%

### 2.3 ä¸šåŠ¡ç›®æ ‡

1. **ç»Ÿä¸€æ•°æ®ç®¡ç†**ï¼šå»ºç«‹å•ä¸€æ•°æ®æºï¼Œæ•°æ®æŸ¥æ‰¾æ—¶é—´å‡å°‘80%
2. **ä¼˜åŒ–å˜æ›´æµç¨‹**ï¼šå˜æ›´å‘¨æœŸç¼©çŸ­è‡³3å¤©ï¼Œå˜æ›´é”™è¯¯ç‡é™ä½è‡³1%
3. **æå‡ååŒæ•ˆç‡**ï¼šå®ç°å¹¶è¡Œå·¥ç¨‹ï¼Œç ”å‘å‘¨æœŸç¼©çŸ­20%
4. **æ²‰æ·€çŸ¥è¯†èµ„äº§**ï¼šå»ºç«‹çŸ¥è¯†åº“ï¼Œæ–°å‘˜å·¥åŸ¹å…»å‘¨æœŸç¼©çŸ­50%
5. **ç²¾ç»†åŒ–é¡¹ç›®ç®¡ç†**ï¼šå®ç°é¡¹ç›®è¿›åº¦å®æ—¶ç›‘æ§ï¼Œå»¶æœŸç‡é™ä½è‡³10%

### 2.4 æŠ€æœ¯æŒ‘æˆ˜

1. **å¤šCADç³»ç»Ÿé›†æˆ**ï¼šæ”¯æŒCATIAã€UGã€Pro/Eç­‰å¤šç§CADæ ¼å¼
2. **å¤§æ•°æ®é‡å¤„ç†**ï¼šå•ä¸ªè½¦å‹æ•°æ®é‡è¶…è¿‡10TB
3. **å¤æ‚BOMç®¡ç†**ï¼šæ”¯æŒè¶…çº§BOMã€å¯é…ç½®BOM
4. **å…¨çƒåŒ–ååŒ**ï¼šæ”¯æŒå¤šåœ°åŸŸã€å¤šæ—¶åŒºååŒç ”å‘

### 2.5 Schemaå®šä¹‰

```json
{
  "product": {
    "product_id": "PROD-2025-001",
    "product_name": "æ–°èƒ½æºSUVè½¦å‹A",
    "product_line": "SUV",
    "platform": "P2",
    "lifecycle_status": "development",
    "bom": {
      "bom_id": "BOM-2025-001",
      "bom_structure": [
        {
          "level": 1,
          "part_number": "ASSY-001",
          "part_name": "è½¦èº«æ€»æˆ",
          "quantity": 1,
          "children": [
            {"part_number": "PRT-001", "part_name": "å‰åœ°æ¿", "quantity": 1}
          ]
        }
      ]
    }
  }
}
```

### 2.6 å®Œæ•´ä»£ç å®ç°

```python
#!/usr/bin/env python3
"""
PLMäº§å“ç”Ÿå‘½å‘¨æœŸç®¡ç†ç³»ç»Ÿ
åŠŸèƒ½ï¼šäº§å“ç®¡ç†ã€BOMç®¡ç†ã€å˜æ›´ç®¡ç†ã€é¡¹ç›®ç®¡ç†
"""

from datetime import datetime, date
from typing import Dict, List, Optional
from dataclasses import dataclass, field
from enum import Enum
import uuid


class LifecycleStatus(str, Enum):
    """ç”Ÿå‘½å‘¨æœŸçŠ¶æ€"""
    CONCEPT = "concept"
    DEVELOPMENT = "development"
    PRODUCTION = "production"
    PHASE_OUT = "phase_out"
    OBSOLETE = "obsolete"


class ChangeStatus(str, Enum):
    """å˜æ›´çŠ¶æ€"""
    DRAFT = "draft"
    PENDING = "pending"
    APPROVED = "approved"
    IMPLEMENTED = "implemented"
    REJECTED = "rejected"


@dataclass
class Part:
    """é›¶éƒ¨ä»¶"""
    part_number: str
    part_name: str
    part_type: str  # assembly, component, raw_material
    revision: str = "A"
    description: str = ""
    material: str = ""
    weight: float = 0.0
    unit: str = "EA"
    lifecycle_status: LifecycleStatus = LifecycleStatus.DEVELOPMENT
    owner: str = ""
    create_date: date = field(default_factory=date.today)
    cad_files: List[str] = field(default_factory=list)


@dataclass
class BOMItem:
    """BOMè¡Œé¡¹"""
    line_no: int
    child_part: Part
    quantity: float
    reference_designators: str = ""  # ä½å·
    alternative_parts: List[Part] = field(default_factory=list)


@dataclass
class BOM:
    """ç‰©æ–™æ¸…å•"""
    bom_id: str
    parent_part: Part
    revision: str
    bom_type: str  # engineering, manufacturing
    items: List[BOMItem] = field(default_factory=list)
    create_date: date = field(default_factory=date.today)
    effective_date: Optional[date] = None
    obsolete_date: Optional[date] = None
    
    def add_item(self, item: BOMItem):
        """æ·»åŠ BOMè¡Œé¡¹"""
        self.items.append(item)
    
    def get_total_parts(self) -> int:
        """è·å–æ€»é›¶éƒ¨ä»¶æ•°"""
        return len(self.items)
    
    def export_to_dict(self) -> Dict:
        """å¯¼å‡ºä¸ºå­—å…¸"""
        return {
            "bom_id": self.bom_id,
            "parent_part": self.parent_part.part_number,
            "revision": self.revision,
            "items": [
                {
                    "line_no": item.line_no,
                    "part_number": item.child_part.part_number,
                    "part_name": item.child_part.part_name,
                    "quantity": item.quantity
                }
                for item in self.items
            ]
        }


@dataclass
class EngineeringChange:
    """å·¥ç¨‹å˜æ›´"""
    ec_number: str
    ec_type: str  # design_change, process_change
    description: str
    reason: str
    status: ChangeStatus
    requestor: str
    create_date: date = field(default_factory=date.today)
    affected_parts: List[Part] = field(default_factory=list)
    approvers: List[str] = field(default_factory=list)
    implementation_date: Optional[date] = None
    
    def submit(self):
        """æäº¤å˜æ›´"""
        self.status = ChangeStatus.PENDING
    
    def approve(self, approver: str):
        """å®¡æ‰¹é€šè¿‡"""
        self.status = ChangeStatus.APPROVED
    
    def implement(self):
        """å®æ–½å˜æ›´"""
        self.status = ChangeStatus.IMPLEMENTED
        self.implementation_date = date.today()


@dataclass
class Project:
    """ç ”å‘é¡¹ç›®"""
    project_id: str
    project_name: str
    project_type: str  # new_product, improvement
    start_date: date
    planned_end_date: date
    actual_end_date: Optional[date] = None
    status: str = "planning"  # planning, active, completed, cancelled
    budget: float = 0.0
    actual_cost: float = 0.0
    manager: str = ""
    team_members: List[str] = field(default_factory=list)
    milestones: List[Dict] = field(default_factory=list)
    
    def add_milestone(self, name: str, planned_date: date):
        """æ·»åŠ é‡Œç¨‹ç¢‘"""
        self.milestones.append({
            "name": name,
            "planned_date": planned_date,
            "actual_date": None,
            "status": "pending"
        })
    
    def complete_milestone(self, name: str):
        """å®Œæˆé‡Œç¨‹ç¢‘"""
        for ms in self.milestones:
            if ms["name"] == name:
                ms["actual_date"] = date.today()
                ms["status"] = "completed"
    
    def get_progress(self) -> float:
        """è·å–é¡¹ç›®è¿›åº¦"""
        if not self.milestones:
            return 0.0
        completed = sum(1 for ms in self.milestones if ms["status"] == "completed")
        return completed / len(self.milestones)


class PLMSystem:
    """PLMç³»ç»Ÿæ ¸å¿ƒ"""
    
    def __init__(self):
        self.parts: Dict[str, Part] = {}
        self.boms: Dict[str, BOM] = {}
        self.changes: Dict[str, EngineeringChange] = {}
        self.projects: Dict[str, Project] = {}
        self.documents: Dict[str, Dict] = {}
    
    def create_part(self, part_number: str, part_name: str, part_type: str,
                   owner: str, **kwargs) -> Part:
        """åˆ›å»ºé›¶éƒ¨ä»¶"""
        part = Part(
            part_number=part_number,
            part_name=part_name,
            part_type=part_type,
            owner=owner,
            **kwargs
        )
        self.parts[part_number] = part
        return part
    
    def create_bom(self, parent_part_number: str, revision: str = "A") -> BOM:
        """åˆ›å»ºBOM"""
        parent = self.parts.get(parent_part_number)
        if not parent:
            raise ValueError(f"Parent part not found: {parent_part_number}")
        
        bom_id = f"BOM-{parent_part_number}-{revision}"
        bom = BOM(
            bom_id=bom_id,
            parent_part=parent,
            revision=revision,
            bom_type="engineering"
        )
        self.boms[bom_id] = bom
        return bom
    
    def create_change(self, ec_type: str, description: str, reason: str,
                     requestor: str) -> EngineeringChange:
        """åˆ›å»ºå·¥ç¨‹å˜æ›´"""
        ec_number = f"EC-{datetime.now().strftime('%Y%m%d')}-{uuid.uuid4().hex[:6].upper()}"
        change = EngineeringChange(
            ec_number=ec_number,
            ec_type=ec_type,
            description=description,
            reason=reason,
            status=ChangeStatus.DRAFT,
            requestor=requestor
        )
        self.changes[ec_number] = change
        return change
    
    def create_project(self, project_name: str, project_type: str,
                      start_date: date, planned_end_date: date,
                      manager: str, budget: float) -> Project:
        """åˆ›å»ºé¡¹ç›®"""
        project_id = f"PRJ-{uuid.uuid4().hex[:8].upper()}"
        project = Project(
            project_id=project_id,
            project_name=project_name,
            project_type=project_type,
            start_date=start_date,
            planned_end_date=planned_end_date,
            manager=manager,
            budget=budget
        )
        self.projects[project_id] = project
        return project
    
    def where_used(self, part_number: str) -> List[str]:
        """åæŸ¥é›¶éƒ¨ä»¶ä½¿ç”¨æƒ…å†µ"""
        used_in = []
        for bom in self.boms.values():
            for item in bom.items:
                if item.child_part.part_number == part_number:
                    used_in.append(bom.parent_part.part_number)
        return used_in
    
    def get_bom_cost(self, bom_id: str) -> float:
        """è®¡ç®—BOMæˆæœ¬"""
        # ç®€åŒ–çš„æˆæœ¬è®¡ç®—
        bom = self.boms.get(bom_id)
        if not bom:
            return 0.0
        
        total_cost = 0.0
        for item in bom.items:
            # æ¨¡æ‹Ÿæˆæœ¬æ•°æ®
            cost_per_unit = 100.0  # å‡è®¾å•ä½æˆæœ¬100å…ƒ
            total_cost += cost_per_unit * item.quantity
        
        return total_cost
    
    def generate_project_report(self, project_id: str) -> Dict:
        """ç”Ÿæˆé¡¹ç›®æŠ¥å‘Š"""
        project = self.projects.get(project_id)
        if not project:
            return {}
        
        return {
            "project_id": project.project_id,
            "project_name": project.project_name,
            "status": project.status,
            "progress": f"{project.get_progress():.1%}",
            "budget": project.budget,
            "actual_cost": project.actual_cost,
            "variance": project.budget - project.actual_cost,
            "milestones": project.milestones
        }


def main():
    """PLMç³»ç»Ÿæ¼”ç¤º"""
    
    print("=" * 60)
    print("PLMäº§å“ç”Ÿå‘½å‘¨æœŸç®¡ç†ç³»ç»Ÿæ¼”ç¤º")
    print("=" * 60)
    
    plm = PLMSystem()
    
    # 1. åˆ›å»ºé›¶éƒ¨ä»¶
    print("\n[1] åˆ›å»ºé›¶éƒ¨ä»¶")
    part1 = plm.create_part(
        "PRT-001", "å‰åœ°æ¿", "component",
        "å¼ ä¸‰", material="é«˜å¼ºåº¦é’¢", weight=15.5
    )
    part2 = plm.create_part(
        "PRT-002", "ååœ°æ¿", "component",
        "æå››", material="é«˜å¼ºåº¦é’¢", weight=12.3
    )
    part3 = plm.create_part(
        "ASSY-001", "è½¦èº«æ€»æˆ", "assembly",
        "ç‹äº”"
    )
    print(f"å·²åˆ›å»º {len(plm.parts)} ä¸ªé›¶éƒ¨ä»¶")
    
    # 2. åˆ›å»ºBOM
    print("\n[2] åˆ›å»ºBOM")
    bom = plm.create_bom("ASSY-001", "A")
    bom.add_item(BOMItem(10, part1, 1))
    bom.add_item(BOMItem(20, part2, 1))
    print(f"BOM ID: {bom.bom_id}")
    print(f"å­ä»¶æ•°é‡: {bom.get_total_parts()}")
    print(f"BOMç»“æ„: {bom.export_to_dict()}")
    
    # 3. åˆ›å»ºå·¥ç¨‹å˜æ›´
    print("\n[3] å·¥ç¨‹å˜æ›´ç®¡ç†")
    change = plm.create_change(
        "design_change",
        "ä¼˜åŒ–å‰åœ°æ¿ç»“æ„ä»¥å‡è½»é‡é‡",
        "å‡é‡ç›®æ ‡",
        "å¼ ä¸‰"
    )
    change.submit()
    change.approve("èµµç»ç†")
    change.implement()
    print(f"å˜æ›´å•å·: {change.ec_number}")
    print(f"å˜æ›´çŠ¶æ€: {change.status.value}")
    
    # 4. åˆ›å»ºé¡¹ç›®
    print("\n[4] é¡¹ç›®ç®¡ç†")
    project = plm.create_project(
        "æ–°èƒ½æºSUVè½¦å‹Aç ”å‘",
        "new_product",
        date(2025, 1, 1),
        date(2026, 6, 30),
        "åˆ˜æ€»ç›‘",
        500000000  # 5äº¿é¢„ç®—
    )
    project.add_milestone("æ¦‚å¿µè®¾è®¡å®Œæˆ", date(2025, 3, 31))
    project.add_milestone("å·¥ç¨‹è®¾è®¡å®Œæˆ", date(2025, 9, 30))
    project.add_milestone("æ ·è½¦è¯•åˆ¶å®Œæˆ", date(2025, 12, 31))
    
    project.complete_milestone("æ¦‚å¿µè®¾è®¡å®Œæˆ")
    
    report = plm.generate_project_report(project.project_id)
    print(f"é¡¹ç›®: {report['project_name']}")
    print(f"è¿›åº¦: {report['progress']}")
    print(f"é¢„ç®—: {report['budget']:,}å…ƒ")
    
    # 5. åæŸ¥
    print("\n[5] åæŸ¥æŸ¥è¯¢")
    used_in = plm.where_used("PRT-001")
    print(f"PRT-001 è¢«ä½¿ç”¨åœ¨: {used_in}")


if __name__ == "__main__":
    main()
```

### 2.7 æ•ˆæœè¯„ä¼°

| æŒ‡æ ‡ | åŸºçº¿å€¼ | ç›®æ ‡å€¼ | å®é™…å€¼ | è¾¾æˆç‡ |
|------|--------|--------|--------|--------|
| æ•°æ®æŸ¥æ‰¾æ—¶é—´ | 2å°æ—¶/å¤© | å‡å°‘80% | å‡å°‘85% | 106% |
| å˜æ›´å‘¨æœŸ | 15å¤© | â‰¤3å¤© | 2.5å¤© | 120% |
| ç ”å‘å‘¨æœŸ | 48ä¸ªæœˆ | ç¼©çŸ­20% | ç¼©çŸ­25% | 125% |
| é¡¹ç›®å»¶æœŸç‡ | 40% | â‰¤10% | 8% | 125% |

**ROIåˆ†æ**ï¼š
- é¡¹ç›®æ€»æŠ•èµ„ï¼š8000ä¸‡å…ƒ
- å¹´åº¦æ€»æ”¶ç›Šï¼š1.5äº¿å…ƒ
- **æŠ•èµ„å›æ”¶æœŸï¼š6.4ä¸ªæœˆ**
- **3å¹´ROIï¼š463%**

---

## 3. æ¡ˆä¾‹2ï¼šç”µå­åˆ¶é€ ä¼ä¸šç ”å‘ååŒå¹³å°

### 3.1-3.6 æ¦‚è¦

**ä¼ä¸šæ¦‚å†µ**ï¼šæŸç”µå­åˆ¶é€ ä¼ä¸šï¼Œå¹´ç ”å‘æŠ•å…¥10äº¿å…ƒï¼Œç ”å‘äººå‘˜2000äººã€‚

**ä¸šåŠ¡ç—›ç‚¹**ï¼š
1. è·¨åœ°åŸŸååŒå›°éš¾
2. ç‰ˆæœ¬ç®¡ç†æ··ä¹±
3. è®¾è®¡å¤ç”¨ç‡ä½

**è§£å†³æ–¹æ¡ˆ**ï¼šåŸºäºPLM Schemaæ„å»ºååŒç ”å‘å¹³å°ï¼Œå®ç°å…¨çƒç ”å‘ååŒã€‚

**æ•ˆæœè¯„ä¼°**ï¼š
- ååŒæ•ˆç‡æå‡60%
- è®¾è®¡å¤ç”¨ç‡æå‡è‡³45%
- ç ”å‘å‘¨æœŸç¼©çŸ­30%

---

## 4. æ¡ˆä¾‹æ€»ç»“

**å…³é”®æˆåŠŸå› ç´ **ï¼š
1. æ•°æ®æ ‡å‡†åŒ–æ˜¯åŸºç¡€
2. æµç¨‹è‡ªåŠ¨åŒ–æ˜¯æ ¸å¿ƒ
3. çŸ¥è¯†æ²‰æ·€æ˜¯é•¿æœŸä»·å€¼

**åˆ›å»ºæ—¶é—´**ï¼š2025-01-21  
**æœ€åæ›´æ–°**ï¼š2025-02-15
