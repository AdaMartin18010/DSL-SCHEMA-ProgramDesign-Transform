# 银行业务Schema概述

## 📑 目录

- [银行业务Schema概述](#银行业务schema概述)
  - [📑 目录](#-目录)
  - [1. 核心结论](#1-核心结论)
    - [1.1 银行核心系统Schema定义](#11-银行核心系统schema定义)
    - [1.2 标准依据](#12-标准依据)
  - [2. 概念定义](#2-概念定义)
    - [2.1 银行核心系统Schema](#21-银行核心系统schema)
    - [2.2 核心特征](#22-核心特征)
    - [2.3 Schema分类](#23-schema分类)
  - [3. 银行核心业务Schema](#3-银行核心业务schema)
    - [3.1 账户管理Schema](#31-账户管理schema)
    - [3.2 支付清算Schema](#32-支付清算schema)
    - [3.3 信贷业务Schema](#33-信贷业务schema)
    - [3.4 存款业务Schema](#34-存款业务schema)
    - [3.5 银行卡业务Schema](#35-银行卡业务schema)
  - [4. 标准对标](#4-标准对标)
    - [4.1 ISO 20022标准](#41-iso-20022标准)
    - [4.2 SWIFT标准](#42-swift标准)
    - [4.3 Basel协议](#43-basel协议)
    - [4.4 PCI DSS标准](#44-pci-dss标准)
  - [5. 应用场景](#5-应用场景)
    - [5.1 核心银行系统](#51-核心银行系统)
    - [5.2 支付系统](#52-支付系统)
    - [5.3 信贷管理系统](#53-信贷管理系统)
    - [5.4 银行卡系统](#54-银行卡系统)
    - [5.5 银行数据存储与分析](#55-银行数据存储与分析)
  - [6. 思维导图](#6-思维导图)
  - [7. 银行业务流程](#7-银行业务流程)
    - [7.1 开户流程](#71-开户流程)
    - [7.2 支付流程](#72-支付流程)
    - [7.3 信贷流程](#73-信贷流程)
  - [8. 行业最佳实践](#8-行业最佳实践)
    - [8.1 高可用架构](#81-高可用架构)
    - [8.2 数据安全](#82-数据安全)
    - [8.3 合规管理](#83-合规管理)

---

## 1. 核心结论

**银行业务存在强制性的Schema体系，涵盖核心银行系统、账户管理、支付清算、信贷业务等多个领域**。

### 1.1 银行核心系统Schema定义

```text
Banking_Schema = (Core_Banking_System ⊕ Account_Management ⊕ Payment_Clearing ⊕ Credit_Business) × Regulatory_Profile
```

其中：
- `Core_Banking_System`：核心银行系统Schema
- `Account_Management`：账户管理Schema
- `Payment_Clearing`：支付清算Schema
- `Credit_Business`：信贷业务Schema
- `Regulatory_Profile`：监管合规配置

### 1.2 标准依据

- **ISO 20022**：金融业务报文标准
- **SWIFT MT/MX**：跨境支付报文标准
- **Basel III/IV**：银行资本充足率监管协议
- **PCI DSS**：支付卡行业数据安全标准

---

## 2. 概念定义

### 2.1 银行核心系统Schema

**银行核心系统Schema**是描述银行核心业务数据的形式化规范，包括客户信息、账户信息、交易信息、产品信息等核心数据实体。

### 2.2 核心特征

1. **高可用性**：银行系统要求7×24小时不间断服务
2. **数据一致性**：强一致性要求，确保账务准确
3. **安全性**：多层次安全防护，符合监管要求
4. **可扩展性**：支持业务快速创新和扩展
5. **合规性**：满足国内外监管合规要求

### 2.3 Schema分类

- **账户管理Schema**：客户账户、对公账户、内部账户
- **支付清算Schema**：支付指令、清算记录、结算明细
- **信贷业务Schema**：贷款申请、合同管理、还款计划
- **存款业务Schema**：定期存款、活期存款、结构性存款
- **银行卡Schema**：借记卡、信用卡、预付卡

---

## 3. 银行核心业务Schema

### 3.1 账户管理Schema

**定义**：描述银行账户信息的数据结构，包括客户账户、对公账户、内部账户等。

**包含内容**：

- **客户账户**：个人储蓄账户、个人结算账户
- **对公账户**：基本存款账户、一般存款账户、专用存款账户、临时存款账户
- **内部账户**：会计科目账户、损益类账户、资产负债类账户

**核心属性**：

| 属性 | 类型 | 说明 | 约束 |
|------|------|------|------|
| account_number | String(32) | 账号 | 唯一，必填 |
| account_type | Enum | 账户类型 | PERS, CORP, INTL |
| currency | String(3) | 币种 | ISO 4217 |
| balance | Decimal(18,2) | 余额 | ≥ 0 |
| status | Enum | 状态 | ACTIVE, FROZEN, CLOSED |
| open_date | Date | 开户日期 | 必填 |
| customer_id | String(20) | 客户号 | 外键关联 |

### 3.2 支付清算Schema

**定义**：描述银行支付指令和清算记录的数据结构。

**包含内容**：

- **支付指令**：贷记转账、借记转账、实时支付
- **清算记录**：大额支付系统、小额支付系统、同城票据交换
- **结算明细**：日终结算、批量结算、实时结算

**支付类型**：

| 支付类型 | 代码 | 说明 | 处理时效 |
|----------|------|------|----------|
| 大额实时支付 | HVPS | 大额支付系统 | 实时 |
| 小额批量支付 | BEPS | 小额支付系统 | 批量 |
| 网上支付跨行清算 | IBPS | 超级网银 | 实时 |
| 同城票据交换 | LCHS | 同城清算 | T+1 |

### 3.3 信贷业务Schema

**定义**：描述银行贷款业务和信贷管理的数据结构。

**包含内容**：

- **贷款申请**：个人贷款、企业贷款、项目贷款
- **合同管理**：合同签订、合同变更、合同终止
- **还款计划**：等额本息、等额本金、按期付息到期还本
- **风险管理**：信用评级、担保管理、贷后监控

**贷款产品类型**：

| 产品类型 | 代码 | 期限范围 | 利率类型 |
|----------|------|----------|----------|
| 个人住房贷款 | MORT | 1-30年 | 固定/浮动 |
| 个人消费贷款 | CONS | 1-5年 | 固定 |
| 企业经营贷款 | BIZ | 1-10年 | 浮动 |
| 项目融资 | PROJ | 3-15年 | 浮动 |

### 3.4 存款业务Schema

**定义**：描述银行存款产品和存款账户的数据结构。

**包含内容**：

- **活期存款**：个人活期、对公活期
- **定期存款**：整存整取、零存整取、存本取息
- **结构性存款**：保本型、非保本型
- **大额存单**：标准型、定制型

**存款产品特征**：

| 产品类型 | 起存金额 | 存期 | 利率特点 |
|----------|----------|------|----------|
| 活期存款 | 1元 | 无固定期限 | 基准利率 |
| 定期存款 | 50元 | 3月-5年 | 上浮利率 |
| 结构性存款 | 1万元 | 1月-1年 | 浮动收益 |
| 大额存单 | 20万元 | 1月-3年 | 较高利率 |

### 3.5 银行卡业务Schema

**定义**：描述银行卡产品和交易的数据结构。

**包含内容**：

- **借记卡**：储蓄卡、工资卡、社保卡
- **信用卡**：标准卡、金卡、白金卡、钻石卡
- **预付卡**：礼品卡、交通卡、购物卡
- **交易记录**：消费交易、取现交易、转账交易

**银行卡类型对比**：

| 卡类型 | 功能特点 | 信用额度 | 年费政策 |
|--------|----------|----------|----------|
| 借记卡 | 先存后花 | 无 | 通常免费 |
| 信用卡 | 先花后还 | 有 | 按等级收取 |
| 预付卡 | 先充值后使用 | 无 | 按类型收取 |

---

## 4. 标准对标

### 4.1 ISO 20022标准

- **ISO 20022**：金融业务报文标准
- **pacs**：支付清算和结算消息
- **camt**：现金管理消息
- **pain**：支付发起消息

### 4.2 SWIFT标准

- **SWIFT MT**：传统SWIFT报文格式
- **SWIFT MX**：基于ISO 20022的XML报文
- **SWIFT gpi**：全球支付创新 initiative

### 4.3 Basel协议

- **Basel III**：资本充足率、杠杆率、流动性标准
- **Basel IV**：信用风险标准法修订、输出底线
- **风险加权资产计算**：标准法、内部评级法

### 4.4 PCI DSS标准

- **PCI DSS v4.0**：支付卡行业数据安全标准
- **安全控制**：网络安全、数据保护、访问控制
- **合规要求**：定期评估、漏洞扫描、渗透测试

---

## 5. 应用场景

### 5.1 核心银行系统

- 账户开立与维护
- 存款业务处理
- 贷款业务处理
- 支付结算处理
- 会计核算处理

### 5.2 支付系统

- 大额实时支付系统（HVPS）
- 小额批量支付系统（BEPS）
- 网上支付跨行清算系统（IBPS）
- 境内外币支付系统（CFXPS）
- 跨境人民币支付系统（CIPS）

### 5.3 信贷管理系统

- 客户信用评级
- 授信额度管理
- 贷款审批流程
- 贷后风险管理
- 不良资产处置

### 5.4 银行卡系统

- 卡片生命周期管理
- 交易授权处理
- 清算结算处理
- 积分权益管理
- 风险控制管理

### 5.5 银行数据存储与分析

**数据库存储应用场景**：

- **PostgreSQL银行数据存储**：
  - 客户信息存储（个人客户、对公客户）
  - 账户信息存储（储蓄账户、结算账户）
  - 交易记录存储（支付交易、存取交易）
  - 信贷数据存储（贷款合同、还款记录）
  - 银行卡数据存储（卡片信息、交易明细）

**应用价值**：

- 高效存储大规模银行交易数据
- 支持银行业务分析和报表生成
- 提供银行交易追踪和审计
- 支持银行合规性检查和监管报送

---

## 6. 思维导图

```text
Banking Schema
│
├─ 核心银行系统
│   ├─ 客户管理
│   │   ├─ 个人客户
│   │   └─ 对公客户
│   ├─ 账户管理
│   │   ├─ 储蓄账户
│   │   ├─ 结算账户
│   │   └─ 内部账户
│   └─ 产品管理
│       ├─ 存款产品
│       └─ 贷款产品
│
├─ 支付清算
│   ├─ 大额支付（HVPS）
│   ├─ 小额支付（BEPS）
│   ├─ 网银支付（IBPS）
│   └─ 跨境支付（CIPS）
│
├─ 信贷业务
│   ├─ 贷款申请
│   ├─ 合同管理
│   ├─ 还款计划
│   └─ 风险管理
│
├─ 银行卡业务
│   ├─ 借记卡
│   ├─ 信用卡
│   └─ 预付卡
│
└─ 合规监管
    ├─ Basel协议
    ├─ PCI DSS
    └─ 反洗钱（AML）
```

---

## 7. 银行业务流程

### 7.1 开户流程

```text
客户申请 → 身份验证 → 风险评估 → 账户开立 → 签约产品 → 激活使用
   │           │           │           │           │           │
   ▼           ▼           ▼           ▼           ▼           ▼
填写申请表   证件核验    风险测评    生成账号    签约网银    设置密码
资料收集     联网核查    适当性匹配   建立档案    开通短信    卡片制作
```

**流程说明**：

1. **客户申请**：客户提交开户申请，填写相关信息
2. **身份验证**：核验客户身份证件，进行联网核查
3. **风险评估**：进行客户风险承受能力评估
4. **账户开立**：生成账户号码，建立客户档案
5. **签约产品**：签约电子银行、短信通知等服务
6. **激活使用**：设置密码，领取凭证，激活账户

### 7.2 支付流程

```text
付款方发起 → 指令验证 → 账户扣款 → 清算处理 → 收款方入账 → 通知确认
    │            │           │           │           │           │
    ▼            ▼           ▼           ▼           ▼           ▼
提交支付指令  余额检查    冻结资金    报文发送    资金到账    短信通知
身份认证     限额检查    账务处理    清算确认    更新余额    电子回单
```

**流程说明**：

1. **付款方发起**：客户提交支付指令，进行身份认证
2. **指令验证**：检查账户余额、支付限额等
3. **账户扣款**：冻结并扣减付款方账户资金
4. **清算处理**：通过支付系统发送清算报文
5. **收款方入账**：资金到达收款方账户
6. **通知确认**：向双方发送交易确认通知

### 7.3 信贷流程

```text
贷款申请 → 信用评级 → 授信审批 → 合同签订 → 放款处理 → 贷后管理 → 贷款回收
   │           │           │           │           │           │           │
   ▼           ▼           ▼           ▼           ▼           ▼           ▼
提交申请资料  征信查询    额度核定    面签合同    资金划拨    还款监控    结清销户
收入证明      评分模型    风险定价    担保落实    账务处理    预警提示    征信更新
```

**流程说明**：

1. **贷款申请**：客户提交贷款申请及相关资料
2. **信用评级**：查询征信，运行评分模型
3. **授信审批**：核定授信额度，确定风险定价
4. **合同签订**：面签贷款合同，落实担保措施
5. **放款处理**：完成资金划拨和账务处理
6. **贷后管理**：监控还款情况，进行风险预警
7. **贷款回收**：贷款结清，更新征信记录

---

## 8. 行业最佳实践

### 8.1 高可用架构

**核心银行系统架构**：

```text
┌─────────────────────────────────────────────────────────────┐
│                        接入层                                │
│    手机银行    网上银行    柜面系统    自助设备    第三方    │
└────────────────────┬────────────────────────────────────────┘
                     │
┌────────────────────▼────────────────────────────────────────┐
│                       渠道整合层                             │
│              API Gateway    负载均衡    流量控制            │
└────────────────────┬────────────────────────────────────────┘
                     │
┌────────────────────▼────────────────────────────────────────┐
│                       应用服务层                             │
│    账户服务    支付服务    信贷服务    风控服务    客服服务  │
└────────────────────┬────────────────────────────────────────┘
                     │
┌────────────────────▼────────────────────────────────────────┐
│                       数据层                                 │
│    核心数据库    缓存层    消息队列    数据仓库    大数据    │
└─────────────────────────────────────────────────────────────┘
```

**高可用设计原则**：

1. **双活架构**：同城双活或异地多活部署
2. **故障隔离**：单元化部署，故障范围可控
3. **限流降级**：过载保护，服务降级机制
4. **数据同步**：实时数据同步，确保一致性

### 8.2 数据安全

**数据安全体系**：

```text
┌─────────────────────────────────────────────────────────────┐
│                      数据安全治理                            │
├─────────────────────────────────────────────────────────────┤
│  数据分级    数据加密    访问控制    审计追溯    脱敏保护   │
├─────────────────────────────────────────────────────────────┤
│  ├─ 核心数据  ├─ 传输加密  ├─ 最小权限  ├─ 全量审计  ├─ 静态脱敏  │
│  ├─ 敏感数据  ├─ 存储加密  ├─ 角色授权  ├─ 行为分析  ├─ 动态脱敏  │
│  └─ 公开数据  └─ 密钥管理  └─ 双因素认证 └─ 异常检测 └─ 数据水印  │
└─────────────────────────────────────────────────────────────┘
```

**安全措施**：

- **数据加密**：传输加密（TLS 1.3）、存储加密（AES-256）
- **访问控制**：基于角色的访问控制（RBAC）、零信任架构
- **审计追溯**：全量操作审计、敏感数据访问监控
- **脱敏保护**：静态脱敏、动态脱敏、数据水印

### 8.3 合规管理

**合规管理体系**：

```text
┌─────────────────────────────────────────────────────────────┐
│                      合规管理框架                            │
├──────────────┬──────────────┬──────────────┬────────────────┤
│   资本合规    │   风险合规    │   数据合规    │   运营合规      │
├──────────────┼──────────────┼──────────────┼────────────────┤
│ 资本充足率    │ 信用风险      │ 数据保护      │ 反洗钱         │
│ 杠杆率        │ 市场风险      │ 隐私合规      │ 反欺诈         │
│ 流动性覆盖    │ 操作风险      │ 跨境数据      │ 消费者权益     │
│ 净稳定资金    │ 集中度风险    │ 数据治理      │ 公平交易       │
└──────────────┴──────────────┴──────────────┴────────────────┘
```

**合规要求**：

- **资本合规**：满足Basel III资本充足率要求
- **风险合规**：建立完善的风险管理体系
- **数据合规**：遵守数据保护和隐私法规
- **运营合规**：防范洗钱欺诈，保护消费者权益

---

**参考文档**：

- `../README.md` - 主题概览
- `02_Formal_Definition.md` - 形式化定义
- `03_Standards.md` - 标准对标

**创建时间**：2025-01-21
**最后更新**：2025-01-21
